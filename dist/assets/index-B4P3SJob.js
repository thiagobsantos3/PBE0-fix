var eA=Object.defineProperty;var tA=(e,t,r)=>t in e?eA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var wh=(e,t,r)=>tA(e,typeof t!="symbol"?t+"":t,r);function rA(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var y1={exports:{}},Vd={},v1={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),sA=Symbol.for("react.portal"),iA=Symbol.for("react.fragment"),aA=Symbol.for("react.strict_mode"),oA=Symbol.for("react.profiler"),lA=Symbol.for("react.provider"),cA=Symbol.for("react.context"),uA=Symbol.for("react.forward_ref"),dA=Symbol.for("react.suspense"),fA=Symbol.for("react.memo"),hA=Symbol.for("react.lazy"),My=Symbol.iterator;function mA(e){return e===null||typeof e!="object"?null:(e=My&&e[My]||e["@@iterator"],typeof e=="function"?e:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w1=Object.assign,j1={};function vo(e,t,r){this.props=e,this.context=t,this.refs=j1,this.updater=r||b1}vo.prototype.isReactComponent={};vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _1(){}_1.prototype=vo.prototype;function Lg(e,t,r){this.props=e,this.context=t,this.refs=j1,this.updater=r||b1}var Rg=Lg.prototype=new _1;Rg.constructor=Lg;w1(Rg,vo.prototype);Rg.isPureReactComponent=!0;var Iy=Array.isArray,N1=Object.prototype.hasOwnProperty,qg={current:null},S1={key:!0,ref:!0,__self:!0,__source:!0};function k1(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)N1.call(t,n)&&!S1.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:dc,type:e,key:i,ref:o,props:s,_owner:qg.current}}function pA(e,t){return{$$typeof:dc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fg(e){return typeof e=="object"&&e!==null&&e.$$typeof===dc}function gA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $y=/\/+/g;function jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gA(""+e.key):t.toString(36)}function pu(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case dc:case sA:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jh(o,0):n,Iy(s)?(r="",e!=null&&(r=e.replace($y,"$&/")+"/"),pu(s,t,r,"",function(u){return u})):s!=null&&(Fg(s)&&(s=pA(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($y,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Iy(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jh(i,l);o+=pu(i,t,r,c,s)}else if(c=mA(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jh(i,l++),o+=pu(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(e,t,r){if(e==null)return e;var n=[],s=0;return pu(e,n,"","",function(i){return t.call(r,i,s++)}),n}function xA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},gu={transition:null},yA={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:gu,ReactCurrentOwner:qg};function P1(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Dc,forEach:function(e,t,r){Dc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dc(e,function(){t++}),t},toArray:function(e){return Dc(e,function(t){return t})||[]},only:function(e){if(!Fg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=vo;be.Fragment=iA;be.Profiler=oA;be.PureComponent=Lg;be.StrictMode=aA;be.Suspense=dA;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yA;be.act=P1;be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=w1({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=qg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N1.call(t,c)&&!S1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:dc,type:e.type,key:s,ref:i,props:n,_owner:o}};be.createContext=function(e){return e={$$typeof:cA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lA,_context:e},e.Consumer=e};be.createElement=k1;be.createFactory=function(e){var t=k1.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:uA,render:e}};be.isValidElement=Fg;be.lazy=function(e){return{$$typeof:hA,_payload:{_status:-1,_result:e},_init:xA}};be.memo=function(e,t){return{$$typeof:fA,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=gu.transition;gu.transition={};try{e()}finally{gu.transition=t}};be.unstable_act=P1;be.useCallback=function(e,t){return ir.current.useCallback(e,t)};be.useContext=function(e){return ir.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};be.useEffect=function(e,t){return ir.current.useEffect(e,t)};be.useId=function(){return ir.current.useId()};be.useImperativeHandle=function(e,t,r){return ir.current.useImperativeHandle(e,t,r)};be.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return ir.current.useMemo(e,t)};be.useReducer=function(e,t,r){return ir.current.useReducer(e,t,r)};be.useRef=function(e){return ir.current.useRef(e)};be.useState=function(e){return ir.current.useState(e)};be.useSyncExternalStore=function(e,t,r){return ir.current.useSyncExternalStore(e,t,r)};be.useTransition=function(){return ir.current.useTransition()};be.version="18.3.1";v1.exports=be;var b=v1.exports;const oe=Qn(b),vA=rA({__proto__:null,default:oe},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bA=b,wA=Symbol.for("react.element"),jA=Symbol.for("react.fragment"),_A=Object.prototype.hasOwnProperty,NA=bA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SA={key:!0,ref:!0,__self:!0,__source:!0};function E1(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)_A.call(t,n)&&!SA.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:wA,type:e,key:i,ref:o,props:s,_owner:NA.current}}Vd.Fragment=jA;Vd.jsx=E1;Vd.jsxs=E1;y1.exports=Vd;var a=y1.exports,C1={exports:{}},Lr={},A1={exports:{}},T1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,C){var A=k.length;k.push(C);e:for(;0<A;){var R=A-1>>>1,F=k[R];if(0<s(F,C))k[R]=C,k[A]=F,A=R;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var C=k[0],A=k.pop();if(A!==C){k[0]=A;e:for(var R=0,F=k.length,Z=F>>>1;R<Z;){var re=2*(R+1)-1,ne=k[re],J=re+1,he=k[J];if(0>s(ne,A))J<F&&0>s(he,ne)?(k[R]=he,k[J]=A,R=J):(k[R]=ne,k[re]=A,R=re);else if(J<F&&0>s(he,A))k[R]=he,k[J]=A,R=J;else break e}}return C}function s(k,C){var A=k.sortIndex-C.sortIndex;return A!==0?A:k.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var C=r(u);C!==null;){if(C.callback===null)n(u);else if(C.startTime<=k)n(u),C.sortIndex=C.expirationTime,t(c,C);else break;C=r(u)}}function _(k){if(y=!1,w(k),!p)if(r(c)!==null)p=!0,Q(j);else{var C=r(u);C!==null&&D(_,C.startTime-k)}}function j(k,C){p=!1,y&&(y=!1,v(E),E=-1),h=!0;var A=m;try{for(w(C),f=r(c);f!==null&&(!(f.expirationTime>C)||k&&!$());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var F=R(f.expirationTime<=C);C=e.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),w(C)}else n(c);f=r(c)}if(f!==null)var Z=!0;else{var re=r(u);re!==null&&D(_,re.startTime-C),Z=!1}return Z}finally{f=null,m=A,h=!1}}var N=!1,S=null,E=-1,O=5,T=-1;function $(){return!(e.unstable_now()-T<O)}function P(){if(S!==null){var k=e.unstable_now();T=k;var C=!0;try{C=S(!0,k)}finally{C?z():(N=!1,S=null)}}else N=!1}var z;if(typeof x=="function")z=function(){x(P)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=P,z=function(){q.postMessage(null)}}else z=function(){g(P,0)};function Q(k){S=k,N||(N=!0,z())}function D(k,C){E=g(function(){k(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,Q(j))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(m){case 1:case 2:case 3:var C=3;break;default:C=m}var A=m;m=C;try{return k()}finally{m=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,C){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var A=m;m=k;try{return C()}finally{m=A}},e.unstable_scheduleCallback=function(k,C,A){var R=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?R+A:R):A=R,k){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=A+F,k={id:d++,callback:C,priorityLevel:k,startTime:A,expirationTime:F,sortIndex:-1},A>R?(k.sortIndex=A,t(u,k),r(c)===null&&k===r(u)&&(y?(v(E),E=-1):y=!0,D(_,A-R))):(k.sortIndex=F,t(c,k),p||h||(p=!0,Q(j))),k},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(k){var C=m;return function(){var A=m;m=C;try{return k.apply(this,arguments)}finally{m=A}}}})(T1);A1.exports=T1;var kA=A1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA=b,Or=kA;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O1=new Set,El={};function ra(e,t){Ga(e,t),Ga(e+"Capture",t)}function Ga(e,t){for(El[e]=t,e=0;e<t.length;e++)O1.add(t[e])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=Object.prototype.hasOwnProperty,EA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zy={},Ly={};function CA(e){return Cm.call(Ly,e)?!0:Cm.call(zy,e)?!1:EA.test(e)?Ly[e]=!0:(zy[e]=!0,!1)}function AA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TA(e,t,r,n){if(t===null||typeof t>"u"||AA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Rt[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Rt[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Rt[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Rt[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Rt[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Rt[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Rt[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Rt[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Rt[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ug=/[\-:]([a-z])/g;function Bg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ug,Bg);Rt[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ug,Bg);Rt[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ug,Bg);Rt[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Rt[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Rt[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qg(e,t,r,n){var s=Rt.hasOwnProperty(t)?Rt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TA(t,r,s,n)&&(r=null),n||s===null?CA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gs=PA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),ja=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),Vg=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),M1=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Om=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),I1=Symbol.for("react.offscreen"),Ry=Symbol.iterator;function Lo(e){return e===null||typeof e!="object"?null:(e=Ry&&e[Ry]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,_h;function sl(e){if(_h===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var Nh=!1;function Sh(e,t){if(!e||Nh)return"";Nh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Nh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sl(e):""}function OA(e){switch(e.tag){case 5:return sl(e.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return e=Sh(e.type,!1),e;case 11:return e=Sh(e.type.render,!1),e;case 1:return e=Sh(e.type,!0),e;default:return""}}function Dm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _a:return"Fragment";case ja:return"Portal";case Am:return"Profiler";case Vg:return"StrictMode";case Tm:return"Suspense";case Om:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case M1:return(e.displayName||"Context")+".Consumer";case D1:return(e._context.displayName||"Context")+".Provider";case Wg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kg:return t=e.displayName||null,t!==null?t:Dm(e.type)||"Memo";case As:t=e._payload,e=e._init;try{return Dm(e(t))}catch{}}return null}function DA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(t);case 8:return t===Vg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ri(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MA(e){var t=$1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ic(e){e._valueTracker||(e._valueTracker=MA(e))}function z1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Au(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mm(e,t){var r=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function qy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ri(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function L1(e,t){t=t.checked,t!=null&&Qg(e,"checked",t,!1)}function Im(e,t){L1(e,t);var r=ri(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$m(e,t.type,r):t.hasOwnProperty("defaultValue")&&$m(e,t.type,ri(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $m(e,t,r){(t!=="number"||Au(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var il=Array.isArray;function za(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ri(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Uy(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(il(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ri(r)}}function R1(e,t){var r=ri(t.value),n=ri(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function By(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function q1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?q1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $c,F1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$c.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IA=["Webkit","ms","Moz","O"];Object.keys(dl).forEach(function(e){IA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dl[t]=dl[e]})});function U1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dl.hasOwnProperty(e)&&dl[e]?(""+t).trim():t+"px"}function B1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=U1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var $A=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(e,t){if(t){if($A[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function qm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fm=null;function Hg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Um=null,La=null,Ra=null;function Qy(e){if(e=mc(e)){if(typeof Um!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Yd(t),Um(e.stateNode,e.type,t))}}function Q1(e){La?Ra?Ra.push(e):Ra=[e]:La=e}function V1(){if(La){var e=La,t=Ra;if(Ra=La=null,Qy(e),t)for(e=0;e<t.length;e++)Qy(t[e])}}function W1(e,t){return e(t)}function K1(){}var kh=!1;function H1(e,t,r){if(kh)return e(t,r);kh=!0;try{return W1(e,t,r)}finally{kh=!1,(La!==null||Ra!==null)&&(K1(),V1())}}function Al(e,t){var r=e.stateNode;if(r===null)return null;var n=Yd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var Bm=!1;if(os)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Bm=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Bm=!1}function zA(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var fl=!1,Tu=null,Ou=!1,Qm=null,LA={onError:function(e){fl=!0,Tu=e}};function RA(e,t,r,n,s,i,o,l,c){fl=!1,Tu=null,zA.apply(LA,arguments)}function qA(e,t,r,n,s,i,o,l,c){if(RA.apply(this,arguments),fl){if(fl){var u=Tu;fl=!1,Tu=null}else throw Error(X(198));Ou||(Ou=!0,Qm=u)}}function na(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function G1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vy(e){if(na(e)!==e)throw Error(X(188))}function FA(e){var t=e.alternate;if(!t){if(t=na(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Vy(s),e;if(i===n)return Vy(s),t;i=i.sibling}throw Error(X(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function Y1(e){return e=FA(e),e!==null?X1(e):null}function X1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X1(e);if(t!==null)return t;e=e.sibling}return null}var J1=Or.unstable_scheduleCallback,Wy=Or.unstable_cancelCallback,UA=Or.unstable_shouldYield,BA=Or.unstable_requestPaint,nt=Or.unstable_now,QA=Or.unstable_getCurrentPriorityLevel,Gg=Or.unstable_ImmediatePriority,Z1=Or.unstable_UserBlockingPriority,Du=Or.unstable_NormalPriority,VA=Or.unstable_LowPriority,e_=Or.unstable_IdlePriority,Wd=null,$n=null;function WA(e){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Wd,e,void 0,(e.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:GA,KA=Math.log,HA=Math.LN2;function GA(e){return e>>>=0,e===0?32:31-(KA(e)/HA|0)|0}var zc=64,Lc=4194304;function al(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=al(l):(i&=o,i!==0&&(n=al(i)))}else o=r&~s,o!==0?n=al(o):i!==0&&(n=al(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wn(t),s=1<<r,n|=e[r],t&=~s;return n}function YA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XA(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-wn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=YA(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Vm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t_(){var e=zc;return zc<<=1,!(zc&4194240)&&(zc=64),e}function Ph(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wn(t),e[t]=r}function JA(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-wn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Yg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ae=0;function r_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var n_,Xg,s_,i_,a_,Wm=!1,Rc=[],Vs=null,Ws=null,Ks=null,Tl=new Map,Ol=new Map,Ms=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ky(e,t){switch(e){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":Tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(t.pointerId)}}function qo(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=mc(t),t!==null&&Xg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function eT(e,t,r,n,s){switch(t){case"focusin":return Vs=qo(Vs,e,t,r,n,s),!0;case"dragenter":return Ws=qo(Ws,e,t,r,n,s),!0;case"mouseover":return Ks=qo(Ks,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Tl.set(i,qo(Tl.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ol.set(i,qo(Ol.get(i)||null,e,t,r,n,s)),!0}return!1}function o_(e){var t=Si(e.target);if(t!==null){var r=na(t);if(r!==null){if(t=r.tag,t===13){if(t=G1(r),t!==null){e.blockedOn=t,a_(e.priority,function(){s_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Km(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Fm=n,r.target.dispatchEvent(n),Fm=null}else return t=mc(r),t!==null&&Xg(t),e.blockedOn=r,!1;t.shift()}return!0}function Hy(e,t,r){xu(e)&&r.delete(t)}function tT(){Wm=!1,Vs!==null&&xu(Vs)&&(Vs=null),Ws!==null&&xu(Ws)&&(Ws=null),Ks!==null&&xu(Ks)&&(Ks=null),Tl.forEach(Hy),Ol.forEach(Hy)}function Fo(e,t){e.blockedOn===t&&(e.blockedOn=null,Wm||(Wm=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,tT)))}function Dl(e){function t(s){return Fo(s,e)}if(0<Rc.length){Fo(Rc[0],e);for(var r=1;r<Rc.length;r++){var n=Rc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Vs!==null&&Fo(Vs,e),Ws!==null&&Fo(Ws,e),Ks!==null&&Fo(Ks,e),Tl.forEach(t),Ol.forEach(t),r=0;r<Ms.length;r++)n=Ms[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ms.length&&(r=Ms[0],r.blockedOn===null);)o_(r),r.blockedOn===null&&Ms.shift()}var qa=gs.ReactCurrentBatchConfig,Iu=!0;function rT(e,t,r,n){var s=Ae,i=qa.transition;qa.transition=null;try{Ae=1,Jg(e,t,r,n)}finally{Ae=s,qa.transition=i}}function nT(e,t,r,n){var s=Ae,i=qa.transition;qa.transition=null;try{Ae=4,Jg(e,t,r,n)}finally{Ae=s,qa.transition=i}}function Jg(e,t,r,n){if(Iu){var s=Km(e,t,r,n);if(s===null)zh(e,t,n,$u,r),Ky(e,n);else if(eT(s,e,t,r,n))n.stopPropagation();else if(Ky(e,n),t&4&&-1<ZA.indexOf(e)){for(;s!==null;){var i=mc(s);if(i!==null&&n_(i),i=Km(e,t,r,n),i===null&&zh(e,t,n,$u,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else zh(e,t,n,null,r)}}var $u=null;function Km(e,t,r,n){if($u=null,e=Hg(n),e=Si(e),e!==null)if(t=na(e),t===null)e=null;else if(r=t.tag,r===13){if(e=G1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $u=e,null}function l_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QA()){case Gg:return 1;case Z1:return 4;case Du:case VA:return 16;case e_:return 536870912;default:return 16}default:return 16}}var qs=null,Zg=null,yu=null;function c_(){if(yu)return yu;var e,t=Zg,r=t.length,n,s="value"in qs?qs.value:qs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return yu=s.slice(e,1<n?1-n:void 0)}function vu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qc(){return!0}function Gy(){return!1}function Rr(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qc:Gy,this.isPropagationStopped=Gy,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),t}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e0=Rr(bo),hc=Ze({},bo,{view:0,detail:0}),sT=Rr(hc),Eh,Ch,Uo,Kd=Ze({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uo&&(Uo&&e.type==="mousemove"?(Eh=e.screenX-Uo.screenX,Ch=e.screenY-Uo.screenY):Ch=Eh=0,Uo=e),Eh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),Yy=Rr(Kd),iT=Ze({},Kd,{dataTransfer:0}),aT=Rr(iT),oT=Ze({},hc,{relatedTarget:0}),Ah=Rr(oT),lT=Ze({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),cT=Rr(lT),uT=Ze({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dT=Rr(uT),fT=Ze({},bo,{data:0}),Xy=Rr(fT),hT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pT[e])?!!t[e]:!1}function t0(){return gT}var xT=Ze({},hc,{key:function(e){if(e.key){var t=hT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(e){return e.type==="keypress"?vu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yT=Rr(xT),vT=Ze({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=Rr(vT),bT=Ze({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),wT=Rr(bT),jT=Ze({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_T=Rr(jT),NT=Ze({},Kd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=Rr(NT),kT=[9,13,27,32],r0=os&&"CompositionEvent"in window,hl=null;os&&"documentMode"in document&&(hl=document.documentMode);var PT=os&&"TextEvent"in window&&!hl,u_=os&&(!r0||hl&&8<hl&&11>=hl),Zy=" ",ev=!1;function d_(e,t){switch(e){case"keyup":return kT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Na=!1;function ET(e,t){switch(e){case"compositionend":return f_(t);case"keypress":return t.which!==32?null:(ev=!0,Zy);case"textInput":return e=t.data,e===Zy&&ev?null:e;default:return null}}function CT(e,t){if(Na)return e==="compositionend"||!r0&&d_(e,t)?(e=c_(),yu=Zg=qs=null,Na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u_&&t.locale!=="ko"?null:t.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AT[e.type]:t==="textarea"}function h_(e,t,r,n){Q1(n),t=zu(t,"onChange"),0<t.length&&(r=new e0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ml=null,Ml=null;function TT(e){N_(e,0)}function Hd(e){var t=Pa(e);if(z1(t))return e}function OT(e,t){if(e==="change")return t}var m_=!1;if(os){var Th;if(os){var Oh="oninput"in document;if(!Oh){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),Oh=typeof rv.oninput=="function"}Th=Oh}else Th=!1;m_=Th&&(!document.documentMode||9<document.documentMode)}function nv(){ml&&(ml.detachEvent("onpropertychange",p_),Ml=ml=null)}function p_(e){if(e.propertyName==="value"&&Hd(Ml)){var t=[];h_(t,Ml,e,Hg(e)),H1(TT,t)}}function DT(e,t,r){e==="focusin"?(nv(),ml=t,Ml=r,ml.attachEvent("onpropertychange",p_)):e==="focusout"&&nv()}function MT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hd(Ml)}function IT(e,t){if(e==="click")return Hd(t)}function $T(e,t){if(e==="input"||e==="change")return Hd(t)}function zT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nn=typeof Object.is=="function"?Object.is:zT;function Il(e,t){if(Nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Cm.call(t,s)||!Nn(e[s],t[s]))return!1}return!0}function sv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iv(e,t){var r=sv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sv(r)}}function g_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x_(){for(var e=window,t=Au();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Au(e.document)}return t}function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LT(e){var t=x_(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&g_(r.ownerDocument.documentElement,r)){if(n!==null&&n0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=iv(r,i);var o=iv(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RT=os&&"documentMode"in document&&11>=document.documentMode,Sa=null,Hm=null,pl=null,Gm=!1;function av(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gm||Sa==null||Sa!==Au(n)||(n=Sa,"selectionStart"in n&&n0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pl&&Il(pl,n)||(pl=n,n=zu(Hm,"onSelect"),0<n.length&&(t=new e0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sa)))}function Fc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ka={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},Dh={},y_={};os&&(y_=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Gd(e){if(Dh[e])return Dh[e];if(!ka[e])return e;var t=ka[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in y_)return Dh[e]=t[r];return e}var v_=Gd("animationend"),b_=Gd("animationiteration"),w_=Gd("animationstart"),j_=Gd("transitionend"),__=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(e,t){__.set(e,t),ra(t,[e])}for(var Mh=0;Mh<ov.length;Mh++){var Ih=ov[Mh],qT=Ih.toLowerCase(),FT=Ih[0].toUpperCase()+Ih.slice(1);ii(qT,"on"+FT)}ii(v_,"onAnimationEnd");ii(b_,"onAnimationIteration");ii(w_,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(j_,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function lv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qA(n,t,void 0,e),e.currentTarget=null}function N_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;lv(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;lv(s,l,u),i=c}}}if(Ou)throw e=Qm,Ou=!1,Qm=null,e}function Ue(e,t){var r=t[ep];r===void 0&&(r=t[ep]=new Set);var n=e+"__bubble";r.has(n)||(S_(t,e,2,!1),r.add(n))}function $h(e,t,r){var n=0;t&&(n|=4),S_(r,e,n,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function $l(e){if(!e[Uc]){e[Uc]=!0,O1.forEach(function(r){r!=="selectionchange"&&(UT.has(r)||$h(r,!1,e),$h(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uc]||(t[Uc]=!0,$h("selectionchange",!1,t))}}function S_(e,t,r,n){switch(l_(t)){case 1:var s=rT;break;case 4:s=nT;break;default:s=Jg}r=s.bind(null,t,r,e),s=void 0,!Bm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Si(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}H1(function(){var u=i,d=Hg(r),f=[];e:{var m=__.get(e);if(m!==void 0){var h=e0,p=e;switch(e){case"keypress":if(vu(r)===0)break e;case"keydown":case"keyup":h=yT;break;case"focusin":p="focus",h=Ah;break;case"focusout":p="blur",h=Ah;break;case"beforeblur":case"afterblur":h=Ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=aT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=wT;break;case v_:case b_:case w_:h=cT;break;case j_:h=_T;break;case"scroll":h=sT;break;case"wheel":h=ST;break;case"copy":case"cut":case"paste":h=dT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Jy}var y=(t&4)!==0,g=!y&&e==="scroll",v=y?m!==null?m+"Capture":null:m;y=[];for(var x=u,w;x!==null;){w=x;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Al(x,v),_!=null&&y.push(zl(x,_,w)))),g)break;x=x.return}0<y.length&&(m=new h(m,p,null,r,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&r!==Fm&&(p=r.relatedTarget||r.fromElement)&&(Si(p)||p[ls]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=u,p=p?Si(p):null,p!==null&&(g=na(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(y=Yy,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Jy,_="onPointerLeave",v="onPointerEnter",x="pointer"),g=h==null?m:Pa(h),w=p==null?m:Pa(p),m=new y(_,x+"leave",h,r,d),m.target=g,m.relatedTarget=w,_=null,Si(d)===u&&(y=new y(v,x+"enter",p,r,d),y.target=w,y.relatedTarget=g,_=y),g=_,h&&p)t:{for(y=h,v=p,x=0,w=y;w;w=fa(w))x++;for(w=0,_=v;_;_=fa(_))w++;for(;0<x-w;)y=fa(y),x--;for(;0<w-x;)v=fa(v),w--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=fa(y),v=fa(v)}y=null}else y=null;h!==null&&cv(f,m,h,y,!1),p!==null&&g!==null&&cv(f,g,p,y,!0)}}e:{if(m=u?Pa(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=OT;else if(tv(m))if(m_)j=$T;else{j=MT;var N=DT}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=IT);if(j&&(j=j(e,u))){h_(f,j,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&$m(m,"number",m.value)}switch(N=u?Pa(u):window,e){case"focusin":(tv(N)||N.contentEditable==="true")&&(Sa=N,Hm=u,pl=null);break;case"focusout":pl=Hm=Sa=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,av(f,r,d);break;case"selectionchange":if(RT)break;case"keydown":case"keyup":av(f,r,d)}var S;if(r0)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Na?d_(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(u_&&r.locale!=="ko"&&(Na||E!=="onCompositionStart"?E==="onCompositionEnd"&&Na&&(S=c_()):(qs=d,Zg="value"in qs?qs.value:qs.textContent,Na=!0)),N=zu(u,E),0<N.length&&(E=new Xy(E,e,null,r,d),f.push({event:E,listeners:N}),S?E.data=S:(S=f_(r),S!==null&&(E.data=S)))),(S=PT?ET(e,r):CT(e,r))&&(u=zu(u,"onBeforeInput"),0<u.length&&(d=new Xy("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}N_(f,t)})}function zl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function zu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Al(e,r),i!=null&&n.unshift(zl(e,i,s)),i=Al(e,t),i!=null&&n.push(zl(e,i,s))),e=e.return}return n}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cv(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Al(r,i),c!=null&&o.unshift(zl(r,c,l))):s||(c=Al(r,i),c!=null&&o.push(zl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var BT=/\r\n?/g,QT=/\u0000|\uFFFD/g;function uv(e){return(typeof e=="string"?e:""+e).replace(BT,`
`).replace(QT,"")}function Bc(e,t,r){if(t=uv(t),uv(e)!==t&&r)throw Error(X(425))}function Lu(){}var Ym=null,Xm=null;function Jm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zm=typeof setTimeout=="function"?setTimeout:void 0,VT=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(e){return dv.resolve(null).then(e).catch(KT)}:Zm;function KT(e){setTimeout(function(){throw e})}function Lh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Dl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Dl(t)}function Hs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Dn="__reactFiber$"+wo,Ll="__reactProps$"+wo,ls="__reactContainer$"+wo,ep="__reactEvents$"+wo,HT="__reactListeners$"+wo,GT="__reactHandles$"+wo;function Si(e){var t=e[Dn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ls]||r[Dn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=fv(e);e!==null;){if(r=e[Dn])return r;e=fv(e)}return t}e=r,r=e.parentNode}return null}function mc(e){return e=e[Dn]||e[ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Yd(e){return e[Ll]||null}var tp=[],Ea=-1;function ai(e){return{current:e}}function Ve(e){0>Ea||(e.current=tp[Ea],tp[Ea]=null,Ea--)}function qe(e,t){Ea++,tp[Ea]=e.current,e.current=t}var ni={},Gt=ai(ni),yr=ai(!1),qi=ni;function Ya(e,t){var r=e.type.contextTypes;if(!r)return ni;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vr(e){return e=e.childContextTypes,e!=null}function Ru(){Ve(yr),Ve(Gt)}function hv(e,t,r){if(Gt.current!==ni)throw Error(X(168));qe(Gt,t),qe(yr,r)}function k_(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(X(108,DA(e)||"Unknown",s));return Ze({},r,n)}function qu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ni,qi=Gt.current,qe(Gt,e),qe(yr,yr.current),!0}function mv(e,t,r){var n=e.stateNode;if(!n)throw Error(X(169));r?(e=k_(e,t,qi),n.__reactInternalMemoizedMergedChildContext=e,Ve(yr),Ve(Gt),qe(Gt,e)):Ve(yr),qe(yr,r)}var Gn=null,Xd=!1,Rh=!1;function P_(e){Gn===null?Gn=[e]:Gn.push(e)}function YT(e){Xd=!0,P_(e)}function oi(){if(!Rh&&Gn!==null){Rh=!0;var e=0,t=Ae;try{var r=Gn;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Gn=null,Xd=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(e+1)),J1(Gg,oi),s}finally{Ae=t,Rh=!1}}return null}var Ca=[],Aa=0,Fu=null,Uu=0,Br=[],Qr=0,Fi=null,es=1,ts="";function yi(e,t){Ca[Aa++]=Uu,Ca[Aa++]=Fu,Fu=e,Uu=t}function E_(e,t,r){Br[Qr++]=es,Br[Qr++]=ts,Br[Qr++]=Fi,Fi=e;var n=es;e=ts;var s=32-wn(n)-1;n&=~(1<<s),r+=1;var i=32-wn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,es=1<<32-wn(t)+s|r<<s|n,ts=i+e}else es=1<<i|r<<s|n,ts=e}function s0(e){e.return!==null&&(yi(e,1),E_(e,1,0))}function i0(e){for(;e===Fu;)Fu=Ca[--Aa],Ca[Aa]=null,Uu=Ca[--Aa],Ca[Aa]=null;for(;e===Fi;)Fi=Br[--Qr],Br[Qr]=null,ts=Br[--Qr],Br[Qr]=null,es=Br[--Qr],Br[Qr]=null}var Ar=null,Cr=null,We=!1,mn=null;function C_(e,t){var r=Kr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ar=e,Cr=Hs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ar=e,Cr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fi!==null?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ar=e,Cr=null,!0):!1;default:return!1}}function rp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function np(e){if(We){var t=Cr;if(t){var r=t;if(!pv(e,t)){if(rp(e))throw Error(X(418));t=Hs(r.nextSibling);var n=Ar;t&&pv(e,t)?C_(n,r):(e.flags=e.flags&-4097|2,We=!1,Ar=e)}}else{if(rp(e))throw Error(X(418));e.flags=e.flags&-4097|2,We=!1,Ar=e}}}function gv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ar=e}function Qc(e){if(e!==Ar)return!1;if(!We)return gv(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jm(e.type,e.memoizedProps)),t&&(t=Cr)){if(rp(e))throw A_(),Error(X(418));for(;t;)C_(e,t),t=Hs(t.nextSibling)}if(gv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Cr=Hs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Cr=null}}else Cr=Ar?Hs(e.stateNode.nextSibling):null;return!0}function A_(){for(var e=Cr;e;)e=Hs(e.nextSibling)}function Xa(){Cr=Ar=null,We=!1}function a0(e){mn===null?mn=[e]:mn.push(e)}var XT=gs.ReactCurrentBatchConfig;function Bo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Vc(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xv(e){var t=e._init;return t(e._payload)}function T_(e){function t(v,x){if(e){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Js(v,x),v.index=0,v.sibling=null,v}function i(v,x,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,w,_){return x===null||x.tag!==6?(x=Wh(w,v.mode,_),x.return=v,x):(x=s(x,w),x.return=v,x)}function c(v,x,w,_){var j=w.type;return j===_a?d(v,x,w.props.children,_,w.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===As&&xv(j)===x.type)?(_=s(x,w.props),_.ref=Bo(v,x,w),_.return=v,_):(_=ku(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,x,w),_.return=v,_)}function u(v,x,w,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Kh(w,v.mode,_),x.return=v,x):(x=s(x,w.children||[]),x.return=v,x)}function d(v,x,w,_,j){return x===null||x.tag!==7?(x=Ii(w,v.mode,_,j),x.return=v,x):(x=s(x,w),x.return=v,x)}function f(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Wh(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mc:return w=ku(x.type,x.key,x.props,null,v.mode,w),w.ref=Bo(v,null,x),w.return=v,w;case ja:return x=Kh(x,v.mode,w),x.return=v,x;case As:var _=x._init;return f(v,_(x._payload),w)}if(il(x)||Lo(x))return x=Ii(x,v.mode,w,null),x.return=v,x;Vc(v,x)}return null}function m(v,x,w,_){var j=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,x,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:return w.key===j?c(v,x,w,_):null;case ja:return w.key===j?u(v,x,w,_):null;case As:return j=w._init,m(v,x,j(w._payload),_)}if(il(w)||Lo(w))return j!==null?null:d(v,x,w,_,null);Vc(v,w)}return null}function h(v,x,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(x,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mc:return v=v.get(_.key===null?w:_.key)||null,c(x,v,_,j);case ja:return v=v.get(_.key===null?w:_.key)||null,u(x,v,_,j);case As:var N=_._init;return h(v,x,w,N(_._payload),j)}if(il(_)||Lo(_))return v=v.get(w)||null,d(x,v,_,j,null);Vc(x,_)}return null}function p(v,x,w,_){for(var j=null,N=null,S=x,E=x=0,O=null;S!==null&&E<w.length;E++){S.index>E?(O=S,S=null):O=S.sibling;var T=m(v,S,w[E],_);if(T===null){S===null&&(S=O);break}e&&S&&T.alternate===null&&t(v,S),x=i(T,x,E),N===null?j=T:N.sibling=T,N=T,S=O}if(E===w.length)return r(v,S),We&&yi(v,E),j;if(S===null){for(;E<w.length;E++)S=f(v,w[E],_),S!==null&&(x=i(S,x,E),N===null?j=S:N.sibling=S,N=S);return We&&yi(v,E),j}for(S=n(v,S);E<w.length;E++)O=h(S,v,E,w[E],_),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?E:O.key),x=i(O,x,E),N===null?j=O:N.sibling=O,N=O);return e&&S.forEach(function($){return t(v,$)}),We&&yi(v,E),j}function y(v,x,w,_){var j=Lo(w);if(typeof j!="function")throw Error(X(150));if(w=j.call(w),w==null)throw Error(X(151));for(var N=j=null,S=x,E=x=0,O=null,T=w.next();S!==null&&!T.done;E++,T=w.next()){S.index>E?(O=S,S=null):O=S.sibling;var $=m(v,S,T.value,_);if($===null){S===null&&(S=O);break}e&&S&&$.alternate===null&&t(v,S),x=i($,x,E),N===null?j=$:N.sibling=$,N=$,S=O}if(T.done)return r(v,S),We&&yi(v,E),j;if(S===null){for(;!T.done;E++,T=w.next())T=f(v,T.value,_),T!==null&&(x=i(T,x,E),N===null?j=T:N.sibling=T,N=T);return We&&yi(v,E),j}for(S=n(v,S);!T.done;E++,T=w.next())T=h(S,v,E,T.value,_),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?E:T.key),x=i(T,x,E),N===null?j=T:N.sibling=T,N=T);return e&&S.forEach(function(P){return t(v,P)}),We&&yi(v,E),j}function g(v,x,w,_){if(typeof w=="object"&&w!==null&&w.type===_a&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:e:{for(var j=w.key,N=x;N!==null;){if(N.key===j){if(j=w.type,j===_a){if(N.tag===7){r(v,N.sibling),x=s(N,w.props.children),x.return=v,v=x;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===As&&xv(j)===N.type){r(v,N.sibling),x=s(N,w.props),x.ref=Bo(v,N,w),x.return=v,v=x;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===_a?(x=Ii(w.props.children,v.mode,_,w.key),x.return=v,v=x):(_=ku(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,x,w),_.return=v,v=_)}return o(v);case ja:e:{for(N=w.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(v,x.sibling),x=s(x,w.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=Kh(w,v.mode,_),x.return=v,v=x}return o(v);case As:return N=w._init,g(v,x,N(w._payload),_)}if(il(w))return p(v,x,w,_);if(Lo(w))return y(v,x,w,_);Vc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(v,x.sibling),x=s(x,w),x.return=v,v=x):(r(v,x),x=Wh(w,v.mode,_),x.return=v,v=x),o(v)):r(v,x)}return g}var Ja=T_(!0),O_=T_(!1),Bu=ai(null),Qu=null,Ta=null,o0=null;function l0(){o0=Ta=Qu=null}function c0(e){var t=Bu.current;Ve(Bu),e._currentValue=t}function sp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fa(e,t){Qu=e,o0=Ta=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hr=!0),e.firstContext=null)}function Zr(e){var t=e._currentValue;if(o0!==e)if(e={context:e,memoizedValue:t,next:null},Ta===null){if(Qu===null)throw Error(X(308));Ta=e,Qu.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var ki=null;function u0(e){ki===null?ki=[e]:ki.push(e)}function D_(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,u0(t)):(r.next=s.next,s.next=r),t.interleaved=r,cs(e,n)}function cs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ts=!1;function d0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,we&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,cs(e,r)}return s=n.interleaved,s===null?(t.next=t,u0(n)):(t.next=s.next,s.next=t),n.interleaved=t,cs(e,r)}function bu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yg(e,r)}}function yv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vu(e,t,r,n){var s=e.updateQueue;Ts=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,h=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(m=t,h=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){f=p.call(h,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(h,f,m):p,m==null)break e;f=Ze({},f,m);break e;case 2:Ts=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Bi|=o,e.lanes=o,e.memoizedState=f}}function vv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(X(191,s));s.call(n)}}}var pc={},zn=ai(pc),Rl=ai(pc),ql=ai(pc);function Pi(e){if(e===pc)throw Error(X(174));return e}function f0(e,t){switch(qe(ql,t),qe(Rl,e),qe(zn,pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lm(t,e)}Ve(zn),qe(zn,t)}function Za(){Ve(zn),Ve(Rl),Ve(ql)}function I_(e){Pi(ql.current);var t=Pi(zn.current),r=Lm(t,e.type);t!==r&&(qe(Rl,e),qe(zn,r))}function h0(e){Rl.current===e&&(Ve(zn),Ve(Rl))}var Xe=ai(0);function Wu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function m0(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var wu=gs.ReactCurrentDispatcher,Fh=gs.ReactCurrentBatchConfig,Ui=0,Je=null,gt=null,jt=null,Ku=!1,gl=!1,Fl=0,JT=0;function Ft(){throw Error(X(321))}function p0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Nn(e[r],t[r]))return!1;return!0}function g0(e,t,r,n,s,i){if(Ui=i,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wu.current=e===null||e.memoizedState===null?rO:nO,e=r(n,s),gl){i=0;do{if(gl=!1,Fl=0,25<=i)throw Error(X(301));i+=1,jt=gt=null,t.updateQueue=null,wu.current=sO,e=r(n,s)}while(gl)}if(wu.current=Hu,t=gt!==null&&gt.next!==null,Ui=0,jt=gt=Je=null,Ku=!1,t)throw Error(X(300));return e}function x0(){var e=Fl!==0;return Fl=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Je.memoizedState=jt=e:jt=jt.next=e,jt}function en(){if(gt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=jt===null?Je.memoizedState:jt.next;if(t!==null)jt=t,gt=e;else{if(e===null)throw Error(X(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},jt===null?Je.memoizedState=jt=e:jt=jt.next=e}return jt}function Ul(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=gt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ui&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Je.lanes|=d,Bi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Nn(n,t.memoizedState)||(hr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Je.lanes|=i,Bi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Nn(i,t.memoizedState)||(hr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function $_(){}function z_(e,t){var r=Je,n=en(),s=t(),i=!Nn(n.memoizedState,s);if(i&&(n.memoizedState=s,hr=!0),n=n.queue,y0(q_.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||jt!==null&&jt.memoizedState.tag&1){if(r.flags|=2048,Bl(9,R_.bind(null,r,n,s,t),void 0,null),_t===null)throw Error(X(349));Ui&30||L_(r,t,s)}return s}function L_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function R_(e,t,r,n){t.value=r,t.getSnapshot=n,F_(t)&&U_(e)}function q_(e,t,r){return r(function(){F_(t)&&U_(e)})}function F_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Nn(e,r)}catch{return!0}}function U_(e){var t=cs(e,1);t!==null&&jn(t,e,1,-1)}function bv(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t.queue=e,e=e.dispatch=tO.bind(null,Je,e),[t.memoizedState,e]}function Bl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function B_(){return en().memoizedState}function ju(e,t,r,n){var s=Tn();Je.flags|=e,s.memoizedState=Bl(1|t,r,void 0,n===void 0?null:n)}function Jd(e,t,r,n){var s=en();n=n===void 0?null:n;var i=void 0;if(gt!==null){var o=gt.memoizedState;if(i=o.destroy,n!==null&&p0(n,o.deps)){s.memoizedState=Bl(t,r,i,n);return}}Je.flags|=e,s.memoizedState=Bl(1|t,r,i,n)}function wv(e,t){return ju(8390656,8,e,t)}function y0(e,t){return Jd(2048,8,e,t)}function Q_(e,t){return Jd(4,2,e,t)}function V_(e,t){return Jd(4,4,e,t)}function W_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K_(e,t,r){return r=r!=null?r.concat([e]):null,Jd(4,4,W_.bind(null,t,e),r)}function v0(){}function H_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function G_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Y_(e,t,r){return Ui&21?(Nn(r,t)||(r=t_(),Je.lanes|=r,Bi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hr=!0),e.memoizedState=r)}function ZT(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=Fh.transition;Fh.transition={};try{e(!1),t()}finally{Ae=r,Fh.transition=n}}function X_(){return en().memoizedState}function eO(e,t,r){var n=Xs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},J_(e))Z_(t,r);else if(r=D_(e,t,r,n),r!==null){var s=nr();jn(r,e,n,s),eN(r,t,n)}}function tO(e,t,r){var n=Xs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(J_(e))Z_(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Nn(l,o)){var c=t.interleaved;c===null?(s.next=s,u0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=D_(e,t,s,n),r!==null&&(s=nr(),jn(r,e,n,s),eN(r,t,n))}}function J_(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Z_(e,t){gl=Ku=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yg(e,r)}}var Hu={readContext:Zr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},rO={readContext:Zr,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:Zr,useEffect:wv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ju(4194308,4,W_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ju(4194308,4,e,t)},useInsertionEffect:function(e,t){return ju(4,2,e,t)},useMemo:function(e,t){var r=Tn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Tn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eO.bind(null,Je,e),[n.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:bv,useDebugValue:v0,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=bv(!1),t=e[0];return e=ZT.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Je,s=Tn();if(We){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),_t===null)throw Error(X(349));Ui&30||L_(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,wv(q_.bind(null,n,i,e),[e]),n.flags|=2048,Bl(9,R_.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Tn(),t=_t.identifierPrefix;if(We){var r=ts,n=es;r=(n&~(1<<32-wn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nO={readContext:Zr,useCallback:H_,useContext:Zr,useEffect:y0,useImperativeHandle:K_,useInsertionEffect:Q_,useLayoutEffect:V_,useMemo:G_,useReducer:Uh,useRef:B_,useState:function(){return Uh(Ul)},useDebugValue:v0,useDeferredValue:function(e){var t=en();return Y_(t,gt.memoizedState,e)},useTransition:function(){var e=Uh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:$_,useSyncExternalStore:z_,useId:X_,unstable_isNewReconciler:!1},sO={readContext:Zr,useCallback:H_,useContext:Zr,useEffect:y0,useImperativeHandle:K_,useInsertionEffect:Q_,useLayoutEffect:V_,useMemo:G_,useReducer:Bh,useRef:B_,useState:function(){return Bh(Ul)},useDebugValue:v0,useDeferredValue:function(e){var t=en();return gt===null?t.memoizedState=e:Y_(t,gt.memoizedState,e)},useTransition:function(){var e=Bh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:$_,useSyncExternalStore:z_,useId:X_,unstable_isNewReconciler:!1};function dn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ip(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zd={isMounted:function(e){return(e=e._reactInternals)?na(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Xs(e),i=ss(n,s);i.payload=t,r!=null&&(i.callback=r),t=Gs(e,i,s),t!==null&&(jn(t,e,s,n),bu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Xs(e),i=ss(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Gs(e,i,s),t!==null&&(jn(t,e,s,n),bu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nr(),n=Xs(e),s=ss(r,n);s.tag=2,t!=null&&(s.callback=t),t=Gs(e,s,n),t!==null&&(jn(t,e,n,r),bu(t,e,n))}};function jv(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Il(r,n)||!Il(s,i):!0}function tN(e,t,r){var n=!1,s=ni,i=t.contextType;return typeof i=="object"&&i!==null?i=Zr(i):(s=vr(t)?qi:Gt.current,n=t.contextTypes,i=(n=n!=null)?Ya(e,s):ni),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _v(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Zd.enqueueReplaceState(t,t.state,null)}function ap(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},d0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zr(i):(i=vr(t)?qi:Gt.current,s.context=Ya(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ip(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zd.enqueueReplaceState(s,s.state,null),Vu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var r="",n=t;do r+=OA(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function op(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iO=typeof WeakMap=="function"?WeakMap:Map;function rN(e,t,r){r=ss(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Yu||(Yu=!0,xp=n),op(e,t)},r}function nN(e,t,r){r=ss(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){op(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){op(e,t),typeof n!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Nv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iO;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=vO.bind(null,e,t,r),t.then(e,e))}function Sv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ss(-1,1),t.tag=2,Gs(r,t,1))),r.lanes|=1),e)}var aO=gs.ReactCurrentOwner,hr=!1;function er(e,t,r,n){t.child=e===null?O_(t,null,r,n):Ja(t,e.child,r,n)}function Pv(e,t,r,n,s){r=r.render;var i=t.ref;return Fa(t,s),n=g0(e,t,r,n,i,s),r=x0(),e!==null&&!hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,us(e,t,s)):(We&&r&&s0(t),t.flags|=1,er(e,t,n,s),t.child)}function Ev(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!P0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,sN(e,t,i,n,s)):(e=ku(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Il,r(o,n)&&e.ref===t.ref)return us(e,t,s)}return t.flags|=1,e=Js(i,n),e.ref=t.ref,e.return=t,t.child=e}function sN(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Il(i,n)&&e.ref===t.ref)if(hr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(hr=!0);else return t.lanes=e.lanes,us(e,t,s)}return lp(e,t,r,n,s)}function iN(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Da,Sr),Sr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Da,Sr),Sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,qe(Da,Sr),Sr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,qe(Da,Sr),Sr|=n;return er(e,t,s,r),t.child}function aN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function lp(e,t,r,n,s){var i=vr(r)?qi:Gt.current;return i=Ya(t,i),Fa(t,s),r=g0(e,t,r,n,i,s),n=x0(),e!==null&&!hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,us(e,t,s)):(We&&n&&s0(t),t.flags|=1,er(e,t,r,s),t.child)}function Cv(e,t,r,n,s){if(vr(r)){var i=!0;qu(t)}else i=!1;if(Fa(t,s),t.stateNode===null)_u(e,t),tN(t,r,n),ap(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=vr(r)?qi:Gt.current,u=Ya(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&_v(t,o,n,u),Ts=!1;var m=t.memoizedState;o.state=m,Vu(t,n,o,s),c=t.memoizedState,l!==n||m!==c||yr.current||Ts?(typeof d=="function"&&(ip(t,r,d,n),c=t.memoizedState),(l=Ts||jv(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,M_(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:dn(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zr(c):(c=vr(r)?qi:Gt.current,c=Ya(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&_v(t,o,n,c),Ts=!1,m=t.memoizedState,o.state=m,Vu(t,n,o,s);var p=t.memoizedState;l!==f||m!==p||yr.current||Ts?(typeof h=="function"&&(ip(t,r,h,n),p=t.memoizedState),(u=Ts||jv(t,r,u,n,m,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return cp(e,t,r,n,i,s)}function cp(e,t,r,n,s,i){aN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&mv(t,r,!1),us(e,t,i);n=t.stateNode,aO.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ja(t,e.child,null,i),t.child=Ja(t,null,l,i)):er(e,t,l,i),t.memoizedState=n.state,s&&mv(t,r,!0),t.child}function oN(e){var t=e.stateNode;t.pendingContext?hv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hv(e,t.context,!1),f0(e,t.containerInfo)}function Av(e,t,r,n,s){return Xa(),a0(s),t.flags|=256,er(e,t,r,n),t.child}var up={dehydrated:null,treeContext:null,retryLane:0};function dp(e){return{baseLanes:e,cachePool:null,transitions:null}}function lN(e,t,r){var n=t.pendingProps,s=Xe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),qe(Xe,s&1),e===null)return np(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rf(o,n,0,null),e=Ii(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=dp(r),t.memoizedState=up,e):b0(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return oO(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Js(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Js(l,i):(i=Ii(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?dp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=up,n}return i=e.child,e=i.sibling,n=Js(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function b0(e,t){return t=rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wc(e,t,r,n){return n!==null&&a0(n),Ja(t,e.child,null,r),e=b0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oO(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Qh(Error(X(422))),Wc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=rf({mode:"visible",children:n.children},s,0,null),i=Ii(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ja(t,e.child,null,o),t.child.memoizedState=dp(o),t.memoizedState=up,i);if(!(t.mode&1))return Wc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(X(419)),n=Qh(i,n,void 0),Wc(e,t,o,n)}if(l=(o&e.childLanes)!==0,hr||l){if(n=_t,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(e,s),jn(n,e,s,-1))}return k0(),n=Qh(Error(X(421))),Wc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=bO.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Cr=Hs(s.nextSibling),Ar=t,We=!0,mn=null,e!==null&&(Br[Qr++]=es,Br[Qr++]=ts,Br[Qr++]=Fi,es=e.id,ts=e.overflow,Fi=t),t=b0(t,n.children),t.flags|=4096,t)}function Tv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),sp(e.return,t,r)}function Vh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function cN(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(er(e,t,n.children,r),n=Xe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tv(e,r,t);else if(e.tag===19)Tv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(qe(Xe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Wu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Wu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vh(t,!0,r,null,i);break;case"together":Vh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _u(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function us(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Bi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Js(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Js(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function lO(e,t,r){switch(t.tag){case 3:oN(t),Xa();break;case 5:I_(t);break;case 1:vr(t.type)&&qu(t);break;case 4:f0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;qe(Bu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(qe(Xe,Xe.current&1),t.flags|=128,null):r&t.child.childLanes?lN(e,t,r):(qe(Xe,Xe.current&1),e=us(e,t,r),e!==null?e.sibling:null);qe(Xe,Xe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return cN(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,iN(e,t,r)}return us(e,t,r)}var uN,fp,dN,fN;uN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fp=function(){};dN=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Pi(zn.current);var i=null;switch(r){case"input":s=Mm(e,s),n=Mm(e,n),i=[];break;case"select":s=Ze({},s,{value:void 0}),n=Ze({},n,{value:void 0}),i=[];break;case"textarea":s=zm(e,s),n=zm(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Lu)}Rm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(El.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(El.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};fN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qo(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function cO(e,t,r){var n=t.pendingProps;switch(i0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return vr(t.type)&&Ru(),Ut(t),null;case 3:return n=t.stateNode,Za(),Ve(yr),Ve(Gt),m0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mn!==null&&(bp(mn),mn=null))),fp(e,t),Ut(t),null;case 5:h0(t);var s=Pi(ql.current);if(r=t.type,e!==null&&t.stateNode!=null)dN(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(X(166));return Ut(t),null}if(e=Pi(zn.current),Qc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Dn]=t,n[Ll]=i,e=(t.mode&1)!==0,r){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(s=0;s<ol.length;s++)Ue(ol[s],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":qy(n,i),Ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",n);break;case"textarea":Uy(n,i),Ue("invalid",n)}Rm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",""+l]):El.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ue("scroll",n)}switch(r){case"input":Ic(n),Fy(n,i,!0);break;case"textarea":Ic(n),By(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Lu)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=q1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Dn]=t,e[Ll]=n,uN(e,t,!1,!1),t.stateNode=e;e:{switch(o=qm(r,n),r){case"dialog":Ue("cancel",e),Ue("close",e),s=n;break;case"iframe":case"object":case"embed":Ue("load",e),s=n;break;case"video":case"audio":for(s=0;s<ol.length;s++)Ue(ol[s],e);s=n;break;case"source":Ue("error",e),s=n;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),s=n;break;case"details":Ue("toggle",e),s=n;break;case"input":qy(e,n),s=Mm(e,n),Ue("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ze({},n,{value:void 0}),Ue("invalid",e);break;case"textarea":Uy(e,n),s=zm(e,n),Ue("invalid",e);break;default:s=n}Rm(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?B1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cl(e,c):typeof c=="number"&&Cl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(El.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ue("scroll",e):c!=null&&Qg(e,i,c,o))}switch(r){case"input":Ic(e),Fy(e,n,!1);break;case"textarea":Ic(e),By(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ri(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?za(e,!!n.multiple,i,!1):n.defaultValue!=null&&za(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Lu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)fN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(X(166));if(r=Pi(ql.current),Pi(zn.current),Qc(t)){if(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,(i=n.nodeValue!==r)&&(e=Ar,e!==null))switch(e.tag){case 3:Bc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dn]=t,t.stateNode=n}return Ut(t),null;case 13:if(Ve(Xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Cr!==null&&t.mode&1&&!(t.flags&128))A_(),Xa(),t.flags|=98560,i=!1;else if(i=Qc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Dn]=t}else Xa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),i=!1}else mn!==null&&(bp(mn),mn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?xt===0&&(xt=3):k0())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return Za(),fp(e,t),e===null&&$l(t.stateNode.containerInfo),Ut(t),null;case 10:return c0(t.type._context),Ut(t),null;case 17:return vr(t.type)&&Ru(),Ut(t),null;case 19:if(Ve(Xe),i=t.memoizedState,i===null)return Ut(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Qo(i,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wu(e),o!==null){for(t.flags|=128,Qo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(Xe,Xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&nt()>to&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Ut(t),null}else 2*nt()-i.renderingStartTime>to&&r!==1073741824&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nt(),t.sibling=null,r=Xe.current,qe(Xe,n?r&1|2:r&1),t):(Ut(t),null);case 22:case 23:return S0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Sr&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function uO(e,t){switch(i0(t),t.tag){case 1:return vr(t.type)&&Ru(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Za(),Ve(yr),Ve(Gt),m0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return h0(t),null;case 13:if(Ve(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Xe),null;case 4:return Za(),null;case 10:return c0(t.type._context),null;case 22:case 23:return S0(),null;case 24:return null;default:return null}}var Kc=!1,Vt=!1,dO=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Oa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tt(e,t,n)}else r.current=null}function hp(e,t,r){try{r()}catch(n){tt(e,t,n)}}var Ov=!1;function fO(e,t){if(Ym=Iu,e=x_(),n0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xm={focusedElem:e,selectionRange:r},Iu=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,g=p.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:dn(t.type,y),g);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(_){tt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return p=Ov,Ov=!1,p}function xl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&hp(t,r,i)}s=s.next}while(s!==n)}}function ef(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function mp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hN(e){var t=e.alternate;t!==null&&(e.alternate=null,hN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dn],delete t[Ll],delete t[ep],delete t[HT],delete t[GT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mN(e){return e.tag===5||e.tag===3||e.tag===4}function Dv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lu));else if(n!==4&&(e=e.child,e!==null))for(pp(e,t,r),e=e.sibling;e!==null;)pp(e,t,r),e=e.sibling}function gp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(gp(e,t,r),e=e.sibling;e!==null;)gp(e,t,r),e=e.sibling}var Tt=null,fn=!1;function ks(e,t,r){for(r=r.child;r!==null;)pN(e,t,r),r=r.sibling}function pN(e,t,r){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Wd,r)}catch{}switch(r.tag){case 5:Vt||Oa(r,t);case 6:var n=Tt,s=fn;Tt=null,ks(e,t,r),Tt=n,fn=s,Tt!==null&&(fn?(e=Tt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Tt.removeChild(r.stateNode));break;case 18:Tt!==null&&(fn?(e=Tt,r=r.stateNode,e.nodeType===8?Lh(e.parentNode,r):e.nodeType===1&&Lh(e,r),Dl(e)):Lh(Tt,r.stateNode));break;case 4:n=Tt,s=fn,Tt=r.stateNode.containerInfo,fn=!0,ks(e,t,r),Tt=n,fn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hp(r,t,o),s=s.next}while(s!==n)}ks(e,t,r);break;case 1:if(!Vt&&(Oa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tt(r,t,l)}ks(e,t,r);break;case 21:ks(e,t,r);break;case 22:r.mode&1?(Vt=(n=Vt)||r.memoizedState!==null,ks(e,t,r),Vt=n):ks(e,t,r);break;default:ks(e,t,r)}}function Mv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dO),t.forEach(function(n){var s=wO.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,fn=!1;break e;case 3:Tt=l.stateNode.containerInfo,fn=!0;break e;case 4:Tt=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(Tt===null)throw Error(X(160));pN(i,o,s),Tt=null,fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gN(t,e),t=t.sibling}function gN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cn(t,e),An(e),n&4){try{xl(3,e,e.return),ef(3,e)}catch(y){tt(e,e.return,y)}try{xl(5,e,e.return)}catch(y){tt(e,e.return,y)}}break;case 1:cn(t,e),An(e),n&512&&r!==null&&Oa(r,r.return);break;case 5:if(cn(t,e),An(e),n&512&&r!==null&&Oa(r,r.return),e.flags&32){var s=e.stateNode;try{Cl(s,"")}catch(y){tt(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&L1(s,i),qm(l,o);var u=qm(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?B1(s,f):d==="dangerouslySetInnerHTML"?F1(s,f):d==="children"?Cl(s,f):Qg(s,d,f,u)}switch(l){case"input":Im(s,i);break;case"textarea":R1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?za(s,!!i.multiple,h,!1):m!==!!i.multiple&&(i.defaultValue!=null?za(s,!!i.multiple,i.defaultValue,!0):za(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ll]=i}catch(y){tt(e,e.return,y)}}break;case 6:if(cn(t,e),An(e),n&4){if(e.stateNode===null)throw Error(X(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){tt(e,e.return,y)}}break;case 3:if(cn(t,e),An(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dl(t.containerInfo)}catch(y){tt(e,e.return,y)}break;case 4:cn(t,e),An(e);break;case 13:cn(t,e),An(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_0=nt())),n&4&&Mv(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Vt=(u=Vt)||d,cn(t,e),Vt=u):cn(t,e),An(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ie=e,d=e.child;d!==null;){for(f=ie=d;ie!==null;){switch(m=ie,h=m.child,m.tag){case 0:case 11:case 14:case 15:xl(4,m,m.return);break;case 1:Oa(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){tt(n,r,y)}}break;case 5:Oa(m,m.return);break;case 22:if(m.memoizedState!==null){$v(f);continue}}h!==null?(h.return=m,ie=h):$v(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=U1("display",o))}catch(y){tt(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){tt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(t,e),An(e),n&4&&Mv(e);break;case 21:break;default:cn(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mN(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Cl(s,""),n.flags&=-33);var i=Dv(e);gp(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Dv(e);pp(e,l,o);break;default:throw Error(X(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hO(e,t,r){ie=e,xN(e)}function xN(e,t,r){for(var n=(e.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Kc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Vt;l=Kc;var u=Vt;if(Kc=o,(Vt=c)&&!u)for(ie=s;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?zv(s):c!==null?(c.return=o,ie=c):zv(s);for(;i!==null;)ie=i,xN(i),i=i.sibling;ie=s,Kc=l,Vt=u}Iv(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Iv(e)}}function Iv(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vt||ef(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Vt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:dn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vv(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Vt||t.flags&512&&mp(t)}catch(m){tt(t,t.return,m)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function $v(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function zv(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ef(4,t)}catch(c){tt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){tt(t,s,c)}}var i=t.return;try{mp(t)}catch(c){tt(t,i,c)}break;case 5:var o=t.return;try{mp(t)}catch(c){tt(t,o,c)}}}catch(c){tt(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var mO=Math.ceil,Gu=gs.ReactCurrentDispatcher,w0=gs.ReactCurrentOwner,Gr=gs.ReactCurrentBatchConfig,we=0,_t=null,dt=null,zt=0,Sr=0,Da=ai(0),xt=0,Ql=null,Bi=0,tf=0,j0=0,yl=null,dr=null,_0=0,to=1/0,Kn=null,Yu=!1,xp=null,Ys=null,Hc=!1,Fs=null,Xu=0,vl=0,yp=null,Nu=-1,Su=0;function nr(){return we&6?nt():Nu!==-1?Nu:Nu=nt()}function Xs(e){return e.mode&1?we&2&&zt!==0?zt&-zt:XT.transition!==null?(Su===0&&(Su=t_()),Su):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:l_(e.type)),e):1}function jn(e,t,r,n){if(50<vl)throw vl=0,yp=null,Error(X(185));fc(e,r,n),(!(we&2)||e!==_t)&&(e===_t&&(!(we&2)&&(tf|=r),xt===4&&Is(e,zt)),br(e,n),r===1&&we===0&&!(t.mode&1)&&(to=nt()+500,Xd&&oi()))}function br(e,t){var r=e.callbackNode;XA(e,t);var n=Mu(e,e===_t?zt:0);if(n===0)r!==null&&Wy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Wy(r),t===1)e.tag===0?YT(Lv.bind(null,e)):P_(Lv.bind(null,e)),WT(function(){!(we&6)&&oi()}),r=null;else{switch(r_(n)){case 1:r=Gg;break;case 4:r=Z1;break;case 16:r=Du;break;case 536870912:r=e_;break;default:r=Du}r=SN(r,yN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function yN(e,t){if(Nu=-1,Su=0,we&6)throw Error(X(327));var r=e.callbackNode;if(Ua()&&e.callbackNode!==r)return null;var n=Mu(e,e===_t?zt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ju(e,n);else{t=n;var s=we;we|=2;var i=bN();(_t!==e||zt!==t)&&(Kn=null,to=nt()+500,Mi(e,t));do try{xO();break}catch(l){vN(e,l)}while(!0);l0(),Gu.current=i,we=s,dt!==null?t=0:(_t=null,zt=0,t=xt)}if(t!==0){if(t===2&&(s=Vm(e),s!==0&&(n=s,t=vp(e,s))),t===1)throw r=Ql,Mi(e,0),Is(e,n),br(e,nt()),r;if(t===6)Is(e,n);else{if(s=e.current.alternate,!(n&30)&&!pO(s)&&(t=Ju(e,n),t===2&&(i=Vm(e),i!==0&&(n=i,t=vp(e,i))),t===1))throw r=Ql,Mi(e,0),Is(e,n),br(e,nt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(X(345));case 2:vi(e,dr,Kn);break;case 3:if(Is(e,n),(n&130023424)===n&&(t=_0+500-nt(),10<t)){if(Mu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){nr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Zm(vi.bind(null,e,dr,Kn),t);break}vi(e,dr,Kn);break;case 4:if(Is(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-wn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=nt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mO(n/1960))-n,10<n){e.timeoutHandle=Zm(vi.bind(null,e,dr,Kn),n);break}vi(e,dr,Kn);break;case 5:vi(e,dr,Kn);break;default:throw Error(X(329))}}}return br(e,nt()),e.callbackNode===r?yN.bind(null,e):null}function vp(e,t){var r=yl;return e.current.memoizedState.isDehydrated&&(Mi(e,t).flags|=256),e=Ju(e,t),e!==2&&(t=dr,dr=r,t!==null&&bp(t)),e}function bp(e){dr===null?dr=e:dr.push.apply(dr,e)}function pO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Is(e,t){for(t&=~j0,t&=~tf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wn(t),n=1<<r;e[r]=-1,t&=~n}}function Lv(e){if(we&6)throw Error(X(327));Ua();var t=Mu(e,0);if(!(t&1))return br(e,nt()),null;var r=Ju(e,t);if(e.tag!==0&&r===2){var n=Vm(e);n!==0&&(t=n,r=vp(e,n))}if(r===1)throw r=Ql,Mi(e,0),Is(e,t),br(e,nt()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vi(e,dr,Kn),br(e,nt()),null}function N0(e,t){var r=we;we|=1;try{return e(t)}finally{we=r,we===0&&(to=nt()+500,Xd&&oi())}}function Qi(e){Fs!==null&&Fs.tag===0&&!(we&6)&&Ua();var t=we;we|=1;var r=Gr.transition,n=Ae;try{if(Gr.transition=null,Ae=1,e)return e()}finally{Ae=n,Gr.transition=r,we=t,!(we&6)&&oi()}}function S0(){Sr=Da.current,Ve(Da)}function Mi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,VT(r)),dt!==null)for(r=dt.return;r!==null;){var n=r;switch(i0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ru();break;case 3:Za(),Ve(yr),Ve(Gt),m0();break;case 5:h0(n);break;case 4:Za();break;case 13:Ve(Xe);break;case 19:Ve(Xe);break;case 10:c0(n.type._context);break;case 22:case 23:S0()}r=r.return}if(_t=e,dt=e=Js(e.current,null),zt=Sr=t,xt=0,Ql=null,j0=tf=Bi=0,dr=yl=null,ki!==null){for(t=0;t<ki.length;t++)if(r=ki[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ki=null}return e}function vN(e,t){do{var r=dt;try{if(l0(),wu.current=Hu,Ku){for(var n=Je.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ku=!1}if(Ui=0,jt=gt=Je=null,gl=!1,Fl=0,w0.current=null,r===null||r.return===null){xt=1,Ql=t,dt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Sv(o);if(h!==null){h.flags&=-257,kv(h,o,l,i,t),h.mode&1&&Nv(i,u,t),t=h,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){Nv(i,u,t),k0();break e}c=Error(X(426))}}else if(We&&l.mode&1){var g=Sv(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),kv(g,o,l,i,t),a0(eo(c,l));break e}}i=c=eo(c,l),xt!==4&&(xt=2),yl===null?yl=[i]:yl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=rN(i,c,t);yv(i,v);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ys===null||!Ys.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=nN(i,l,t);yv(i,_);break e}}i=i.return}while(i!==null)}jN(r)}catch(j){t=j,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function bN(){var e=Gu.current;return Gu.current=Hu,e===null?Hu:e}function k0(){(xt===0||xt===3||xt===2)&&(xt=4),_t===null||!(Bi&268435455)&&!(tf&268435455)||Is(_t,zt)}function Ju(e,t){var r=we;we|=2;var n=bN();(_t!==e||zt!==t)&&(Kn=null,Mi(e,t));do try{gO();break}catch(s){vN(e,s)}while(!0);if(l0(),we=r,Gu.current=n,dt!==null)throw Error(X(261));return _t=null,zt=0,xt}function gO(){for(;dt!==null;)wN(dt)}function xO(){for(;dt!==null&&!UA();)wN(dt)}function wN(e){var t=NN(e.alternate,e,Sr);e.memoizedProps=e.pendingProps,t===null?jN(e):dt=t,w0.current=null}function jN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uO(r,t),r!==null){r.flags&=32767,dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,dt=null;return}}else if(r=cO(r,t,Sr),r!==null){dt=r;return}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);xt===0&&(xt=5)}function vi(e,t,r){var n=Ae,s=Gr.transition;try{Gr.transition=null,Ae=1,yO(e,t,r,n)}finally{Gr.transition=s,Ae=n}return null}function yO(e,t,r,n){do Ua();while(Fs!==null);if(we&6)throw Error(X(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(JA(e,i),e===_t&&(dt=_t=null,zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hc||(Hc=!0,SN(Du,function(){return Ua(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Gr.transition,Gr.transition=null;var o=Ae;Ae=1;var l=we;we|=4,w0.current=null,fO(e,r),gN(r,e),LT(Xm),Iu=!!Ym,Xm=Ym=null,e.current=r,hO(r),BA(),we=l,Ae=o,Gr.transition=i}else e.current=r;if(Hc&&(Hc=!1,Fs=e,Xu=s),i=e.pendingLanes,i===0&&(Ys=null),WA(r.stateNode),br(e,nt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yu)throw Yu=!1,e=xp,xp=null,e;return Xu&1&&e.tag!==0&&Ua(),i=e.pendingLanes,i&1?e===yp?vl++:(vl=0,yp=e):vl=0,oi(),null}function Ua(){if(Fs!==null){var e=r_(Xu),t=Gr.transition,r=Ae;try{if(Gr.transition=null,Ae=16>e?16:e,Fs===null)var n=!1;else{if(e=Fs,Fs=null,Xu=0,we&6)throw Error(X(331));var s=we;for(we|=4,ie=e.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ie=u;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:xl(8,d,i)}var f=d.child;if(f!==null)f.return=d,ie=f;else for(;ie!==null;){d=ie;var m=d.sibling,h=d.return;if(hN(d),d===u){ie=null;break}if(m!==null){m.return=h,ie=m;break}ie=h}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ie=v;break e}ie=i.return}}var x=e.current;for(ie=x;ie!==null;){o=ie;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ie=w;else e:for(o=x;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ef(9,l)}}catch(j){tt(l,l.return,j)}if(l===o){ie=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ie=_;break e}ie=l.return}}if(we=s,oi(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Wd,e)}catch{}n=!0}return n}finally{Ae=r,Gr.transition=t}}return!1}function Rv(e,t,r){t=eo(r,t),t=rN(e,t,1),e=Gs(e,t,1),t=nr(),e!==null&&(fc(e,1,t),br(e,t))}function tt(e,t,r){if(e.tag===3)Rv(e,e,r);else for(;t!==null;){if(t.tag===3){Rv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ys===null||!Ys.has(n))){e=eo(r,e),e=nN(t,e,1),t=Gs(t,e,1),e=nr(),t!==null&&(fc(t,1,e),br(t,e));break}}t=t.return}}function vO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&r,_t===e&&(zt&r)===r&&(xt===4||xt===3&&(zt&130023424)===zt&&500>nt()-_0?Mi(e,0):j0|=r),br(e,t)}function _N(e,t){t===0&&(e.mode&1?(t=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):t=1);var r=nr();e=cs(e,t),e!==null&&(fc(e,t,r),br(e,r))}function bO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),_N(e,r)}function wO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(t),_N(e,r)}var NN;NN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)hr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return hr=!1,lO(e,t,r);hr=!!(e.flags&131072)}else hr=!1,We&&t.flags&1048576&&E_(t,Uu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;_u(e,t),e=t.pendingProps;var s=Ya(t,Gt.current);Fa(t,r),s=g0(null,t,n,e,s,r);var i=x0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)?(i=!0,qu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,d0(t),s.updater=Zd,t.stateNode=s,s._reactInternals=t,ap(t,n,e,r),t=cp(null,t,n,!0,i,r)):(t.tag=0,We&&i&&s0(t),er(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(_u(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=_O(n),e=dn(n,e),s){case 0:t=lp(null,t,n,e,r);break e;case 1:t=Cv(null,t,n,e,r);break e;case 11:t=Pv(null,t,n,e,r);break e;case 14:t=Ev(null,t,n,dn(n.type,e),r);break e}throw Error(X(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),lp(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),Cv(e,t,n,s,r);case 3:e:{if(oN(t),e===null)throw Error(X(387));n=t.pendingProps,i=t.memoizedState,s=i.element,M_(e,t),Vu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=eo(Error(X(423)),t),t=Av(e,t,n,r,s);break e}else if(n!==s){s=eo(Error(X(424)),t),t=Av(e,t,n,r,s);break e}else for(Cr=Hs(t.stateNode.containerInfo.firstChild),Ar=t,We=!0,mn=null,r=O_(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xa(),n===s){t=us(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return I_(t),e===null&&np(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Jm(n,s)?o=null:i!==null&&Jm(n,i)&&(t.flags|=32),aN(e,t),er(e,t,o,r),t.child;case 6:return e===null&&np(t),null;case 13:return lN(e,t,r);case 4:return f0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ja(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),Pv(e,t,n,s,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,qe(Bu,n._currentValue),n._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!yr.current){t=us(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ss(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),sp(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),sp(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Fa(t,r),s=Zr(s),n=n(s),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,s=dn(n,t.pendingProps),s=dn(n.type,s),Ev(e,t,n,s,r);case 15:return sN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),_u(e,t),t.tag=1,vr(n)?(e=!0,qu(t)):e=!1,Fa(t,r),tN(t,n,s),ap(t,n,s,r),cp(null,t,n,!0,e,r);case 19:return cN(e,t,r);case 22:return iN(e,t,r)}throw Error(X(156,t.tag))};function SN(e,t){return J1(e,t)}function jO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,r,n){return new jO(e,t,r,n)}function P0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _O(e){if(typeof e=="function")return P0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wg)return 11;if(e===Kg)return 14}return 2}function Js(e,t){var r=e.alternate;return r===null?(r=Kr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ku(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")P0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _a:return Ii(r.children,s,i,t);case Vg:o=8,s|=8;break;case Am:return e=Kr(12,r,t,s|2),e.elementType=Am,e.lanes=i,e;case Tm:return e=Kr(13,r,t,s),e.elementType=Tm,e.lanes=i,e;case Om:return e=Kr(19,r,t,s),e.elementType=Om,e.lanes=i,e;case I1:return rf(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D1:o=10;break e;case M1:o=9;break e;case Wg:o=11;break e;case Kg:o=14;break e;case As:o=16,n=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Kr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ii(e,t,r,n){return e=Kr(7,e,n,t),e.lanes=r,e}function rf(e,t,r,n){return e=Kr(22,e,n,t),e.elementType=I1,e.lanes=r,e.stateNode={isHidden:!1},e}function Wh(e,t,r){return e=Kr(6,e,null,t),e.lanes=r,e}function Kh(e,t,r){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ph(0),this.expirationTimes=Ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ph(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function E0(e,t,r,n,s,i,o,l,c){return e=new NO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(i),e}function SO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function kN(e){if(!e)return ni;e=e._reactInternals;e:{if(na(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(vr(r))return k_(e,r,t)}return t}function PN(e,t,r,n,s,i,o,l,c){return e=E0(r,n,!0,e,s,i,o,l,c),e.context=kN(null),r=e.current,n=nr(),s=Xs(r),i=ss(n,s),i.callback=t??null,Gs(r,i,s),e.current.lanes=s,fc(e,s,n),br(e,n),e}function nf(e,t,r,n){var s=t.current,i=nr(),o=Xs(s);return r=kN(r),t.context===null?t.context=r:t.pendingContext=r,t=ss(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Gs(s,t,o),e!==null&&(jn(e,s,o,i),bu(e,s,o)),o}function Zu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function C0(e,t){qv(e,t),(e=e.alternate)&&qv(e,t)}function kO(){return null}var EN=typeof reportError=="function"?reportError:function(e){console.error(e)};function A0(e){this._internalRoot=e}sf.prototype.render=A0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));nf(e,t,null,null)};sf.prototype.unmount=A0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qi(function(){nf(null,e,null,null)}),t[ls]=null}};function sf(e){this._internalRoot=e}sf.prototype.unstable_scheduleHydration=function(e){if(e){var t=i_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ms.length&&t!==0&&t<Ms[r].priority;r++);Ms.splice(r,0,e),r===0&&o_(e)}};function T0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function af(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fv(){}function PO(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Zu(o);i.call(u)}}var o=PN(t,n,e,0,null,!1,!1,"",Fv);return e._reactRootContainer=o,e[ls]=o.current,$l(e.nodeType===8?e.parentNode:e),Qi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Zu(c);l.call(u)}}var c=E0(e,0,!1,null,null,!1,!1,"",Fv);return e._reactRootContainer=c,e[ls]=c.current,$l(e.nodeType===8?e.parentNode:e),Qi(function(){nf(t,c,r,n)}),c}function of(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Zu(o);l.call(c)}}nf(t,o,e,s)}else o=PO(r,t,e,s,n);return Zu(o)}n_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=al(t.pendingLanes);r!==0&&(Yg(t,r|1),br(t,nt()),!(we&6)&&(to=nt()+500,oi()))}break;case 13:Qi(function(){var n=cs(e,1);if(n!==null){var s=nr();jn(n,e,1,s)}}),C0(e,1)}};Xg=function(e){if(e.tag===13){var t=cs(e,134217728);if(t!==null){var r=nr();jn(t,e,134217728,r)}C0(e,134217728)}};s_=function(e){if(e.tag===13){var t=Xs(e),r=cs(e,t);if(r!==null){var n=nr();jn(r,e,t,n)}C0(e,t)}};i_=function(){return Ae};a_=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};Um=function(e,t,r){switch(t){case"input":if(Im(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Yd(n);if(!s)throw Error(X(90));z1(n),Im(n,s)}}}break;case"textarea":R1(e,r);break;case"select":t=r.value,t!=null&&za(e,!!r.multiple,t,!1)}};W1=N0;K1=Qi;var EO={usingClientEntryPoint:!1,Events:[mc,Pa,Yd,Q1,V1,N0]},Vo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CO={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y1(e),e===null?null:e.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||kO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Wd=Gc.inject(CO),$n=Gc}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EO;Lr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T0(t))throw Error(X(200));return SO(e,t,null,r)};Lr.createRoot=function(e,t){if(!T0(e))throw Error(X(299));var r=!1,n="",s=EN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=E0(e,1,!1,null,null,r,!1,n,s),e[ls]=t.current,$l(e.nodeType===8?e.parentNode:e),new A0(t)};Lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Y1(t),e=e===null?null:e.stateNode,e};Lr.flushSync=function(e){return Qi(e)};Lr.hydrate=function(e,t,r){if(!af(t))throw Error(X(200));return of(null,e,t,!0,r)};Lr.hydrateRoot=function(e,t,r){if(!T0(e))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=EN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=PN(t,null,e,1,r??null,s,!1,i,o),e[ls]=t.current,$l(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sf(t)};Lr.render=function(e,t,r){if(!af(t))throw Error(X(200));return of(null,e,t,!1,r)};Lr.unmountComponentAtNode=function(e){if(!af(e))throw Error(X(40));return e._reactRootContainer?(Qi(function(){of(null,null,e,!1,function(){e._reactRootContainer=null,e[ls]=null})}),!0):!1};Lr.unstable_batchedUpdates=N0;Lr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!af(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return of(e,t,r,!1,n)};Lr.version="18.3.1-next-f1338f8080-20240426";function CN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CN)}catch(e){console.error(e)}}CN(),C1.exports=Lr;var AN=C1.exports,TN,Uv=AN;TN=Uv.createRoot,Uv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(this,arguments)}var Us;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Us||(Us={}));const Bv="popstate";function AO(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return wp("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ed(s)}return OO(t,r,null,e)}function st(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ON(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TO(){return Math.random().toString(36).substr(2,8)}function Qv(e,t){return{usr:e.state,key:e.key,idx:t}}function wp(e,t,r,n){return r===void 0&&(r=null),Vl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jo(t):t,{state:r,key:t&&t.key||n||TO()})}function ed(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function OO(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Us.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Vl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Us.Pop;let g=d(),v=g==null?null:g-u;u=g,c&&c({action:l,location:y.location,delta:v})}function m(g,v){l=Us.Push;let x=wp(y.location,g,v);u=d()+1;let w=Qv(x,u),_=y.createHref(x);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:y.location,delta:1})}function h(g,v){l=Us.Replace;let x=wp(y.location,g,v);u=d();let w=Qv(x,u),_=y.createHref(x);o.replaceState(w,"",_),i&&c&&c({action:l,location:y.location,delta:0})}function p(g){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof g=="string"?g:ed(g);return x=x.replace(/ $/,"%20"),st(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return l},get location(){return e(s,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Bv,f),c=g,()=>{s.removeEventListener(Bv,f),c=null}},createHref(g){return t(s,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:h,go(g){return o.go(g)}};return y}var Vv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vv||(Vv={}));function DO(e,t,r){return r===void 0&&(r="/"),MO(e,t,r,!1)}function MO(e,t,r,n){let s=typeof t=="string"?jo(t):t,i=O0(s.pathname||"/",r);if(i==null)return null;let o=DN(e);IO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=WO(i);l=QO(o[c],u,n)}return l}function DN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(st(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Zs([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(st(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:UO(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of MN(i.path))s(i,o,c)}),t}function MN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=MN(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function IO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:BO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $O=/^:[\w-]+$/,zO=3,LO=2,RO=1,qO=10,FO=-2,Wv=e=>e==="*";function UO(e,t){let r=e.split("/"),n=r.length;return r.some(Wv)&&(n+=FO),t&&(n+=LO),r.filter(s=>!Wv(s)).reduce((s,i)=>s+($O.test(i)?zO:i===""?RO:qO),n)}function BO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function QO(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Kv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Kv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Zs([i,f.pathname]),pathnameBase:YO(Zs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Zs([i,f.pathnameBase]))}return o}function Kv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=VO(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:h}=d;if(m==="*"){let y=l[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?u[m]=void 0:u[m]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function VO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ON(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function WO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ON(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function KO(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?jo(e):e;return{pathname:r?r.startsWith("/")?r:HO(r,t):t,search:XO(n),hash:JO(s)}}function HO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Hh(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function D0(e,t){let r=GO(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function M0(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=jo(e):(s=Vl({},e),st(!s.pathname||!s.pathname.includes("?"),Hh("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),Hh("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),Hh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=KO(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Zs=e=>e.join("/").replace(/\/\/+/g,"/"),YO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ZO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IN=["post","put","patch","delete"];new Set(IN);const e4=["get",...IN];new Set(e4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(this,arguments)}const I0=b.createContext(null),t4=b.createContext(null),li=b.createContext(null),lf=b.createContext(null),xs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),$N=b.createContext(null);function r4(e,t){let{relative:r}=t===void 0?{}:t;_o()||st(!1);let{basename:n,navigator:s}=b.useContext(li),{hash:i,pathname:o,search:l}=RN(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Zs([n,o])),s.createHref({pathname:c,search:l,hash:i})}function _o(){return b.useContext(lf)!=null}function ys(){return _o()||st(!1),b.useContext(lf).location}function zN(e){b.useContext(li).static||b.useLayoutEffect(e)}function St(){let{isDataRoute:e}=b.useContext(xs);return e?p4():n4()}function n4(){_o()||st(!1);let e=b.useContext(I0),{basename:t,future:r,navigator:n}=b.useContext(li),{matches:s}=b.useContext(xs),{pathname:i}=ys(),o=JSON.stringify(D0(s,r.v7_relativeSplatPath)),l=b.useRef(!1);return zN(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=M0(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Zs([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function LN(){let{matches:e}=b.useContext(xs),t=e[e.length-1];return t?t.params:{}}function RN(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=b.useContext(li),{matches:s}=b.useContext(xs),{pathname:i}=ys(),o=JSON.stringify(D0(s,n.v7_relativeSplatPath));return b.useMemo(()=>M0(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function s4(e,t){return i4(e,t)}function i4(e,t,r,n){_o()||st(!1);let{navigator:s}=b.useContext(li),{matches:i}=b.useContext(xs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ys(),d;if(t){var f;let g=typeof t=="string"?jo(t):t;c==="/"||(f=g.pathname)!=null&&f.startsWith(c)||st(!1),d=g}else d=u;let m=d.pathname||"/",h=m;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=DO(e,{pathname:h}),y=u4(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Zs([c,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Zs([c,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,n);return t&&y?b.createElement(lf.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Us.Pop}},y):y}function a4(){let e=m4(),t=ZO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:s},r):null,null)}const o4=b.createElement(a4,null);class l4 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(xs.Provider,{value:this.props.routeContext},b.createElement($N.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c4(e){let{routeContext:t,match:r,children:n}=e,s=b.useContext(I0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(xs.Provider,{value:t},n)}function u4(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||st(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:h}=r,p=f.route.loader&&m[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let h,p=!1,y=null,g=null;r&&(h=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||o4,c&&(u<0&&m===0?(p=!0,g=null):u===m&&(p=!0,g=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),x=()=>{let w;return h?w=y:p?w=g:f.route.Component?w=b.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,b.createElement(c4,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(l4,{location:r.location,revalidation:r.revalidation,component:y,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var qN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qN||{}),td=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(td||{});function d4(e){let t=b.useContext(I0);return t||st(!1),t}function f4(e){let t=b.useContext(t4);return t||st(!1),t}function h4(e){let t=b.useContext(xs);return t||st(!1),t}function FN(e){let t=h4(),r=t.matches[t.matches.length-1];return r.route.id||st(!1),r.route.id}function m4(){var e;let t=b.useContext($N),r=f4(td.UseRouteError),n=FN(td.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function p4(){let{router:e}=d4(qN.UseNavigateStable),t=FN(td.UseNavigateStable),r=b.useRef(!1);return zN(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Wl({fromRouteId:t},i)))},[e,t])}function g4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yn(e){let{to:t,replace:r,state:n,relative:s}=e;_o()||st(!1);let{future:i,static:o}=b.useContext(li),{matches:l}=b.useContext(xs),{pathname:c}=ys(),u=St(),d=M0(t,D0(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Se(e){st(!1)}function x4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Us.Pop,navigator:i,static:o=!1,future:l}=e;_o()&&st(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Wl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=jo(n));let{pathname:d="/",search:f="",hash:m="",state:h=null,key:p="default"}=n,y=b.useMemo(()=>{let g=O0(d,c);return g==null?null:{location:{pathname:g,search:f,hash:m,state:h,key:p},navigationType:s}},[c,d,f,m,h,p,s]);return y==null?null:b.createElement(li.Provider,{value:u},b.createElement(lf.Provider,{children:r,value:y}))}function y4(e){let{children:t,location:r}=e;return s4(jp(t),r)}new Promise(()=>{});function jp(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let i=[...t,s];if(n.type===b.Fragment){r.push.apply(r,jp(n.props.children,i));return}n.type!==Se&&st(!1),!n.props.index||!n.props.children||st(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_p.apply(this,arguments)}function v4(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function b4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function w4(e,t){return e.button===0&&(!t||t==="_self")&&!b4(e)}function Np(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function j4(e,t){let r=Np(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const _4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],N4="6";try{window.__reactRouterVersion=N4}catch{}const S4="startTransition",Hv=vA[S4];function k4(e){let{basename:t,children:r,future:n,window:s}=e,i=b.useRef();i.current==null&&(i.current=AO({window:s,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=b.useCallback(f=>{u&&Hv?Hv(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>g4(n),[n]),b.createElement(x4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const P4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bs=b.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=v4(t,_4),{basename:h}=b.useContext(li),p,y=!1;if(typeof u=="string"&&E4.test(u)&&(p=u,P4))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=O0(_.pathname,h);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:y=!0}catch{}let g=r4(u,{relative:s}),v=C4(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function x(w){n&&n(w),w.defaultPrevented||v(w)}return b.createElement("a",_p({},m,{href:p||g,onClick:y||i?n:x,ref:r,target:c}))});var Gv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gv||(Gv={}));var Yv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yv||(Yv={}));function C4(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=St(),u=ys(),d=RN(e,{relative:o});return b.useCallback(f=>{if(w4(f,r)){f.preventDefault();let m=n!==void 0?n:ed(u)===ed(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function UN(e){let t=b.useRef(Np(e)),r=b.useRef(!1),n=ys(),s=b.useMemo(()=>j4(n.search,r.current?null:t.current),[n.search]),i=St(),o=b.useCallback((l,c)=>{const u=Np(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}function A4(e){return e?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?e.includes("..")||e.startsWith(".")||e.endsWith(".")?{isValid:!1,error:"Invalid email format"}:e.length>254?{isValid:!1,error:"Email too long"}:{isValid:!0}:{isValid:!1,error:"Invalid email format"}:{isValid:!1,error:"Email is required"}}function BN(e){if(!e)return{isValid:!1,error:"Password is required",strength:0};let t=0;const r={length:e.length>=12,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),numbers:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return Object.values(r).forEach(n=>{n&&(t+=20)}),r.length?r.lowercase?r.uppercase?r.numbers?r.special?{isValid:!0,strength:t}:{isValid:!1,error:'Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)',strength:t}:{isValid:!1,error:"Password must contain at least one number",strength:t}:{isValid:!1,error:"Password must contain at least one uppercase letter",strength:t}:{isValid:!1,error:"Password must contain at least one lowercase letter",strength:t}:{isValid:!1,error:"Password must be at least 12 characters",strength:t}}function Kl(e){if(!e)return e;const t=["password","token","email","phone","ssn","credit_card"];if(typeof e=="string")return e.includes("@")&&e.includes(".")?"[EMAIL_REDACTED]":e.length>20&&/^[A-Za-z0-9+/=]+$/.test(e)?"[TOKEN_REDACTED]":e;if(Array.isArray(e))return e.map(r=>Kl(r));if(typeof e=="object"&&e!==null){const r={};for(const[n,s]of Object.entries(e)){const i=n.toLowerCase();t.some(o=>i.includes(o))?r[n]="[REDACTED]":typeof s=="object"?r[n]=Kl(s):r[n]=s}return r}return e}class T4{constructor(){this.attempts=new Map}isAllowed(t,r=5,n=6e4){const s=Date.now(),o=(this.attempts.get(t)||[]).filter(l=>s-l<n);return o.length>=r?!1:(o.push(s),this.attempts.set(t,o),!0)}reset(t){this.attempts.delete(t)}}const Xv=new T4;function O4(e){return(...t)=>{if(!e)return;const r=t.map(n=>Kl(n));console.log(...r)}}class Qs{static getInstance(){return Qs.instance||(Qs.instance=new Qs),Qs.instance}logSecurityEvent(t){const r={timestamp:new Date().toISOString(),type:t.type,userId:t.userId||"anonymous",details:Kl(t.details),ipAddress:t.ipAddress||"unknown",userAgent:t.userAgent||"unknown"};console.log("[SECURITY_AUDIT]",r)}async sendToAuditService(t){}}function D4(e,t){const r=Kl(t);console.error("[ERROR]",{message:e.message,stack:e.stack,context:r,timestamp:new Date().toISOString()})}let M4=class extends oe.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){D4(t,{errorInfo:r,timestamp:new Date().toISOString()})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please refresh the page to continue."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})}):this.props.children}};const I4="modulepreload",$4=function(e){return"/"+e},Jv={},gc=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=$4(c),c in Jv)return;Jv[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":I4,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},z4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class $0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class L4 extends $0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class R4 extends $0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class q4 extends $0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sp||(Sp={}));var F4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class U4{constructor(t,{headers:r={},customFetch:n,region:s=Sp.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=z4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return F4(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(p=>{throw new L4(p)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new R4(d);if(!d.ok)throw new q4(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return m==="application/json"?h=yield d.json():m==="application/octet-stream"?h=yield d.blob():m==="text/event-stream"?h=d:m==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var fr={},z0={},cf={},xc={},uf={},df={},B4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ro=B4();const Q4=ro.fetch,QN=ro.fetch.bind(ro),VN=ro.Headers,V4=ro.Request,W4=ro.Response,No=Object.freeze(Object.defineProperty({__proto__:null,Headers:VN,Request:V4,Response:W4,default:QN,fetch:Q4},Symbol.toStringTag,{value:"Module"})),K4=nA(No);var ff={};Object.defineProperty(ff,"__esModule",{value:!0});let H4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ff.default=H4;var WN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});const G4=WN(K4),Y4=WN(ff);let X4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=G4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,m=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,h="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,h="OK")}catch{i.status===404&&y===""?(m=204,h="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,h="OK"),u&&this.shouldThrowOnError)throw new Y4.default(u)}return{error:u,data:d,count:f,status:m,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};df.default=X4;var J4=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uf,"__esModule",{value:!0});const Z4=J4(df);let e6=class extends Z4.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};uf.default=e6;var t6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xc,"__esModule",{value:!0});const r6=t6(uf);let n6=class extends r6.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xc.default=n6;var s6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});const Wo=s6(xc);let i6=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Wo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Wo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Wo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};cf.default=i6;var hf={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.version=void 0;mf.version="0.0.0-automated";Object.defineProperty(hf,"__esModule",{value:!0});hf.DEFAULT_HEADERS=void 0;const a6=mf;hf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${a6.version}`};var KN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z0,"__esModule",{value:!0});const o6=KN(cf),l6=KN(xc),c6=hf;let u6=class HN{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},c6.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new o6.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new HN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new l6.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};z0.default=u6;var So=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fr,"__esModule",{value:!0});fr.PostgrestError=fr.PostgrestBuilder=fr.PostgrestTransformBuilder=fr.PostgrestFilterBuilder=fr.PostgrestQueryBuilder=fr.PostgrestClient=void 0;const GN=So(z0);fr.PostgrestClient=GN.default;const YN=So(cf);fr.PostgrestQueryBuilder=YN.default;const XN=So(xc);fr.PostgrestFilterBuilder=XN.default;const JN=So(uf);fr.PostgrestTransformBuilder=JN.default;const ZN=So(df);fr.PostgrestBuilder=ZN.default;const eS=So(ff);fr.PostgrestError=eS.default;var d6=fr.default={PostgrestClient:GN.default,PostgrestQueryBuilder:YN.default,PostgrestFilterBuilder:XN.default,PostgrestTransformBuilder:JN.default,PostgrestBuilder:ZN.default,PostgrestError:eS.default};const{PostgrestClient:f6,PostgrestQueryBuilder:kK,PostgrestFilterBuilder:PK,PostgrestTransformBuilder:EK,PostgrestBuilder:CK,PostgrestError:AK}=d6;let kp;typeof window>"u"?kp=require("ws"):kp=window.WebSocket;const h6=kp,m6="2.11.10",p6={"X-Client-Info":`realtime-js/${m6}`},g6="1.0.0",tS=1e4,x6=1e3;var Ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ba||(Ba={}));var Zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zt||(Zt={}));var hn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(hn||(hn={}));var Pp;(function(e){e.websocket="websocket"})(Pp||(Pp={}));var Ni;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ni||(Ni={}));class y6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class rS{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Le||(Le={}));const Zv=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=v6(o,e,t,s),i),{})},v6=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?nS(i,o):Ep(o)},nS=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _6(t,r)}switch(e){case Le.bool:return b6(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return w6(t);case Le.json:case Le.jsonb:return j6(t);case Le.timestamp:return N6(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Ep(t);default:return Ep(t)}},Ep=e=>e,b6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},w6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},j6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>nS(t,l))}return e},N6=e=>typeof e=="string"?e.replace(" ","T"):e,sS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Gh{constructor(t,r,n={},s=tS){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eb||(eb={}));class bl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=bl.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bl.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const m=d.map(g=>g.presence_ref),h=f.map(g=>g.presence_ref),p=d.filter(g=>h.indexOf(g.presence_ref)<0),y=f.filter(g=>m.indexOf(g.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(h=>h.presence_ref),m=d.filter(h=>f.indexOf(h.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tb||(tb={}));var rb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rb||(rb={}));var Hn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Hn||(Hn={}));class L0{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gh(this,hn.join,this.params,this.timeout),this.rejoinTimer=new rS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bl(this),this.broadcastEndpointURL=sS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Hn.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Hn.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Hn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,h=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<h;y++){const g=m[y],{filter:{event:v,schema:x,table:w,filter:_}}=g,j=d&&d[y];if(j&&j.event===v&&j.schema===x&&j.table===w&&j.filter===_)p.push(Object.assign(Object.assign({},g),{id:j.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Hn.SUBSCRIBED);return}}).receive("error",d=>{this.state=Zt.errored,t==null||t(Hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Gh(this,hn.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gh(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=hn;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,y,g;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(y=h.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(h=>h.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,y,g,v,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const _=h.id,j=(p=h.filter)===null||p===void 0?void 0:p.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(x=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:g,commit_timestamp:v,type:x,errors:w}=p;m=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:v,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(p))}h.callback(m,n)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&L0.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(hn.close,{},t)}_onError(t){this._on(hn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Zv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Zv(t.columns,t.old_record)),r}}const nb=()=>{},S6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class k6{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=p6,this.params={},this.timeout=tS,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nb,this.ref=0,this.logger=nb,this.conn=null,this.sendBuffer=[],this.serializer=new y6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>gc(async()=>{const{default:c}=await Promise.resolve().then(()=>No);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Pp.websocket}`,this.httpEndpoint=sS(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=h6),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new P6(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:g6}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ba.connecting:return Ni.Connecting;case Ba.open:return Ni.Open;case Ba.closing:return Ni.Closing;default:return Ni.Closed}}isConnected(){return this.connectionState()===Ni.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new L0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(hn.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(x6,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(hn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([S6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class P6{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ba.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class R0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function bt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class E6 extends R0{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Cp extends R0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var C6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const iS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},A6=()=>C6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gc(()=>Promise.resolve().then(()=>No),void 0)).Response:Response}),Ap=e=>{if(Array.isArray(e))return e.map(r=>Ap(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ap(n)}),t};var sa=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Yh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),T6=(e,t,r)=>sa(void 0,void 0,void 0,function*(){const n=yield A6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new E6(Yh(s),e.status||500))}).catch(s=>{t(new Cp(Yh(s),s))}):t(new Cp(Yh(e),e))}),O6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function yc(e,t,r,n,s,i){return sa(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,O6(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>T6(c,l,n))})})}function rd(e,t,r,n){return sa(this,void 0,void 0,function*(){return yc(e,"GET",t,r,n)})}function Os(e,t,r,n,s){return sa(this,void 0,void 0,function*(){return yc(e,"POST",t,n,s,r)})}function D6(e,t,r,n,s){return sa(this,void 0,void 0,function*(){return yc(e,"PUT",t,n,s,r)})}function M6(e,t,r,n){return sa(this,void 0,void 0,function*(){return yc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function aS(e,t,r,n,s){return sa(this,void 0,void 0,function*(){return yc(e,"DELETE",t,n,s,r)})}var lr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const I6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $6{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=iS(s)}uploadOrUpdate(t,r,n,s){return lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},sb),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(bt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:sb.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(bt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return lr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Os(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new R0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}update(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:{path:(yield Os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Os(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=yield Os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}download(t,r){return lr(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield rd(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(bt(l))return{data:null,error:l};throw l}})}info(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield rd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ap(n),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}exists(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield M6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(bt(n)&&n instanceof Cp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return lr(this,void 0,void 0,function*(){try{return{data:yield aS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}list(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},I6),r),{prefix:t||""});return{data:yield Os(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const z6="2.7.1",L6={"X-Client-Info":`storage-js/${z6}`};var ha=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class R6{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},L6),r),this.fetch=iS(n)}listBuckets(){return ha(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}getBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ha(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ha(this,void 0,void 0,function*(){try{return{data:yield D6(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield aS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}}class q6 extends R6{constructor(t,r={},n){super(t,r,n)}from(t){return new $6(this.url,this.headers,t,this.fetch)}}const F6="2.50.0";let ll="";typeof Deno<"u"?ll="deno":typeof document<"u"?ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ll="react-native":ll="node";const U6={"X-Client-Info":`supabase-js-${ll}/${F6}`},B6={headers:U6},Q6={schema:"public"},V6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W6={};var K6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const H6=e=>{let t;return e?t=e:typeof fetch>"u"?t=QN:t=fetch,(...r)=>t(...r)},G6=()=>typeof Headers>"u"?VN:Headers,Y6=(e,t,r)=>{const n=H6(r),s=G6();return(i,o)=>K6(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var X6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function J6(e){return e.endsWith("/")?e:e+"/"}function Z6(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>X6(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const oS="2.70.0",wa=30*1e3,Tp=3,Xh=Tp*wa,eD="http://localhost:9999",tD="supabase.auth.token",rD={"X-Client-Info":`gotrue-js/${oS}`},Op="X-Supabase-Api-Version",lS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sD=6e5;class q0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class iD extends q0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function aD(e){return me(e)&&e.name==="AuthApiError"}class cS extends q0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ci extends q0{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Cs extends ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oD(e){return me(e)&&e.name==="AuthSessionMissingError"}class Yc extends ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends ci{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Jc extends ci{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lD(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class ib extends ci{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dp extends ci{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Jh(e){return me(e)&&e.name==="AuthRetryableFetchError"}class ab extends ci{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class wl extends ci{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ob=` 	
\r=`.split(""),cD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ob.length;t+=1)e[ob[t].charCodeAt(0)]=-2;for(let t=0;t<nd.length;t+=1)e[nd[t].charCodeAt(0)]=t;return e})();function lb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nd[n]),t.queuedBits-=6}}function uS(e,t,r){const n=cD[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function cb(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{fD(o,n,r)};for(let o=0;o<e.length;o+=1)uS(e.charCodeAt(o),s,i);return t.join("")}function uD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function dD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}uD(n,t)}}function fD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function hD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)uS(e.charCodeAt(s),r,n);return new Uint8Array(t)}function mD(e){const t=[];return dD(e,r=>t.push(r)),new Uint8Array(t)}function pD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>lb(s,r,n)),lb(null,r,n),t.join("")}function gD(e){return Math.round(Date.now()/1e3)+e}function xD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const un=()=>typeof window<"u"&&typeof document<"u",xi={tested:!1,writable:!1},jl=()=>{if(!un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xi.tested)return xi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xi.tested=!0,xi.writable=!0}catch{xi.tested=!0,xi.writable=!1}return xi.writable};function yD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const dS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},vD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fS=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},eu=async(e,t)=>{await e.removeItem(t)};class pf{constructor(){this.promise=new pf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pf.promiseConstructor=Promise;function Zh(e){const t=e.split(".");if(t.length!==3)throw new wl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!nD.test(t[n]))throw new wl("JWT not in base64url format");return{header:JSON.parse(cb(t[0])),payload:JSON.parse(cb(t[1])),signature:hD(t[2]),raw:{header:t[0],payload:t[1]}}}async function bD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wD(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function jD(e){return("0"+e.toString(16)).substr(-2)}function _D(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,jD).join("")}async function ND(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function SD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ND(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ma(e,t,r=!1){const n=_D();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await fS(e,`${t}-code-verifier`,s);const i=await SD(n);return[i,n===i?"plain":"s256"]}const kD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function PD(e){const t=e.headers.get(Op);if(!t||!t.match(kD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ED(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function CD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const AD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pa(e){if(!AD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var TD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const bi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OD=[502,503,504];async function ub(e){var t;if(!vD(e))throw new Dp(bi(e),0);if(OD.includes(e.status))throw new Dp(bi(e),e.status);let r;try{r=await e.json()}catch(i){throw new cS(bi(i),i)}let n;const s=PD(e);if(s&&s.getTime()>=lS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ab(bi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Cs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ab(bi(r),e.status,r.weak_password.reasons);throw new iD(bi(r),e.status||500,n)}const DD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ve(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Op]||(i[Op]=lS["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await MD(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function MD(e,t,r,n,s,i){const o=DD(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Dp(bi(c),0)}if(l.ok||await ub(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ub(c)}}function Wn(e){var t;let r=null;LD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=gD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function db(e){const t=Wn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $s(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ID(e){return{data:e,error:null}}function $D(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=TD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function zD(e){return e}function LD(e){return e.access_token&&e.refresh_token&&e.expires_in}const em=["global","local","others"];var RD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class qD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=dS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=em[0]){if(em.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${em.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$s})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=RD(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$D,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$s})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zD});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(me(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pa(t);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$s})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pa(t);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$s})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pa(t);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$s})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pa(t.userId);try{const{data:r,error:n}=await ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pa(t.userId),pa(t.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}}const FD={getItem:e=>jl()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{jl()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{jl()&&globalThis.localStorage.removeItem(e)}};function fb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function UD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ga={debug:!!(globalThis&&jl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class BD extends hS{}async function QD(e,t,r){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new BD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ga.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}UD();const VD={url:eD,storageKey:tD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hb(e,t,r){return await r()}class Hl{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},VD),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new qD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dS(s.fetch),this.lock=s.lock||hb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:un()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=QD:this.lock=hb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:jl()?this.storage=FD:(this.memoryStorage={},this.storage=fb(this.memoryStorage)):(this.memoryStorage={},this.storage=fb(this.memoryStorage)),un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=yD(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),un()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),lD(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new cS("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:m}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await ma(this.storage,this.storageKey)),i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:p},xform:Wn})}else if("phone"in t){const{phone:d,password:f,options:m}=t;i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Wn})}else throw new Xc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:db})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:db})}else throw new Xc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,f,m,h;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:g,wallet:v,statement:x,options:w}=t;let _;if(un())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:g,error:v}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:pD(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Wn});if(v)throw v;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Yc}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:v})}catch(g){if(me(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Wn});if(await eu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(me(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ma(this.storage,this.storageKey));const{error:f}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xc("You must provide either an email or phone number.")}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Wn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ma(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ID})}catch(i){if(me(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Cs;const{error:s}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Xc("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Xh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$s}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cs}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:$s})})}catch(r){if(me(r))return oD(r)&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Cs;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ma(this.storage,this.storageKey));const{data:u,error:d}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:$s});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Cs;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Zh(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Cs;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!un())throw new Jc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Jc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ib("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ib("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Jc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const h=m-d;h*1e3<=wa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const p=m-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,d);const{data:y,error:g}=await this._getUser(i);if(g)throw g;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(aD(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=xD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ma(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(me(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:m}=i;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return un()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(me(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await wD(async s=>(s>0&&await bD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Wn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Jh(i)&&Date.now()+o-n<wa})}catch(n){if(this._debug(r,"error",n),me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),un()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Zc(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xh;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Xh}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Jh(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Cs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Cs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),me(i)){const o={session:null,error:i};return Jh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fS(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await eu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wa}ms, refresh threshold is ${Tp} ticks`),s<=Tp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ma(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Zh(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+sD>Date.now()))return n;const{data:s,error:i}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new wl("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new wl("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};n=h.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Zh(n);if(ED(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:s,signature:o},error:null}}const u=CD(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,mD(`${l}.${c}`)))throw new wl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}}Hl.nextInstanceID=0;const WD=Hl;class KD extends WD{constructor(t){super(t)}}var HD=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class GD{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=J6(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Q6,realtime:W6,auth:Object.assign(Object.assign({},V6),{storageKey:u}),global:B6},f=Z6(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=Y6(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new f6(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new U4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new q6(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return HD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KD({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new k6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YD=(e,t,r)=>new GD(e,t,r),XD="https://pgnhngzjjgxkwcdqotky.supabase.co",JD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4",V=YD(XD,JD),mS=b.createContext(void 0);function ZD({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(()=>!1);b.useRef(u);const f=O4(u);b.useEffect(()=>{},[u]);const m=b.useCallback(()=>{{console.warn("Developer mode cannot be enabled in production");return}},[]),h=f;console.log("DEBUG: isDeveloperMode status:",u);const p=(P,z,I)=>{h(` [${new Date().toISOString()}] AuthContext Loading: ${P} -> ${z}${I?` (${I})`:""}`)};b.useEffect(()=>{p("Initial setup",!0,"Component mounted"),(async()=>{s(!0),p("Auth initialization start",!0,"Fetching initial session");const{data:{session:I}}=await V.auth.getSession();I!=null&&I.user?(h(" Initial session found, loading user profile...",I.user.id),p("Initial session found",!0,"Loading user profile"),o(!0),c(!0),s(!1),v(I.user.id,I.user.email).catch(q=>{h(" Initial profile load error (non-blocking):",q)}).finally(()=>{c(!1),p("Initial setup complete",!1,"Auth initialization finished")})):(h(" No initial session found"),p("No initial session",!1,"No session found"),r(null),o(!1),c(!1),s(!1),p("Initial setup complete",!1,"Auth initialization finished"))})();const{data:{subscription:z}}=V.auth.onAuthStateChange(async(I,q)=>{var Q,D;h(" Auth state change:",I,(Q=q==null?void 0:q.user)==null?void 0:Q.id,"Current loading state:",n),p(`Auth event: ${I}`,!0,`Session: ${((D=q==null?void 0:q.user)==null?void 0:D.id)||"none"}`),I==="SIGNED_OUT"||I==="USER_DELETED"?(h(" User signed out or deleted"),p("User signed out/deleted",!1,"Clearing user state"),r(null),o(!1),c(!1),s(!1)):q!=null&&q.user?(h(" User session active, loading profile"),p("User session active",!0,"Loading profile"),o(!0),c(!0),s(!1),v(q.user.id,q.user.email).catch(k=>{h(" Auth event profile load error (non-blocking):",k),p("Auth event profile load error",!1,(k==null?void 0:k.message)||"Unknown error")}).finally(()=>{c(!1)})):(h(" Auth state change: No user in session"),p("Auth state change: No user",!1,"Setting user to null"),r(null),o(!1),c(!1),s(!1))});return()=>z.unsubscribe()},[]);const y=async P=>{try{h(" fetchUserSubscription: Attempting to fetch subscription for user:",P);const{data:z,error:I}=await V.from("subscriptions").select("*").eq("user_id",P).eq("status","active").order("created_at",{ascending:!1}).maybeSingle();return I?(h(" fetchUserSubscription: Error loading subscription:",I),null):(h(" fetchUserSubscription: Subscription data:",z),z)}catch(z){return h(" fetchUserSubscription: Error fetching subscription:",z),null}},g=async P=>{try{h(" fetchPlanSettingsForPlan: Fetching plan settings for plan:",P);const{data:z,error:I}=await V.from("plan_settings").select("*").eq("plan_id",P).maybeSingle();return I?(h(" fetchPlanSettingsForPlan: Error loading plan settings:",I),null):(h(" fetchPlanSettingsForPlan: Plan settings loaded:",z),z)}catch(z){return h(" fetchPlanSettingsForPlan: Error fetching plan settings:",z),null}},v=async(P,z)=>{console.log("--- Entering loadUserProfile function ---");try{console.log("DEBUG: loadUserProfile - About to fetch user profile from DB (Step 1)"),p("loadUserProfile start",!0,`User: ${P}`),h(" loadUserProfile: Starting profile load for:",P),h(" loadUserProfile: Step 1: Fetching user profile from DB...");const{data:I,error:q}=await V.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          avatar_url,
          created_at,
          updated_at,
          nickname
        `).eq("id",P).maybeSingle();if(q)return h(" loadUserProfile: Step 1 Error loading user profile from DB:",q),p("Profile load error",!1,q.message),r(null),null;if(h(" loadUserProfile: Step 1: Raw profile data from DB:",I),!I)return h(" loadUserProfile: Step 1: No user profile found for user:",P),p("No profile found",!1,"Profile does not exist"),r(null),null;h(" loadUserProfile: Step 2: Fetching user subscription...");let Q=await y(P),D=null;if(h(" loadUserProfile: Step 2: User subscription check:",{userId:P,hasSubscription:!!Q,subscriptionPlan:Q==null?void 0:Q.plan,teamId:I.team_id,teamRole:I.team_role}),I.team_id&&(!Q||Q.plan==="free")){h(" loadUserProfile: Step 3: Team member with no/free subscription, checking team owner plan settings for team:",I.team_id),h(" loadUserProfile: Step 3: Calling get_team_owner_plan_settings RPC...");const{data:R,error:F}=await V.rpc("get_team_owner_plan_settings",{p_team_id:I.team_id});!F&&(R!=null&&R.success)?(h(" loadUserProfile: Step 3: get_team_owner_plan_settings RPC returned successfully."),h(" loadUserProfile: Step 3: Found team owner plan settings:",R.subscription_plan),h(" loadUserProfile: Step 3: Using team owner plan settings directly"),D=R.plan_settings):h(" loadUserProfile: Step 3: Failed to get team owner plan settings:",F||(R==null?void 0:R.error))}h(" loadUserProfile: Step 4: Determining plan settings..."),D?h(" loadUserProfile: Step 4: Using team owner plan settings:",D):Q?(h(" loadUserProfile: Step 4: Loading plan settings for plan:",Q.plan),D=await g(Q.plan),h(" loadUserProfile: Step 4: Plan settings loaded:",D)):(h(' loadUserProfile: Step 4: No active subscription found, fetching settings for "free" plan'),D=await g("free"),h(" loadUserProfile: Step 4: Free plan settings loaded:",D));let C;if(I.team_id&&I.team_role&&["owner","admin"].includes(I.team_role))try{h(" loadUserProfile: Step 5: Fetching team max_members from teams table for team:",I.team_id);const{data:R,error:F}=await V.from("teams").select("max_members").eq("id",I.team_id).single();!F&&R?(C=R.max_members,h(" loadUserProfile: Step 5: Team max_members fetched:",C)):h(" loadUserProfile: Step 5: Could not fetch team max_members:",F)}catch(R){h(" loadUserProfile: Step 5: Error fetching team max_members:",R)}else h(" loadUserProfile: Step 5: Skipping team max_members fetch - user is not owner/admin or has no team");const A={id:I.id,email:I.email||z||"",name:I.name,nickname:I.nickname,role:I.role,teamId:I.team_id,teamRole:I.team_role,maxTeamMembers:C,createdAt:I.created_at,subscription:Q?{id:Q.id,plan:Q.plan,status:Q.status,currentPeriodEnd:Q.current_period_end,cancelAtPeriodEnd:Q.cancel_at_period_end,cancelledAt:Q.cancelled_at}:void 0,planSettings:D};return h(" loadUserProfile: User profile loaded successfully:",A),r(A),h(" loadUserProfile: setUser called with:",A.id),p("loadUserProfile success",!1,`User: ${A.name}`),A}catch(I){return h(" loadUserProfile: Error loading user data:",I),p("loadUserProfile error",!1,I instanceof Error?I.message:"Unknown error"),r(null),null}},$={user:t,login:async(P,z)=>{try{p("login start",!0,`Email: ${P}`),h(" Starting login process for:",P);try{const D=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"login",identifier:P})});if(D.status===429){const k=await D.json(),C=k.retryAfter?Math.ceil(k.retryAfter/60):15;throw new Error(`Too many login attempts. Please try again in ${C} minutes.`)}D.ok||console.warn("Rate limiting check failed, proceeding with login")}catch(D){console.warn("Rate limiting check failed:",D)}const{data:I,error:q}=await V.auth.signInWithPassword({email:P,password:z});if(q)throw h(" Login failed:",q),p("login error",!1,q.message),q;if(!I.user)throw h(" Login failed: No user returned"),p("login no user",!1,"No user in response"),new Error("Login failed");if(h(" Auth login successful, loading user profile..."),!await v(I.user.id,I.user.email))throw new Error("User profile not found. Please contact support or try creating a new account.");h(" Login process completed successfully"),p("login success",!1,"Login complete")}catch(I){throw p("login catch",!1,I instanceof Error?I.message:"Unknown error"),I}},signup:async(P,z,I,q)=>{try{p("signup start",!0,`Email: ${P}, Team: ${q}`),h(" Starting signup process for:",{email:P,name:I,teamName:q}),h(" Step 1: Creating auth user...");const{data:Q,error:D}=await V.auth.signUp({email:P,password:z});if(D)throw h(" Auth user creation failed:",D),p("signup auth error",!1,D.message),D;if(!Q.user)throw h(" Auth user creation failed: No user returned"),p("signup no user",!1,"No user in auth response"),new Error("Failed to create user");const k=Q.user.id;h(" Auth user created successfully:",k),h(" Step 2: Creating team...");let C=5;try{const{data:J,error:he}=await V.from("plan_settings").select("max_team_members").eq("plan_id","free").single();!he&&J?(C=J.max_team_members,h(" Step 2: Using max_team_members from free plan settings:",C)):h(" Step 2: Could not fetch free plan settings, using default:",C)}catch{h(" Step 2: Error fetching plan settings, using default:",C)}const{data:A,error:R}=await V.from("teams").insert([{name:q,description:`${q} team`,owner_id:k,member_count:1,max_members:C}]).select().single();if(R)throw h(" Team creation failed:",R),p("signup team error",!1,R.message),R;h(" Team created successfully:",A),h(" Step 3: Creating user profile...");const{error:F}=await V.from("user_profiles").insert([{id:k,email:P,name:I,role:"user",team_id:A.id,team_role:"owner"}]);if(F)throw h(" User profile creation failed:",F),p("signup profile error",!1,F.message),F;h(" User profile created successfully"),h(" Step 4: Creating subscription...");const{error:Z}=await V.from("subscriptions").insert([{user_id:k,plan:"free",status:"active",current_period_end:new Date(Date.now()+30*24*60*60*1e3).toISOString(),cancel_at_period_end:!1}]);if(Z)throw h(" Subscription creation failed:",Z),p("signup subscription error",!1,Z.message),Z;h(" Subscription created successfully"),h(" Step 5: Creating team member entry...");const{error:re}=await V.from("team_members").insert([{user_id:k,team_id:A.id,role:"owner",status:"active",invited_by:k}]);if(re)throw h(" Team member creation failed:",re),p("signup member error",!1,re.message),re;h(" Team member entry created successfully");try{await V.functions.invoke("send-email-brevo",{body:{to:P,subject:`Welcome to PBE Quiz, ${I}!`,htmlContent:`
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h1 style="color: #4F46E5; text-align: center;">Welcome to PBE Quiz!</h1>
                <p>Hello ${I},</p>
                <p>Welcome to PBE Quiz! Your account has been successfully created, and you are now part of the <strong>${q}</strong> team.</p>
                <div style="text-align: center; margin: 30px 0;">
                  <a href="${window.location.origin}/dashboard" style="background-color: #4F46E5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">Go to Dashboard</a>
                </div>
                <p>Here's what you can do next:</p>
                <ul>
                  <li>Take a Quick Start Quiz to test your knowledge</li>
                  <li>Create custom quizzes focused on specific books</li>
                  <li>View your study schedule and assignments</li>
                  <li>Track your progress and achievements</li>
                </ul>
                <p>Best regards,<br>The PBE Quiz Team</p>
              </div>
            `}}),h(" Custom welcome email sent via Brevo")}catch(J){console.error(" Failed to send custom welcome email via Brevo:",J)}if(h(" Step 6: Loading complete user profile..."),!await v(k,Q.user.email))throw new Error("Failed to load user profile after signup. Please try logging in.");h(" Signup process completed successfully!"),p("signup success",!1,"Signup complete")}catch(Q){throw h(" Signup process failed:",Q),p("signup catch",!1,Q instanceof Error?Q.message:"Unknown error"),Q}},signupForInvitation:async(P,z,I)=>{try{p("signup for invitation start",!0,`Email: ${P}`),h(" Starting invitation signup process for:",{email:P,name:I}),h(" Step 1: Creating auth user...");const{data:q,error:Q}=await V.auth.signUp({email:P,password:z});if(Q)throw h(" Auth user creation failed:",Q),p("signup for invitation auth error",!1,Q.message),Q;if(!q.user)throw h(" Auth user creation failed: No user returned"),p("signup for invitation no user",!1,"No user in auth response"),new Error("Failed to create user");const D=q.user.id;h(" Auth user created successfully:",D),h(" Step 2: Creating user profile...");const{error:k}=await V.from("user_profiles").insert([{id:D,email:P,name:I,role:"user",team_id:null,team_role:null}]);if(k)throw h(" User profile creation failed:",k),p("signup for invitation profile error",!1,k.message),k;if(h(" User profile created successfully"),h(" Step 3: Loading complete user profile..."),!await v(D,P))throw new Error("Failed to load user profile after creation");h(" Invitation signup process completed successfully!"),p("signup for invitation success",!1,"Signup complete")}catch(q){throw p("signup for invitation catch",!1,q instanceof Error?q.message:"Unknown error"),q}},updateUserProfile:async P=>{if(!t)throw new Error("User not authenticated");try{p("updateUserProfile start",!0,`Updates: ${Object.keys(P).join(", ")}`),h(" Updating user profile:",P);const z={};if(P.name!==void 0&&(z.name=P.name),P.email!==void 0&&(z.email=P.email),P.nickname!==void 0&&(z.nickname=P.nickname),Object.keys(z).length>0){const{error:I}=await V.from("user_profiles").update(z).eq("id",t.id);if(I)throw h(" Error updating user profile:",I),I}if(P.email&&P.email!==t.email){const{error:I}=await V.auth.updateUser({email:P.email});if(I)throw h(" Error updating auth user email:",I),I}await v(t.id,P.email||t.email),h(" User profile updated successfully")}catch(z){throw h(" Error updating user profile:",z),p("updateUserProfile error",!1,z instanceof Error?z.message:"Unknown error"),z}finally{p("updateUserProfile finally",!1,"Function complete")}},updatePassword:async P=>{if(!t)throw new Error("User not authenticated");try{p("updatePassword start",!0,"Updating password"),h(" Updating user password...");const{error:z}=await V.auth.updateUser({password:P});if(z)throw h(" Error updating password:",z),p("updatePassword error",!1,z.message),z;h(" Password updated successfully"),p("updatePassword success",!1,"Password updated")}catch(z){throw h(" Error updating password:",z),p("updatePassword catch",!1,z instanceof Error?z.message:"Unknown error"),z}finally{p("updatePassword finally",!1,"Function complete")}},forgotPassword:async P=>{try{p("forgotPassword start",!0,`Email: ${P}`),h(" Sending password reset email to:",P);try{const q=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"password_reset",identifier:P})});if(q.status===429){const Q=await q.json(),D=Q.retryAfter?Math.ceil(Q.retryAfter/60):60;throw new Error(`Too many password reset attempts. Please try again in ${D} minutes.`)}q.ok||console.warn("Rate limiting check failed, proceeding with password reset")}catch(q){console.warn("Rate limiting check failed:",q)}const z=window.location.origin,{error:I}=await V.auth.resetPasswordForEmail(P,{redirectTo:`${z}/reset-password`});if(I)throw h(" Error sending password reset email:",I),p("forgotPassword error",!1,I.message),I;h(" Password reset email sent successfully"),p("forgotPassword success",!1,"Reset email sent")}catch(z){throw p("forgotPassword catch",!1,z instanceof Error?z.message:"Unknown error"),z}},resetPasswordWithToken:async(P,z)=>{try{p("resetPasswordWithToken start",!0,"Setting session and updating password"),h(" Resetting password with token...");const{data:I,error:q}=await V.auth.setSession({access_token:P,refresh_token:""});if(q)throw h(" Error setting session with reset token:",q),p("resetPasswordWithToken session error",!1,q.message),new Error("Invalid or expired reset token");if(!I.user)throw h(" No user found with reset token"),p("resetPasswordWithToken no user",!1,"Invalid reset token"),new Error("Invalid reset token");h(" Reset token verified, updating password...");const{data:Q,error:D}=await V.auth.updateUser({password:z});if(D)throw h(" Error updating password:",D),p("resetPasswordWithToken update error",!1,D.message),D;h(" Password updated successfully"),p("resetPasswordWithToken success",!1,"Password reset complete"),Q.user&&await v(I.user.id,I.user.email)}catch(I){throw h(" Error resetting password:",I),p("resetPasswordWithToken catch",!1,I instanceof Error?I.message:"Unknown error"),I}},refreshUser:async()=>{try{p("refreshUser start",!0,"Force refresh requested");const{data:{session:P},error:z}=await V.auth.getSession();if(z)return h(" Session error during refresh:",z),p("Session error during refresh",!1,z.message),r(null),null;if(!(P!=null&&P.user))return h(" No session found during refresh"),p("No session during refresh",!1,"Setting user to null"),r(null),null;h(" Refreshing user profile for:",P.user.id);const I=await v(P.user.id,P.user.email);return I&&h(" User profile refreshed successfully:",I.name),p("refreshUser complete",!1,"Manual refresh complete"),I}catch(P){return h(" Error refreshing user:",P),p("refreshUser error",!1,P instanceof Error?P.message:"Unknown error"),null}},logout:async()=>{p("logout start",!0,"Signing out"),t&&Qs.getInstance().logSecurityEvent({type:"logout",userId:t.id,details:{success:!0}});const{error:P}=await V.auth.signOut();P?(h("Error signing out:",P),p("logout error",!1,P.message)):p("logout success",!1,"Signed out successfully"),r(null),s(!1)},loading:n,hasSession:i,profileLoading:l,isDeveloperMode:u,toggleDeveloperMode:m,developerLog:h};return a.jsx(mS.Provider,{value:$,children:e})}function xe(){const e=b.useContext(mS);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const pS=b.createContext(void 0);function eM({children:e}){const[t,r]=b.useState([]),[n,s]=b.useState(!1),{user:i,developerLog:o,loading:l}=xe(),c=b.useCallback(async()=>{if(l){o(" QuestionContext: Auth still loading, skipping question fetch");return}s(!0);try{o(" Fetching questions from Supabase...");const{data:h,error:p}=await V.from("questions").select("*").order("created_at",{ascending:!1});if(p)throw o(" Error fetching questions:",p),p;o(" Questions fetched successfully:",(h==null?void 0:h.length)||0,"questions"),r(h||[])}catch(h){o(" Error in fetchQuestions:",h),r([])}finally{s(!1)}},[l,o]);oe.useEffect(()=>{l||(o(" QuestionContext: Auth loaded, fetching questions"),c())},[l,c]);const u=b.useCallback(async h=>{if(!i)throw new Error("User not authenticated");try{o(" Creating new question...");const{data:p,error:y}=await V.from("questions").insert([{...h,created_by:i.id}]).select().single();if(y)throw o(" Error creating question:",y),y;o(" Question created successfully:",p),r(g=>[p,...g])}catch(p){throw o(" Error creating question:",p),p}},[i]),d=b.useCallback(async(h,p)=>{try{o(" Updating question:",h);const{data:y,error:g}=await V.from("questions").update(p).eq("id",h).select().single();if(g)throw o(" Error updating question:",g),g;o(" Question updated successfully:",y),r(v=>v.map(x=>x.id===h?y:x))}catch(y){throw o(" Error updating question:",y),y}},[]),f=b.useCallback(async h=>{try{o(" Deleting question:",h);const{error:p}=await V.from("questions").delete().eq("id",h);if(p)throw o(" Error deleting question:",p),p;o(" Question deleted successfully"),r(y=>y.filter(g=>g.id!==h))}catch(p){throw o(" Error deleting question:",p),p}},[]),m={questions:t,loading:n,fetchQuestions:c,createQuestion:u,updateQuestion:d,deleteQuestion:f};return a.jsx(pS.Provider,{value:m,children:e})}function ia(){const e=b.useContext(pS);if(e===void 0)throw new Error("useQuestion must be used within a QuestionProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>b.createElement("svg",{ref:d,...tM,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${rM(e)}`,l].join(" "),...u},[...t.map(([f,m])=>b.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=te("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=te("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=te("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=te("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=te("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=te("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=te("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=te("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=te("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ma(e,t="free",r){const n={free:0,pro:1,enterprise:2},s=n[t];return e.length===0?[]:(e.reduce((i,o)=>(i[o.tier]=(i[o.tier]||0)+1,i),{}),e.filter(i=>n[i.tier]<=s))}function NS(e,t,r){if(!e||e.length===0)return[];if(!t||t.length===0)return[];let n=[];return t.forEach((i,o)=>{i.chapters.forEach(l=>{const c=e.filter(u=>u.book_of_bible===i.book&&u.chapter===l);if(i.verses&&i.verses.length>0){const u=c.filter(d=>{const f=d.verse||1;return i.verses.includes(f)});n=[...n,...u]}else n=[...n,...c]})}),n.filter((i,o,l)=>o===l.findIndex(c=>c.id===i.id))}function Va(e,t){const r=t.filter(s=>s.book_of_bible===e);return[...new Set(r.map(s=>s.chapter))].sort((s,i)=>s-i)}function tm(e,t,r){const n=r.filter(i=>i.book_of_bible===e&&i.chapter===t);return[...new Set(n.map(i=>i.verse||1))].sort((i,o)=>i-o)}function SS(e){return[...new Set(e.map(r=>r.book_of_bible))].sort()}function kS(e){switch(e){case"quick-start":return"Quick Start";case"custom":return"Custom Quiz";case"study-assignment":return"Study Assignment";default:return"Quiz"}}function vb(e){switch(e){case"quick-start":return Pn;case"custom":return ko;case"study-assignment":return Yt;default:return Nt}}function rm(e){if(!e||e.length===0)return"";const t=[...e].sort((i,o)=>i-o),r=[];let n=t[0],s=t[0];for(let i=1;i<t.length;i++)t[i]===s+1?s=t[i]:(r.push(n===s?`${n}`:`${n}-${s}`),n=s=t[i]);return r.push(n===s?`${n}`:`${n}-${s}`),r.join(", ")}function NM(e,t,r="free",n){n==null||n("*** Entering calculateTotalQuestionsForStudyItems ***"),n==null||n("*** Input studyItems:",e),n==null||n("*** Total questions available:",t.length),n==null||n(" calculateTotalQuestionsForStudyItems: Input studyItems:",e),n==null||n(" calculateTotalQuestionsForStudyItems: Total questions in database:",t.length),n==null||n(" calculateTotalQuestionsForStudyItems: User subscription plan:",r);const s=NS(t,e),i=Ma(s,r);return n==null||n("*** Final count:",i.length),n==null||n(" calculateTotalQuestionsForStudyItems: Total count:",i.length),i.length}function xf(e){if(!e||e.length===0)return 0;const t=e.filter(s=>s.completed).sort((s,i)=>new Date(i.date).getTime()-new Date(s.date).getTime());if(t.length===0)return 0;let r=0;const n=new Date;n.setHours(0,0,0,0);for(let s=0;s<t.length;s++){const i=new Date(t[s].date);i.setHours(0,0,0,0);const o=new Date(n);if(o.setDate(n.getDate()-s),i.getTime()===o.getTime())r++;else break}return r}function It(e){if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r===0?`${t}h`:`${t}h ${r}m`}function ao(e,t=[]){return!e||e.length===0?"":e.map(r=>{if(r.verses&&r.verses.length>0){const n=rm(r.verses);if(r.chapters.length===1)return`${r.book} ${r.chapters[0]}:${n}`;{const s=rm(r.chapters);return`${r.book} (Ch. ${s}, Verses: ${n})`}}else{const n=rm(r.chapters);return r.chapters.length===1?`${r.book} ${r.chapters[0]}`:`${r.book} (Ch. ${n})`}}).join(", ")}const PS=b.createContext(void 0);function SM({children:e}){const[t,r]=b.useState([]),n=b.useCallback((i,o)=>{const l=Math.random().toString(36).substring(2,9),c={id:l,type:i,achievement:o};r(u=>[...u,c]),setTimeout(()=>{r(u=>u.filter(d=>d.id!==l))},5e3)},[]),s=b.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return a.jsxs(PS.Provider,{value:{showNotification:n},children:[e,a.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(i=>a.jsx(PM,{notification:i,onDismiss:()=>s(i.id)},i.id))})]})}function kM(){const e=b.useContext(PS);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e}function PM({notification:e,onDismiss:t}){const{achievement:r}=e;return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 flex items-center space-x-4 animate-fade-in-up",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:r.badge_icon_url||"/vite.svg",alt:"Achievement Badge",className:"h-10 w-10 rounded-full"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Achievement Unlocked!"}),a.jsx("p",{className:"text-md text-indigo-600 font-bold",children:r.name}),a.jsx("p",{className:"text-xs text-gray-500",children:r.description})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:""})]})}async function EM(e){try{console.log(" Checking if assignment should be marked as completed:",e);const{data:t,error:r}=await V.from("study_assignments").select("id, study_items, completed").eq("id",e).single();if(r)throw console.error(" Error loading assignment for completion check:",r),r;if(!t){console.warn(" Assignment not found for completion check:",e);return}if(t.completed){console.log(" Assignment already marked as completed:",e);return}console.log(" Assignment study items:",t.study_items);const{data:n,error:s}=await V.from("quiz_sessions").select("id, questions, status, completed_at").eq("assignment_id",e).eq("status","completed");if(s)throw console.error(" Error loading quiz sessions for assignment:",s),s;if(console.log(" Completed quiz sessions for assignment:",(n==null?void 0:n.length)||0),!n||n.length===0){console.log(" No completed quiz sessions found for assignment");return}const i=new Set;n.forEach(u=>{u.questions&&Array.isArray(u.questions)&&u.questions.forEach(d=>{if(d.book_of_bible&&d.chapter){const f=`${d.book_of_bible}:${d.chapter}`;i.add(f)}})}),console.log(" Chapters completed through quizzes:",Array.from(i));const o=t.study_items||[],l=new Set;o.forEach(u=>{u.chapters.forEach(d=>{const f=`${u.book}:${d}`;l.add(f)})}),console.log(" Required chapters for assignment:",Array.from(l));const c=Array.from(l).every(u=>i.has(u));if(console.log(" All chapters completed?",c),c){console.log(" All chapters completed! Marking assignment as completed:",e);const{error:u}=await V.from("study_assignments").update({completed:!0,completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(u)throw console.error(" Error marking assignment as completed:",u),u;console.log(" Assignment marked as completed successfully")}else{const u=i.size,d=l.size;console.log(` Assignment progress: ${u}/${d} chapters completed`)}}catch(t){throw console.error(" Failed to check/mark assignment completion:",t),t}}const Pu=500;function CM(e){return Math.floor(e/Pu)+1}function AM(e,t){const r=(t-1)*Pu,n=t*Pu,s=e-r,i=n-e,o=s/Pu*100;return{current:s,needed:i,percentage:Math.min(o,100)}}function ES(e){const[t,r,n]=e.split("-").map(Number);return new Date(Date.UTC(t,r-1,n,0,0,0,0))}function Wr(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function oo(e,t={}){const r={timeZone:"Europe/London",...t};return e.toLocaleDateString("en-GB",r)}function TM(e){return e.toISOString().split("T")[0]}function zp(e,t){const r=Wr(e),n=Wr(t);return r.getTime()===n.getTime()}const nm=10,CS=b.createContext(void 0);function OM({children:e}){const[t,r]=b.useState([]),{user:n,developerLog:s}=xe(),{showNotification:i}=kM();b.useEffect(()=>{n?o():r([])},[n]);const o=b.useCallback(async()=>{if(n)try{const{data:y,error:g}=await V.from("quiz_sessions").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(g)throw g;r(y||[])}catch(y){console.error("Error loading quiz sessions:",y)}},[n]),l=b.useCallback(async y=>{if(!n)throw new Error("User not authenticated");try{s(" Creating quiz session...",y);const{data:g,error:v}=await V.from("quiz_sessions").insert([y]).select().single();if(v)throw s(" Error creating quiz session:",v),v;return s(" Quiz session created successfully:",g),r(x=>[g,...x]),g.id}catch(g){throw s(" Error creating quiz session:",g),g}},[n]),c=b.useCallback(y=>t.find(g=>g.id===y)||null,[t]),u=y=>y.reduce((g,v)=>g+(Number(v.pointsEarned)||0),0),d=b.useCallback(async(y,g)=>{let v=0;try{if(s(" Updating quiz session:",y,"with updates:",g),g.results){const w=u(g.results);g.total_points=w,s(" QuizSessionContext: Recalculated total_points from updated results:",{resultsArray:g.results,calculatedTotalPoints:w,resultBreakdown:g.results.map(_=>({questionId:_.questionId,pointsEarned:_.pointsEarned,totalPoints:_.totalPoints,pointsEarnedType:typeof _.pointsEarned,pointsEarnedValue:Number(_.pointsEarned)}))})}const{error:x}=await V.from("quiz_sessions").update(g).eq("id",y);if(x)throw x;if(g.status==="completed"){s(" Quiz session completed, checking for assignment...");const w=t.find(j=>j.id===y);if(w!=null&&w.assignment_id){s(" Found assignment ID, marking as completed:",w.assignment_id);try{s(" Found session for completion check:",w?{id:w.id,assignment_id:w.assignment_id,type:w.type}:"not found"),await EM(w.assignment_id),s(" Assignment completion check completed")}catch(j){s(" Failed to check/mark assignment as completed:",j)}}else s(" No assignment associated with this quiz session"),s(" Session data:",w?{id:w.id,type:w.type,assignment_id:w.assignment_id}:"session not found");const _=(g.results||(w==null?void 0:w.results)||[]).reduce((j,N)=>j+(Number(N.pointsEarned)||0),0);if(n&&w){s(" Starting gamification updates for user:",n.id);const j=(g.results||w.results).reduce((S,E)=>S+E.pointsEarned,0);s(" QuizSessionContext: Starting XP calculation with detailed breakdown:",{sessionId:w.id,sessionType:w.type,sessionTitle:w.title,resultsArray:g.results||w.results,resultBreakdown:(g.results||w.results).map(S=>({questionId:S.questionId,totalPoints:S.totalPoints,timeSpent:S.timeSpent})),rawActualPointsEarned:j,actualPointsEarnedType:typeof j});const N=Number(j)||0;if(s(" QuizSessionContext: Safe points calculation:",{originalActualPointsEarned:j,safeActualPointsEarned:N,bonusXp:v}),s(" XP Calculation Debug:",{sessionTotalPoints:w.total_points,actualPointsFromResults:j,resultsArray:g.results||w.results,bonusXp:v}),w.assignment_id)try{s(" Checking for on-time completion bonus for assignment:",w.assignment_id);const{data:S,error:E}=await V.from("study_assignments").select("date").eq("id",w.assignment_id).single();if(!E&&S){const O=new Date(S.date),T=new Date(w.completed_at||new Date);zp(O,T)?(v=nm,s(" On-time completion bonus earned:",v,"XP"),i("achievement",{id:"bonus-xp",name:"On-Time Completion Bonus!",description:`You earned ${nm} bonus XP for completing your study assignment on time!`,criteria_type:"bonus_xp",criteria_value:nm,badge_icon_url:"/images/badges/perfect.png"})):s(" Assignment completed on different day - no bonus XP")}else s(" Could not fetch assignment date for bonus XP check:",E)}catch(S){s(" Error checking for bonus XP:",S)}try{const{data:S,error:E}=await V.from("user_stats").select("*").eq("user_id",n.id).maybeSingle();if(E)throw E;s(" QuizSessionContext: Current user stats from database:",{currentUserStats:S,currentTotalXp:(S==null?void 0:S.total_xp)||0,currentLevel:(S==null?void 0:S.current_level)||0});const{data:O,error:T}=await V.from("quiz_sessions").select("total_points").eq("user_id",n.id).eq("status","completed");if(T)throw T;const $=(O||[]).reduce((ne,J)=>ne+(Number(J.total_points)||0),0);let P=$+v;s(" QuizSessionContext: XP recalculation from all sessions:",{allCompletedSessionsCount:(O==null?void 0:O.length)||0,allSessionsBreakdown:(O==null?void 0:O.map(ne=>({total_points:ne.total_points,total_points_type:typeof ne.total_points,total_points_number:Number(ne.total_points)})))||[],totalXpFromAllSessions:$,bonusXp:v,finalNewTotalXp:P,previousTotalXp:(S==null?void 0:S.total_xp)||0});let z=(S==null?void 0:S.current_level)||0;z=CM(P),s(" QuizSessionContext: XP calculation breakdown:",{previousTotalXp:(S==null?void 0:S.total_xp)||0,pointsFromQuiz:N,bonusXp:v,calculatedNewTotalXp:P,previousLevel:(S==null?void 0:S.current_level)||0,calculatedNewLevel:z});const{data:I,error:q}=await V.from("quiz_sessions").select("completed_at").eq("user_id",n.id).eq("status","completed").order("completed_at",{ascending:!1});if(q)throw q;const Q=xf(I||[]);let D=Math.max((S==null?void 0:S.longest_streak)||0,Q);s(" QuizSessionContext: Streak calculation:",{allCompletedSessionsCount:(I==null?void 0:I.length)||0,currentStudyStreak:Q,previousLongestStreak:(S==null?void 0:S.longest_streak)||0,newLongestStreak:D});const k={user_id:n.id,total_xp:P,current_level:z,longest_streak:D,last_quiz_date:new Date().toISOString().split("T")[0]};s(" QuizSessionContext: About to upsert user stats:",k);const{error:C}=await V.from("user_stats").upsert(k,{onConflict:"user_id"});if(C)throw C;s(" QuizSessionContext: User stats successfully updated in database:",{previousXp:(S==null?void 0:S.total_xp)||0,pointsFromQuiz:N,bonusXp:v,finalNewTotalXp:P,finalNewCurrentLevel:z,finalNewLongestStreak:D,upsertedData:k}),v>0&&(g.bonus_xp=v,s(" QuizSessionContext: Added bonus XP to session updates:",v));const{data:A,error:R}=await V.from("achievements").select("*");if(R)throw R;const{data:F,error:Z}=await V.from("user_achievements").select("achievement_id").eq("user_id",n.id);if(Z)throw Z;const re=new Set(F==null?void 0:F.map(ne=>ne.achievement_id));for(const ne of A||[])if(!re.has(ne.id)){let J=!1;switch(ne.criteria_type){case"total_quizzes_completed":const{count:he,error:rt}=await V.from("quiz_sessions").select("*",{count:"exact",head:!0}).eq("user_id",n.id).eq("status","completed");!rt&&he>=ne.criteria_value&&(J=!0);break;case"total_points_earned":P>=ne.criteria_value&&(J=!0);break;case"longest_streak":D>=ne.criteria_value&&(J=!0);break;case"total_questions_answered":const{count:B,error:ee}=await V.from("quiz_question_logs").select("*",{count:"exact",head:!0}).eq("user_id",n.id);!ee&&B>=ne.criteria_value&&(J=!0);break;case"perfect_score":w.total_points===w.max_points&&w.max_points>0&&(J=!0);break;case"speed_demon":w.estimated_minutes<=ne.criteria_value&&(J=!0);break;case"accuracy_book_ruth":case"accuracy_book_esther":case"accuracy_book_daniel":case"accuracy_chapter":case"accuracy_tier_free":case"accuracy_tier_pro":case"accuracy_tier_enterprise":s(` Achievement criteria_type '${ne.criteria_type}' not yet fully implemented in logic.`);break}if(J){const{error:he}=await V.from("user_achievements").insert({user_id:n.id,achievement_id:ne.id,unlocked_at:new Date().toISOString()});if(he)throw he;i("achievement",ne),s(" Achievement unlocked:",ne.name)}}}catch(S){console.error(" Gamification update failed:",S)}}}r(w=>w.map(_=>_.id===y?{..._,...g,updated_at:new Date().toISOString()}:_))}catch(x){throw console.error("Error updating quiz session:",x),x}},[t,n,s]),f=b.useCallback(async y=>{try{const{error:g}=await V.from("quiz_sessions").delete().eq("id",y);if(g)throw g;r(v=>v.filter(x=>x.id!==y))}catch(g){throw console.error("Error deleting quiz session:",g),g}},[]),m=b.useCallback(y=>t.filter(g=>g.user_id===y&&(g.status==="active"||g.status==="paused")),[t]),h=b.useCallback((y,g)=>t.find(v=>v.assignment_id===y&&v.user_id===g&&(v.status==="active"||v.status==="paused"))||null,[t]),p={sessions:t,createQuizSession:l,loadQuizSession:c,updateQuizSession:d,deleteQuizSession:f,getActiveSessionsForUser:m,getSessionForAssignment:h};return a.jsx(CS.Provider,{value:p,children:e})}function aa(){const e=b.useContext(CS);if(e===void 0)throw new Error("useQuizSession must be used within a QuizSessionProvider");return e}function ht({children:e,requireAdmin:t=!1,requireUser:r=!1,allowedTeamRoles:n}){const{user:s,loading:i,hasSession:o,profileLoading:l,developerLog:c}=xe(),u=ys();if(c(" ProtectedRoute: Rendering with user:",s,"loading:",i,"hasSession:",o,"profileLoading:",l,"path:",u.pathname),i)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!s)return o&&l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):a.jsx(Yn,{to:"/login",replace:!0});if(t&&s.role!=="admin")return a.jsx(Yn,{to:"/dashboard",replace:!0});if(r&&s.role==="admin")return a.jsx(Yn,{to:"/dashboard",replace:!0});if(n&&s.teamRole&&!n.includes(s.teamRole))return a.jsx(Yn,{to:"/dashboard",replace:!0});try{return a.jsx(a.Fragment,{children:e})}catch(d){return console.error("ProtectedRoute error:",d),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please try refreshing the page."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})})}}const Lp=[{id:"prod_SkGQB88LYZDhx4",name:"PBE Pro Play Yearly",description:"Annual subscription to PBE Pro Play with advanced features and unlimited access.",priceId:"price_1RoltBEGamTK7gLp3vFhnNpg",mode:"subscription",price:150,currency:"GBP",interval:"year",features:["Unlimited quiz sessions","Advanced analytics","Priority support","All question tiers","Team collaboration","Study schedule management"]},{id:"prod_SkG8EHn9mio3Tg",name:"PBE Pro Plan",description:"Monthly subscription to PBE Pro with enhanced features and team management.",priceId:"price_1RolccEGamTK7gLpzKYZ7aYj",mode:"subscription",price:15,currency:"GBP",interval:"month",features:["Enhanced quiz features","Team management","Progress tracking","Pro question access","Custom quiz builder","Basic analytics"]}];function Ko(e,t){const r=t||"GBP",n=typeof e=="number"&&!isNaN(e)?e:0;return new Intl.NumberFormat("en-GB",{style:"currency",currency:r}).format(n)}function xa(e){return new Date(e*1e3).toLocaleDateString()}function _l(e){if(e<60)return`${e}s`;const t=Math.floor(e/60),r=e%60;return`${t}:${r.toString().padStart(2,"0")}`}function Rp(e){const t=new Date,r=new Date(e),n=t.getTime()-r.getTime(),s=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),o=Math.floor(i/24);return s<1?"Just now":s<60?`${s} minute${s!==1?"s":""} ago`:i<24?`${i} hour${i!==1?"s":""} ago`:o<7?`${o} day${o!==1?"s":""} ago`:r.toLocaleDateString()}var vc=e=>e.type==="checkbox",Ei=e=>e instanceof Date,tr=e=>e==null;const AS=e=>typeof e=="object";var it=e=>!tr(e)&&!Array.isArray(e)&&AS(e)&&!Ei(e),DM=e=>it(e)&&e.target?vc(e.target)?e.target.checked:e.target.value:e,MM=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,IM=(e,t)=>e.has(MM(t)),$M=e=>{const t=e.constructor&&e.constructor.prototype;return it(t)&&t.hasOwnProperty("isPrototypeOf")},V0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bt(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(V0&&(e instanceof Blob||n))&&(r||it(e)))if(t=r?[]:{},!r&&!$M(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Bt(e[s]));else return e;return t}var yf=e=>Array.isArray(e)?e.filter(Boolean):[],ut=e=>e===void 0,ue=(e,t,r)=>{if(!t||!it(e))return r;const n=yf(t.split(/[,[\].]+?/)).reduce((s,i)=>tr(s)?s:s[i],e);return ut(n)||n===e?ut(e[t])?r:e[t]:n},On=e=>typeof e=="boolean",W0=e=>/^\w*$/.test(e),TS=e=>yf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(e,t,r)=>{let n=-1;const s=W0(t)?[t]:TS(t),i=s.length,o=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==o){const u=e[l];c=it(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const bb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};oe.createContext(null);var zM=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==xn.all&&(t._proxyFormState[o]=!n||xn.all),e[o]}});return s};const LM=typeof window<"u"?b.useLayoutEffect:b.useEffect;var Mn=e=>typeof e=="string",RM=(e,t,r,n,s)=>Mn(e)?(n&&t.watch.add(e),ue(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ue(r,i))):(n&&(t.watchAll=!0),r),qM=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Nl=e=>Array.isArray(e)?e:[e],wb=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},qp=e=>tr(e)||!AS(e);function Ls(e,t){if(qp(e)||qp(t))return e===t;if(Ei(e)&&Ei(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const i=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Ei(i)&&Ei(o)||it(i)&&it(o)||Array.isArray(i)&&Array.isArray(o)?!Ls(i,o):i!==o)return!1}}return!0}var cr=e=>it(e)&&!Object.keys(e).length,K0=e=>e.type==="file",yn=e=>typeof e=="function",id=e=>{if(!V0)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},OS=e=>e.type==="select-multiple",H0=e=>e.type==="radio",FM=e=>H0(e)||vc(e),sm=e=>id(e)&&e.isConnected;function UM(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ut(e)?n++:e[t[n++]];return e}function BM(e){for(const t in e)if(e.hasOwnProperty(t)&&!ut(e[t]))return!1;return!0}function pt(e,t){const r=Array.isArray(t)?t:W0(t)?[t]:TS(t),n=r.length===1?e:UM(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(it(n)&&cr(n)||Array.isArray(n)&&BM(n))&&pt(e,r.slice(0,-1)),e}var DS=e=>{for(const t in e)if(yn(e[t]))return!0;return!1};function ad(e,t={}){const r=Array.isArray(e);if(it(e)||r)for(const n in e)Array.isArray(e[n])||it(e[n])&&!DS(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ad(e[n],t[n])):tr(e[n])||(t[n]=!0);return t}function MS(e,t,r){const n=Array.isArray(e);if(it(e)||n)for(const s in e)Array.isArray(e[s])||it(e[s])&&!DS(e[s])?ut(t)||qp(r[s])?r[s]=Array.isArray(e[s])?ad(e[s],[]):{...ad(e[s])}:MS(e[s],tr(t)?{}:t[s],r[s]):r[s]=!Ls(e[s],t[s]);return r}var Ho=(e,t)=>MS(e,t,ad(t));const jb={value:!1,isValid:!1},_b={value:!0,isValid:!0};var IS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ut(e[0].attributes.value)?ut(e[0].value)||e[0].value===""?_b:{value:e[0].value,isValid:!0}:_b:jb}return jb},$S=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ut(e)?e:t?e===""?NaN:e&&+e:r&&Mn(e)?new Date(e):n?n(e):e;const Nb={isValid:!1,value:null};var zS=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Nb):Nb;function Sb(e){const t=e.ref;return K0(t)?t.files:H0(t)?zS(e.refs).value:OS(t)?[...t.selectedOptions].map(({value:r})=>r):vc(t)?IS(e.refs).value:$S(ut(t.value)?e.ref.value:t.value,e)}var QM=(e,t,r,n)=>{const s={};for(const i of e){const o=ue(t,i);o&&Be(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},od=e=>e instanceof RegExp,Go=e=>ut(e)?e:od(e)?e.source:it(e)?od(e.value)?e.value.source:e.value:e,kb=e=>({isOnSubmit:!e||e===xn.onSubmit,isOnBlur:e===xn.onBlur,isOnChange:e===xn.onChange,isOnAll:e===xn.all,isOnTouch:e===xn.onTouched});const Pb="AsyncFunction";var VM=e=>!!e&&!!e.validate&&!!(yn(e.validate)&&e.validate.constructor.name===Pb||it(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Pb)),WM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Eb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Sl=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ue(e,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sl(l,t))break}else if(it(l)&&Sl(l,t))break}}};function Cb(e,t,r){const n=ue(e,r);if(n||W0(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ue(t,i),l=ue(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:r}}var KM=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return cr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||xn.all))},HM=(e,t,r)=>!e||!t||e===t||Nl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),GM=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,YM=(e,t)=>!yf(ue(e,t)).length&&pt(e,t),XM=(e,t,r)=>{const n=Nl(ue(e,r));return Be(n,"root",t[r]),Be(e,r,n),e},Eu=e=>Mn(e);function Ab(e,t,r="validate"){if(Eu(e)||Array.isArray(e)&&e.every(Eu)||On(e)&&!e)return{type:r,message:Eu(e)?e:"",ref:t}}var ya=e=>it(e)&&!od(e)?e:{value:e,message:""},Tb=async(e,t,r,n,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:m,pattern:h,validate:p,name:y,valueAsNumber:g,mount:v}=e._f,x=ue(r,y);if(!v||t.has(y))return{};const w=l?l[0]:o,_=P=>{s&&w.reportValidity&&(w.setCustomValidity(On(P)?"":P||""),w.reportValidity())},j={},N=H0(o),S=vc(o),E=N||S,O=(g||K0(o))&&ut(o.value)&&ut(x)||id(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,T=qM.bind(null,y,n,j),$=(P,z,I,q=Vn.maxLength,Q=Vn.minLength)=>{const D=P?z:I;j[y]={type:P?q:Q,message:D,ref:o,...T(P?q:Q,D)}};if(i?!Array.isArray(x)||!x.length:c&&(!E&&(O||tr(x))||On(x)&&!x||S&&!IS(l).isValid||N&&!zS(l).isValid)){const{value:P,message:z}=Eu(c)?{value:!!c,message:c}:ya(c);if(P&&(j[y]={type:Vn.required,message:z,ref:w,...T(Vn.required,z)},!n))return _(z),j}if(!O&&(!tr(f)||!tr(m))){let P,z;const I=ya(m),q=ya(f);if(!tr(x)&&!isNaN(x)){const Q=o.valueAsNumber||x&&+x;tr(I.value)||(P=Q>I.value),tr(q.value)||(z=Q<q.value)}else{const Q=o.valueAsDate||new Date(x),D=A=>new Date(new Date().toDateString()+" "+A),k=o.type=="time",C=o.type=="week";Mn(I.value)&&x&&(P=k?D(x)>D(I.value):C?x>I.value:Q>new Date(I.value)),Mn(q.value)&&x&&(z=k?D(x)<D(q.value):C?x<q.value:Q<new Date(q.value))}if((P||z)&&($(!!P,I.message,q.message,Vn.max,Vn.min),!n))return _(j[y].message),j}if((u||d)&&!O&&(Mn(x)||i&&Array.isArray(x))){const P=ya(u),z=ya(d),I=!tr(P.value)&&x.length>+P.value,q=!tr(z.value)&&x.length<+z.value;if((I||q)&&($(I,P.message,z.message),!n))return _(j[y].message),j}if(h&&!O&&Mn(x)){const{value:P,message:z}=ya(h);if(od(P)&&!x.match(P)&&(j[y]={type:Vn.pattern,message:z,ref:o,...T(Vn.pattern,z)},!n))return _(z),j}if(p){if(yn(p)){const P=await p(x,r),z=Ab(P,w);if(z&&(j[y]={...z,...T(Vn.validate,z.message)},!n))return _(z.message),j}else if(it(p)){let P={};for(const z in p){if(!cr(P)&&!n)break;const I=Ab(await p[z](x,r),w,z);I&&(P={...I,...T(z,I.message)},_(I.message),n&&(j[y]=P))}if(!cr(P)&&(j[y]={ref:w,...P},!n))return j}}return _(!0),j};const JM={mode:xn.onSubmit,reValidateMode:xn.onChange,shouldFocusError:!0};function ZM(e={}){let t={...JM,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:yn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s=it(t.defaultValues)||it(t.values)?Bt(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Bt(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:wb(),state:wb()},h=t.criteriaMode===xn.all,p=M=>L=>{clearTimeout(u),u=setTimeout(M,L)},y=async M=>{if(!t.disabled&&(d.isValid||f.isValid||M)){const L=t.resolver?cr((await S()).errors):await O(n,!0);L!==r.isValid&&m.state.next({isValid:L})}},g=(M,L)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(l.mount)).forEach(U=>{U&&(L?Be(r.validatingFields,U,L):pt(r.validatingFields,U))}),m.state.next({validatingFields:r.validatingFields,isValidating:!cr(r.validatingFields)}))},v=(M,L=[],U,W,H=!0,Y=!0)=>{if(W&&U&&!t.disabled){if(o.action=!0,Y&&Array.isArray(ue(n,M))){const de=U(ue(n,M),W.argA,W.argB);H&&Be(n,M,de)}if(Y&&Array.isArray(ue(r.errors,M))){const de=U(ue(r.errors,M),W.argA,W.argB);H&&Be(r.errors,M,de),YM(r.errors,M)}if((d.touchedFields||f.touchedFields)&&Y&&Array.isArray(ue(r.touchedFields,M))){const de=U(ue(r.touchedFields,M),W.argA,W.argB);H&&Be(r.touchedFields,M,de)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ho(s,i)),m.state.next({name:M,isDirty:$(M,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Be(i,M,L)},x=(M,L)=>{Be(r.errors,M,L),m.state.next({errors:r.errors})},w=M=>{r.errors=M,m.state.next({errors:r.errors,isValid:!1})},_=(M,L,U,W)=>{const H=ue(n,M);if(H){const Y=ue(i,M,ut(U)?ue(s,M):U);ut(Y)||W&&W.defaultChecked||L?Be(i,M,L?Y:Sb(H._f)):I(M,Y),o.mount&&y()}},j=(M,L,U,W,H)=>{let Y=!1,de=!1;const Ne={name:M};if(!t.disabled){if(!U||W){(d.isDirty||f.isDirty)&&(de=r.isDirty,r.isDirty=Ne.isDirty=$(),Y=de!==Ne.isDirty);const Oe=Ls(ue(s,M),L);de=!!ue(r.dirtyFields,M),Oe?pt(r.dirtyFields,M):Be(r.dirtyFields,M,!0),Ne.dirtyFields=r.dirtyFields,Y=Y||(d.dirtyFields||f.dirtyFields)&&de!==!Oe}if(U){const Oe=ue(r.touchedFields,M);Oe||(Be(r.touchedFields,M,U),Ne.touchedFields=r.touchedFields,Y=Y||(d.touchedFields||f.touchedFields)&&Oe!==U)}Y&&H&&m.state.next(Ne)}return Y?Ne:{}},N=(M,L,U,W)=>{const H=ue(r.errors,M),Y=(d.isValid||f.isValid)&&On(L)&&r.isValid!==L;if(t.delayError&&U?(c=p(()=>x(M,U)),c(t.delayError)):(clearTimeout(u),c=null,U?Be(r.errors,M,U):pt(r.errors,M)),(U?!Ls(H,U):H)||!cr(W)||Y){const de={...W,...Y&&On(L)?{isValid:L}:{},errors:r.errors,name:M};r={...r,...de},m.state.next(de)}},S=async M=>{g(M,!0);const L=await t.resolver(i,t.context,QM(M||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return g(M),L},E=async M=>{const{errors:L}=await S(M);if(M)for(const U of M){const W=ue(L,U);W?Be(r.errors,U,W):pt(r.errors,U)}else r.errors=L;return L},O=async(M,L,U={valid:!0})=>{for(const W in M){const H=M[W];if(H){const{_f:Y,...de}=H;if(Y){const Ne=l.array.has(Y.name),Oe=H._f&&VM(H._f);Oe&&d.validatingFields&&g([W],!0);const Xt=await Tb(H,l.disabled,i,h,t.shouldUseNativeValidation&&!L,Ne);if(Oe&&d.validatingFields&&g([W]),Xt[Y.name]&&(U.valid=!1,L))break;!L&&(ue(Xt,Y.name)?Ne?XM(r.errors,Xt,Y.name):Be(r.errors,Y.name,Xt[Y.name]):pt(r.errors,Y.name))}!cr(de)&&await O(de,L,U)}}return U.valid},T=()=>{for(const M of l.unMount){const L=ue(n,M);L&&(L._f.refs?L._f.refs.every(U=>!sm(U)):!sm(L._f.ref))&&he(M)}l.unMount=new Set},$=(M,L)=>!t.disabled&&(M&&L&&Be(i,M,L),!Ls(A(),s)),P=(M,L,U)=>RM(M,l,{...o.mount?i:ut(L)?s:Mn(M)?{[M]:L}:L},U,L),z=M=>yf(ue(o.mount?i:s,M,t.shouldUnregister?ue(s,M,[]):[])),I=(M,L,U={})=>{const W=ue(n,M);let H=L;if(W){const Y=W._f;Y&&(!Y.disabled&&Be(i,M,$S(L,Y)),H=id(Y.ref)&&tr(L)?"":L,OS(Y.ref)?[...Y.ref.options].forEach(de=>de.selected=H.includes(de.value)):Y.refs?vc(Y.ref)?Y.refs.forEach(de=>{(!de.defaultChecked||!de.disabled)&&(Array.isArray(H)?de.checked=!!H.find(Ne=>Ne===de.value):de.checked=H===de.value||!!H)}):Y.refs.forEach(de=>de.checked=de.value===H):K0(Y.ref)?Y.ref.value="":(Y.ref.value=H,Y.ref.type||m.state.next({name:M,values:Bt(i)})))}(U.shouldDirty||U.shouldTouch)&&j(M,H,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&C(M)},q=(M,L,U)=>{for(const W in L){if(!L.hasOwnProperty(W))return;const H=L[W],Y=M+"."+W,de=ue(n,Y);(l.array.has(M)||it(H)||de&&!de._f)&&!Ei(H)?q(Y,H,U):I(Y,H,U)}},Q=(M,L,U={})=>{const W=ue(n,M),H=l.array.has(M),Y=Bt(L);Be(i,M,Y),H?(m.array.next({name:M,values:Bt(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&U.shouldDirty&&m.state.next({name:M,dirtyFields:Ho(s,i),isDirty:$(M,Y)})):W&&!W._f&&!tr(Y)?q(M,Y,U):I(M,Y,U),Eb(M,l)&&m.state.next({...r}),m.state.next({name:o.mount?M:void 0,values:Bt(i)})},D=async M=>{o.mount=!0;const L=M.target;let U=L.name,W=!0;const H=ue(n,U),Y=Oe=>{W=Number.isNaN(Oe)||Ei(Oe)&&isNaN(Oe.getTime())||Ls(Oe,ue(i,U,Oe))},de=kb(t.mode),Ne=kb(t.reValidateMode);if(H){let Oe,Xt;const gi=L.type?Sb(H._f):DM(M),Cn=M.type===bb.BLUR||M.type===bb.FOCUS_OUT,vh=!WM(H._f)&&!t.resolver&&!ue(r.errors,U)&&!H._f.deps||GM(Cn,ue(r.touchedFields,U),r.isSubmitted,Ne,de),Io=Eb(U,l,Cn);Be(i,U,gi),Cn?(H._f.onBlur&&H._f.onBlur(M),c&&c(0)):H._f.onChange&&H._f.onChange(M);const $o=j(U,gi,Cn),Oc=!cr($o)||Io;if(!Cn&&m.state.next({name:U,type:M.type,values:Bt(i)}),vh)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Cn&&y():Cn||y()),Oc&&m.state.next({name:U,...Io?{}:$o});if(!Cn&&Io&&m.state.next({...r}),t.resolver){const{errors:zo}=await S([U]);if(Y(gi),W){const ye=Cb(r.errors,n,U),Jt=Cb(zo,n,ye.name||U);Oe=Jt.error,U=Jt.name,Xt=cr(zo)}}else g([U],!0),Oe=(await Tb(H,l.disabled,i,h,t.shouldUseNativeValidation))[U],g([U]),Y(gi),W&&(Oe?Xt=!1:(d.isValid||f.isValid)&&(Xt=await O(n,!0)));W&&(H._f.deps&&C(H._f.deps),N(U,Xt,Oe,$o))}},k=(M,L)=>{if(ue(r.errors,L)&&M.focus)return M.focus(),1},C=async(M,L={})=>{let U,W;const H=Nl(M);if(t.resolver){const Y=await E(ut(M)?M:H);U=cr(Y),W=M?!H.some(de=>ue(Y,de)):U}else M?(W=(await Promise.all(H.map(async Y=>{const de=ue(n,Y);return await O(de&&de._f?{[Y]:de}:de)}))).every(Boolean),!(!W&&!r.isValid)&&y()):W=U=await O(n);return m.state.next({...!Mn(M)||(d.isValid||f.isValid)&&U!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:U}:{},errors:r.errors}),L.shouldFocus&&!W&&Sl(n,k,M?H:l.mount),W},A=M=>{const L={...o.mount?i:s};return ut(M)?L:Mn(M)?ue(L,M):M.map(U=>ue(L,U))},R=(M,L)=>({invalid:!!ue((L||r).errors,M),isDirty:!!ue((L||r).dirtyFields,M),error:ue((L||r).errors,M),isValidating:!!ue(r.validatingFields,M),isTouched:!!ue((L||r).touchedFields,M)}),F=M=>{M&&Nl(M).forEach(L=>pt(r.errors,L)),m.state.next({errors:M?r.errors:{}})},Z=(M,L,U)=>{const W=(ue(n,M,{_f:{}})._f||{}).ref,H=ue(r.errors,M)||{},{ref:Y,message:de,type:Ne,...Oe}=H;Be(r.errors,M,{...Oe,...L,ref:W}),m.state.next({name:M,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&W&&W.focus&&W.focus()},re=(M,L)=>yn(M)?m.state.subscribe({next:U=>M(P(void 0,L),U)}):P(M,L,!0),ne=M=>m.state.subscribe({next:L=>{HM(M.name,L.name,M.exact)&&KM(L,M.formState||d,ot,M.reRenderRoot)&&M.callback({values:{...i},...r,...L})}}).unsubscribe,J=M=>(o.mount=!0,f={...f,...M.formState},ne({...M,formState:f})),he=(M,L={})=>{for(const U of M?Nl(M):l.mount)l.mount.delete(U),l.array.delete(U),L.keepValue||(pt(n,U),pt(i,U)),!L.keepError&&pt(r.errors,U),!L.keepDirty&&pt(r.dirtyFields,U),!L.keepTouched&&pt(r.touchedFields,U),!L.keepIsValidating&&pt(r.validatingFields,U),!t.shouldUnregister&&!L.keepDefaultValue&&pt(s,U);m.state.next({values:Bt(i)}),m.state.next({...r,...L.keepDirty?{isDirty:$()}:{}}),!L.keepIsValid&&y()},rt=({disabled:M,name:L})=>{(On(M)&&o.mount||M||l.disabled.has(L))&&(M?l.disabled.add(L):l.disabled.delete(L))},B=(M,L={})=>{let U=ue(n,M);const W=On(L.disabled)||On(t.disabled);return Be(n,M,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:M}},name:M,mount:!0,...L}}),l.mount.add(M),U?rt({disabled:On(L.disabled)?L.disabled:t.disabled,name:M}):_(M,!0,L.value),{...W?{disabled:L.disabled||t.disabled}:{},...t.progressive?{required:!!L.required,min:Go(L.min),max:Go(L.max),minLength:Go(L.minLength),maxLength:Go(L.maxLength),pattern:Go(L.pattern)}:{},name:M,onChange:D,onBlur:D,ref:H=>{if(H){B(M,L),U=ue(n,M);const Y=ut(H.value)&&H.querySelectorAll&&H.querySelectorAll("input,select,textarea")[0]||H,de=FM(Y),Ne=U._f.refs||[];if(de?Ne.find(Oe=>Oe===Y):Y===U._f.ref)return;Be(n,M,{_f:{...U._f,...de?{refs:[...Ne.filter(sm),Y,...Array.isArray(ue(s,M))?[{}]:[]],ref:{type:Y.type,name:M}}:{ref:Y}}}),_(M,!1,void 0,Y)}else U=ue(n,M,{}),U._f&&(U._f.mount=!1),(t.shouldUnregister||L.shouldUnregister)&&!(IM(l.array,M)&&o.action)&&l.unMount.add(M)}}},ee=()=>t.shouldFocusError&&Sl(n,k,l.mount),le=M=>{On(M)&&(m.state.next({disabled:M}),Sl(n,(L,U)=>{const W=ue(n,U);W&&(L.disabled=W._f.disabled||M,Array.isArray(W._f.refs)&&W._f.refs.forEach(H=>{H.disabled=W._f.disabled||M}))},0,!1))},G=(M,L)=>async U=>{let W;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let H=Bt(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:Y,values:de}=await S();r.errors=Y,H=de}else await O(n);if(l.disabled.size)for(const Y of l.disabled)Be(H,Y,void 0);if(pt(r.errors,"root"),cr(r.errors)){m.state.next({errors:{}});try{await M(H,U)}catch(Y){W=Y}}else L&&await L({...r.errors},U),ee(),setTimeout(ee);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cr(r.errors)&&!W,submitCount:r.submitCount+1,errors:r.errors}),W)throw W},et=(M,L={})=>{ue(n,M)&&(ut(L.defaultValue)?Q(M,Bt(ue(s,M))):(Q(M,L.defaultValue),Be(s,M,Bt(L.defaultValue))),L.keepTouched||pt(r.touchedFields,M),L.keepDirty||(pt(r.dirtyFields,M),r.isDirty=L.defaultValue?$(M,Bt(ue(s,M))):$()),L.keepError||(pt(r.errors,M),d.isValid&&y()),m.state.next({...r}))},ge=(M,L={})=>{const U=M?Bt(M):s,W=Bt(U),H=cr(M),Y=H?s:W;if(L.keepDefaultValues||(s=U),!L.keepValues){if(L.keepDirtyValues){const de=new Set([...l.mount,...Object.keys(Ho(s,i))]);for(const Ne of Array.from(de))ue(r.dirtyFields,Ne)?Be(Y,Ne,ue(i,Ne)):Q(Ne,ue(Y,Ne))}else{if(V0&&ut(M))for(const de of l.mount){const Ne=ue(n,de);if(Ne&&Ne._f){const Oe=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(id(Oe)){const Xt=Oe.closest("form");if(Xt){Xt.reset();break}}}}for(const de of l.mount)Q(de,ue(Y,de))}i=Bt(Y),m.array.next({values:{...Y}}),m.state.next({values:{...Y}})}l={mount:L.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!L.keepIsValid||!!L.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:H?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!Ls(M,s)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:H?{}:L.keepDirtyValues?L.keepDefaultValues&&i?Ho(s,i):r.dirtyFields:L.keepDefaultValues&&M?Ho(s,M):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ee=(M,L)=>ge(yn(M)?M(i):M,L),ze=(M,L={})=>{const U=ue(n,M),W=U&&U._f;if(W){const H=W.refs?W.refs[0]:W.ref;H.focus&&(H.focus(),L.shouldSelect&&yn(H.select)&&H.select())}},ot=M=>{r={...r,...M}},se={control:{register:B,unregister:he,getFieldState:R,handleSubmit:G,setError:Z,_subscribe:ne,_runSchema:S,_focusError:ee,_getWatch:P,_getDirty:$,_setValid:y,_setFieldArray:v,_setDisabledField:rt,_setErrors:w,_getFieldArray:z,_reset:ge,_resetDefaultValues:()=>yn(t.defaultValues)&&t.defaultValues().then(M=>{Ee(M,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:le,_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return l},set _names(M){l=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:J,trigger:C,register:B,handleSubmit:G,watch:re,setValue:Q,getValues:A,reset:Ee,resetField:et,clearErrors:F,unregister:he,setError:Z,setFocus:ze,getFieldState:R};return{...se,formControl:se}}function Gi(e={}){const t=oe.useRef(void 0),r=oe.useRef(void 0),[n,s]=oe.useState({isDirty:!1,isValidating:!1,isLoading:yn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:yn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:ZM(e),formState:n},e.formControl&&e.defaultValues&&!yn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,LM(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),oe.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),oe.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),oe.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),oe.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),oe.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),oe.useEffect(()=>{e.values&&!Ls(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),oe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=zM(n,i),t.current}function Fe({type:e,title:t,message:r,dismissible:n=!1,onDismiss:s,className:i=""}){const o=()=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-700";case"error":return"bg-red-50 border-red-200 text-red-700";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-700";case"info":return"bg-blue-50 border-blue-200 text-blue-700";default:return"bg-gray-50 border-gray-200 text-gray-700"}},l=()=>{const c="h-5 w-5 flex-shrink-0";switch(e){case"success":return a.jsx(Dt,{className:`${c} text-green-600`});case"error":return a.jsx(tn,{className:`${c} text-red-600`});case"warning":return a.jsx(qn,{className:`${c} text-yellow-600`});case"info":return a.jsx(xb,{className:`${c} text-blue-600`});default:return a.jsx(xb,{className:`${c} text-gray-600`})}};return a.jsx("div",{className:`border rounded-lg p-4 ${o()} ${i}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[l(),a.jsxs("div",{className:"flex-1 min-w-0",children:[t&&a.jsx("h3",{className:"text-sm font-medium mb-1",children:t}),a.jsx("p",{className:"text-sm",children:r})]}),n&&s&&a.jsx("button",{onClick:s,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(Ln,{className:"h-4 w-4"})})]})})}function Lt({size:e="md",text:t,className:r="",fullScreen:n=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},i={sm:"text-sm",md:"text-base",lg:"text-lg"};return n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto mb-4 ${s[e]}`,children:a.jsx(yb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})}):a.jsx("div",{className:`flex items-center justify-center ${r}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto ${t?"mb-4":""} ${s[e]}`,children:a.jsx(yb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})})}function lo({size:e="sm",className:t=""}){const r={sm:"h-4 w-4",md:"h-5 w-5"};return a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-current ${r[e]} ${t}`})}const Fp={disabledRoutes:["/documentation","/features","/signup"],redirectTo:"/login",betaMessage:"Welcome to PBE Journey Beta! Sign in to access the application.",showBetaBadge:!1};function eI(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{login:o,loading:l,developerLog:c}=xe(),u=St(),{register:d,handleSubmit:f,formState:{errors:m}}=Gi(),h=async y=>{const g=`login_${y.email}`;if(!Xv.isAllowed(g,5,3e5)){n("Too many login attempts. Please wait 5 minutes before trying again.");return}if(!A4(y.email).isValid){n("Please enter a valid email address");return}c("Form submitted with data:",y);try{n(""),i(!0),c("Attempting login...");const x=y.email.toLowerCase().trim();await o(x,y.password),Xv.reset(g),Qs.getInstance().logSecurityEvent({type:"login",userId:x,details:{success:!0}}),c("Login successful, navigating to dashboard"),u("/dashboard")}catch(x){console.error("Login error:",x),Qs.getInstance().logSecurityEvent({type:"login",userId:y.email,details:{success:!1,error:x.message}}),n(x.message||"Invalid email or password")}finally{i(!1)}},p=y=>{c("Form submit event triggered"),y.preventDefault(),f(h)(y)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),Fp.showBetaBadge,a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Fp.betaMessage})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:p,children:[r&&a.jsx(Fe,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),m.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:e?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),m.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password.message})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Forgot your password?"})})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Signing in..."})]}):"Sign in"})]})})]})})}function tI(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{forgotPassword:o,loading:l}=xe(),{register:c,handleSubmit:u,formState:{errors:d},getValues:f}=Gi(),m=async h=>{try{n(""),i(!0),await o(h.email),t(!0)}catch(p){console.error("Forgot password error:",p),n(p.message||"Failed to send reset email")}finally{i(!1)}};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Yl,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Check your email"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a password reset link to"," ",a.jsx("span",{className:"font-medium",children:f("email")})]})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-6",children:"Click the link in the email to reset your password. The link will expire in 1 hour."}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Bs,{to:"/login",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-all duration-200",children:"Back to Sign In"}),a.jsx("button",{onClick:()=>t(!1),className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200",children:"Send another email"})]})]})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Forgot your password?"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:u(m),children:[r&&a.jsx(Fe,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your email address",...c("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),d.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Sending reset email..."})]}):"Send reset email"}),a.jsx("div",{className:"text-center",children:a.jsxs(Bs,{to:"/login",className:"flex items-center justify-center space-x-2 text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to sign in"})]})})]})})]})})}function rI(){const e=St(),[t,r]=b.useState(!1),[n,s]=b.useState(!1),[i,o]=b.useState(""),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,m]=b.useState(null),[h,p]=b.useState(null),{resetPasswordWithToken:y,loading:g}=xe(),{register:v,handleSubmit:x,watch:w,formState:{errors:_}}=Gi(),[j,N]=b.useState(!1),[S,E]=b.useState(null),O=w("password");console.log(" ResetPassword Debug:",{error:i,success:l,accessToken:f,resetType:h,loading:g,windowLocationHash:window.location.hash,windowLocationHref:window.location.href}),b.useEffect(()=>{const P=(()=>{const D=window.location.hash;if(!D)return{};const k=new URLSearchParams(D.substring(1)),C={};for(const[A,R]of k.entries())C[A]=R;return C})();if(P.error){console.error("Supabase auth error from hash:",{error:P.error,error_code:P.error_code,error_description:P.error_description}),P.error_code==="otp_expired"?(console.log(" Setting error: OTP expired"),o("The password reset link has expired. Please request a new password reset.")):(console.log(" Setting error: Auth error -",P.error_description||P.error),o(`Authentication error: ${P.error_description||P.error}`));return}const z=P.access_token,I=P.type;if(!z||typeof z!="string"){E("Invalid reset token format"),o("Invalid or malformed reset link. Please request a new password reset.");return}if(z.split(".").length!==3){E("Invalid token structure"),o("Invalid reset link format. Please request a new password reset.");return}if(z.length<50){E("Token too short"),o("Invalid reset link. Please request a new password reset.");return}if(!/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+$/.test(z)){E("Invalid token characters"),o("Invalid reset link. Please request a new password reset.");return}if(I!=="recovery"){E("Invalid token type"),o("Invalid reset link type. Please request a new password reset.");return}m(z),p(I),N(!0)},[]),b.useEffect(()=>{},[]),b.useEffect(()=>{f&&h==="recovery"&&o("")},[f,h]);const T=async $=>{if(!f||!j){o("Invalid reset token");return}if(S){o(S);return}try{o(""),d(!0),await y(f,$.password),c(!0),setTimeout(()=>{e("/login")},3e3)}catch(P){console.error("Reset password error:",P),o(P.message||"Failed to reset password")}finally{d(!1)}};return l?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Dt,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Password reset successful"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Reset your password"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:x(T),children:[i&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[a.jsx("div",{className:"font-bold",children:"Debug Error Display:"}),a.jsx("div",{children:i}),a.jsxs("div",{className:"text-xs mt-2",children:["Access Token: ",f?"Present":"Missing"," | Reset Type: ",h||"Missing"," | Hash: ",window.location.hash||"Empty"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:t?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your new password",...v("password",{required:"Password is required",minLength:{value:12,message:"Password must be at least 12 characters"},validate:$=>{const P=BN($);return P.isValid||P.error}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),_.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Confirm your new password",...v("confirmPassword",{required:"Please confirm your password",validate:$=>$===O||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!n),children:n?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),_.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:u||!f||!j||!!S,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Updating password..."})]}):"Update password"})]})})]})})}function G0(){const{developerLog:e}=xe(),{user:t}=xe(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[d,f]=b.useState(0),m=b.useCallback(async(y=!1)=>{if(!t){n(null),i([]),l(!1);return}const g=Date.now();if(!y&&g-d<5e3){e(" Using cached subscription data");return}try{l(!0),u(null),e(" Fetching subscription data from database...");const{data:v,error:x}=await V.from("stripe_customers").select("customer_id").eq("user_id",t.id).maybeSingle();x&&console.error(" Error checking stripe customer:",x),e(" Stripe customer data:",(v==null?void 0:v.customer_id)||"No customer found");const{data:w,error:_}=await V.from("stripe_user_subscriptions").select("*").maybeSingle();e(" Raw stripe_user_subscriptions data:",w),e(" stripe_user_subscriptions error:",_),_?(console.error(" Error fetching subscription:",_),_.code==="42P01"||_.message.includes("does not exist")?(console.warn(" Stripe subscription view not accessible, user likely has no subscription"),n(null)):(u("Failed to load subscription data"),n(null))):(n(w||null),e(" Subscription data loaded:",w?`Found subscription with price_id: ${w.price_id}`:"No subscription"));const{data:j,error:N}=await V.from("stripe_user_orders").select("*").order("order_date",{ascending:!1}).limit(10);N?(console.error(" Error fetching orders:",N),i([])):(i(j||[]),e(" Orders data loaded:",(j==null?void 0:j.length)||0,"orders"));const{data:S,error:E}=await V.from("subscriptions").select("*").eq("user_id",t.id).maybeSingle();e(" Raw main subscriptions table data:",S),e(" Main subscriptions error:",E),E?console.error(" Error fetching main subscription:",E):(e(" Main subscription data - Plan:",(S==null?void 0:S.plan)||"No plan found",(S==null?void 0:S.status)||"No status"),e(" Full main subscription object:",S)),f(g)}catch(v){console.error(" Error fetching Stripe data:",v),u("Failed to load billing data"),n(null),i([])}finally{l(!1)}},[t,d,e]),h=b.useCallback(()=>(e(" Force refreshing subscription data..."),m(!0)),[m,e]),p=b.useCallback(async()=>{if(!(r!=null&&r.subscription_id))return{success:!1,error:"No active subscription found"};try{e(" Cancelling subscription:",r.subscription_id);const{data:y,error:g}=await V.functions.invoke("stripe-manage-subscription",{body:{action:"cancel",subscription_id:r.subscription_id}});return g?(console.error(" Error cancelling subscription:",g),{success:!1,error:g.message||"Failed to cancel subscription"}):y.success?(e(" Subscription cancelled successfully"),await h(),{success:!0}):(console.error(" Subscription cancellation failed:",y.error),{success:!1,error:y.error||"Failed to cancel subscription"})}catch(y){return console.error(" Error cancelling subscription:",y),{success:!1,error:y.message||"An unexpected error occurred"}}},[r,h,e]);return b.useEffect(()=>{m()},[m]),{subscription:r,orders:s,loading:o,error:c,refetch:m,forceRefresh:h,cancelCurrentSubscription:p}}function nI({toggleSidebar:e}){const{user:t,logout:r}=xe(),n=St(),{subscription:s,loading:i}=G0(),[o,l]=b.useState(0),c=oe.useMemo(()=>i||!(s!=null&&s.price_id)?null:Lp.find(h=>h.priceId===s.price_id)||null,[s,i]);b.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{count:h,error:p}=await V.from("team_invitations").select("*",{count:"exact",head:!0}).eq("email",t.email).eq("status","pending").gt("expires_at",new Date().toISOString());if(p){console.error("Error loading invitations count:",p);return}l(h||0)}catch(h){console.error("Error loading invitations count:",h)}},d=()=>{r(),n("/login")},f=()=>i||!c?null:c.interval==="year"?a.jsx(ds,{className:"h-4 w-4 text-yellow-500"}):a.jsx(Ki,{className:"h-4 w-4 text-blue-500"}),m=()=>i?"Loading...":c?c.name:"Free Plan";return a.jsx("header",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 py-4 ",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"sm:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(hM,{className:"h-5 w-5"})}),a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:[a.jsx(nM,{className:"h-5 w-5"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:o>9?"9+":o})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsxs("div",{className:"hidden sm:flex flex-col text-right",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),Fp.showBetaBadge,!i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[f(),a.jsx("span",{className:"text-xs text-gray-500",children:m()})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-gray-300 border-t-gray-600"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 cursor-pointer",children:a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center",children:a.jsx($p,{className:"h-4 w-4 text-white"})})}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[a.jsxs("button",{onClick:()=>n("/settings"),className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[a.jsx(Qa,{className:"h-4 w-4"}),a.jsx("span",{children:"Settings"})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:d,className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Ip,{className:"h-4 w-4"}),a.jsx("span",{children:"Sign Out"})]})]})]})]})]})]})})}function sI({isSidebarOpen:e,toggleSidebar:t}){const r=ys(),{user:n,logout:s}=xe(),[i,o]=b.useState(!1),l=(n==null?void 0:n.role)==="admin",c=(n==null?void 0:n.teamRole)==="owner"||(n==null?void 0:n.teamRole)==="admin",u=()=>{o(!i)},d=()=>{s()},f=[{name:"Dashboard",icon:lM,path:"/dashboard",show:!0},{name:"Quiz Center",icon:ke,path:"/quiz",show:!0},{name:"Study Schedule",icon:Yt,path:"/schedule",show:!0},{name:"Achievements",icon:mr,path:"/achievements",show:!0},{name:"Leaderboard",icon:Nt,path:"/leaderboard",show:!!(n!=null&&n.teamId)},{name:"Team",icon:He,path:"/team",show:c},{name:"Analytics",icon:sr,path:"/analytics",show:c},{name:"Billing",icon:sd,path:"/billing",show:(n==null?void 0:n.teamRole)==="owner"}],m=[{name:"Admin Panel",icon:bM,path:"/admin",show:l},{name:"User Management",icon:He,path:"/admin/users",show:l},{name:"Question Management",icon:ke,path:"/admin/questions",show:l},{name:"Plan Management",icon:vS,path:"/admin/plans",show:l},{name:"Achievement Management",icon:mr,path:"/admin/achievements",show:l},{name:"Settings",icon:Qa,path:"/settings",show:l}],h=p=>r.pathname===p;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transition-transform duration-300 transform ${e?"translate-x-0":"-translate-x-full"} sm:hidden`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-8 mb-2 px-3",children:a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"})}),a.jsx("nav",{className:"space-y-1",children:m.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:d,className:"flex items-center space-x-3 px-3 py-2 w-full text-left rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Ip,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign Out"})]})})]})]}),a.jsxs("div",{className:`hidden sm:flex flex-col h-full ${i?"w-20":"w-64"} bg-white border-r border-gray-200 transition-all duration-300`,children:[a.jsxs("div",{className:`flex items-center ${i?"justify-center":"justify-between"} h-16 px-4 border-b border-gray-200`,children:[!i&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),i&&a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("button",{onClick:u,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:i?a.jsx(F0,{className:"h-5 w-5"}):a.jsx(yS,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`mt-8 mb-2 ${i?"text-center":"px-3"}`,children:[!i&&a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"}),i&&a.jsx("div",{className:"h-px bg-gray-200 my-2"})]}),a.jsx("nav",{className:"space-y-1",children:m.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("button",{onClick:d,className:`flex items-center rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200 ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2 w-full text-left"}`,title:i?"Sign Out":"",children:[a.jsx(Ip,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:"Sign Out"})]})})]})]})}function pe({children:e,hideHeaderAndSidebar:t=!1}){const[r,n]=b.useState(!1),s=()=>{n(!r)};return t?a.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(sI,{isSidebarOpen:r,toggleSidebar:s}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 sm:hidden",onClick:s}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(nI,{toggleSidebar:s}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:e})]})]})}function Ke({title:e,value:t,subtitle:r,icon:n,iconColor:s="text-indigo-600",trend:i,className:o=""}){const l=()=>{if(!i)return"";switch(i.type){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}};return a.jsxs("div",{className:`bg-white p-4 sm:p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 ${o}`,children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(n,{className:`h-5 w-5 sm:h-6 sm:w-6 ${s}`})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:e}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:t}),r&&a.jsx("p",{className:"text-xs text-gray-500",children:r})]})]}),i&&a.jsx("div",{className:"mt-3 sm:mt-4",children:a.jsx("span",{className:`text-xs sm:text-sm font-medium ${l()}`,children:i.value})})]})}function Y0(){const{user:e,developerLog:t}=xe(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),m=b.useCallback(async()=>{if(!e){t(" useGamificationData: No user authenticated, skipping data fetch"),n(null),i([]),l([]),u(!1);return}t(" useGamificationData: Starting gamification data fetch for user:",e.id),u(!0),f(null);try{const{data:g,error:v}=await V.from("user_stats").select("*").eq("user_id",e.id).maybeSingle();if(v)throw v;t(" useGamificationData: User stats fetched (raw):",g);const{data:x,error:w}=await V.from("quiz_sessions").select("completed_at").eq("user_id",e.id).eq("status","completed").order("completed_at",{ascending:!1});if(w)throw w;const _=xf(x||[]);t(" useGamificationData: Calculated current streak:",_);const j={...g||{user_id:e.id,total_xp:0,current_level:1,longest_streak:0},current_streak:_};n(j),t(" useGamificationData: Final user stats:",j);const{data:N,error:S}=await V.from("user_achievements").select("*").eq("user_id",e.id);if(S)throw S;i(N||[]),t(" useGamificationData: User achievements fetched:",(N==null?void 0:N.length)||0);const{data:E,error:O}=await V.from("achievements").select("*");if(O)throw O;l(E||[]),t(" useGamificationData: All achievements fetched:",(E==null?void 0:E.length)||0)}catch(g){console.error(" useGamificationData: Error fetching gamification data:",g),f(g.message||"Failed to load gamification data"),n(null),i([]),l([])}finally{u(!1)}},[e,t]),h=b.useCallback(async g=>{try{t(" Creating new achievement...");const{data:v,error:x}=await V.from("achievements").insert([g]).select().single();if(x)throw t(" Error creating achievement:",x),x;return t(" Achievement created successfully:",v),l(w=>[...w,v]),v}catch(v){throw t(" Error creating achievement:",v),v}},[t]),p=b.useCallback(async(g,v)=>{try{t(" Updating achievement:",g);const{data:x,error:w}=await V.from("achievements").update(v).eq("id",g).select().single();if(w)throw t(" Error updating achievement:",w),w;return t(" Achievement updated successfully:",x),l(_=>_.map(j=>j.id===g?x:j)),x}catch(x){throw t(" Error updating achievement:",x),x}},[t]),y=b.useCallback(async g=>{try{t(" Deleting achievement:",g);const{error:v}=await V.from("achievements").delete().eq("id",g);if(v)throw t(" Error deleting achievement:",v),v;t(" Achievement deleted successfully"),l(x=>x.filter(w=>w.id!==g))}catch(v){throw t(" Error deleting achievement:",v),v}},[t]);return b.useEffect(()=>{m()},[m]),{userStats:r,userAchievements:s,achievements:o,loading:c,error:d,refreshGamificationData:m,createAchievement:h,updateAchievement:p,deleteAchievement:y}}function X0(){const{user:e,developerLog:t}=xe(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),d=x=>{t(" ensureStudyItemsArray: Raw assignment from DB:",x);const w={...x,date:typeof x.date=="string"?ES(x.date):x.date,study_items:x.study_items||[]};return t(" ensureStudyItemsArray: Normalized assignment:",w),w},f=d,m=b.useCallback(async()=>{if(e!=null&&e.id)try{t(" Loading team members for user:",e.id);const{data:x,error:w}=await V.rpc("get_team_members_for_user",{p_user_id:e.id});if(w){console.error(" Error loading team members:",w),u("Failed to load team members");return}if(t(" Team members function result:",x),!(x!=null&&x.success)){console.error(" Team members function failed:",x==null?void 0:x.error),u("Failed to load team members");return}const _=x.team_members||[];t(" Team members loaded:",_),i(_)}catch(x){console.error(" Error loading team members:",x),u("Failed to load team members")}},[e==null?void 0:e.id,t]),h=b.useCallback(async()=>{if(e!=null&&e.teamId)try{t(" Loading study assignments for team:",e.teamId);const{data:x,error:w}=await V.from("study_assignments").select("*").eq("team_id",e.teamId).order("date",{ascending:!0});if(w){console.error(" Error loading assignments:",w),u("Failed to load assignments");return}t(" Raw assignments data from DB:",x);const _=[];for(const j of x||[]){const N=d(j);if(t(" Processing assignment:",{id:j.id,completed:j.completed,date:j.date,study_items:j.study_items}),j.completed)try{t(" Fetching quiz session data for completed assignment:",j.id);const{data:S,error:E}=await V.from("quiz_sessions").select("id, total_points, max_points, questions, estimated_minutes").eq("assignment_id",j.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!E&&S?(t(" Found quiz session data for assignment:",j.id,S),N.quiz_session_id=S.id,N.total_points_earned=S.total_points,N.max_points_possible=S.max_points,N.total_questions_answered=Array.isArray(S.questions)?S.questions.length:0,N.total_time_spent_minutes=S.estimated_minutes,t(" Assignment populated with quiz data:",{assignmentId:j.id,quiz_session_id:N.quiz_session_id,total_points_earned:N.total_points_earned,max_points_possible:N.max_points_possible,total_questions_answered:N.total_questions_answered,total_time_spent_minutes:N.total_time_spent_minutes})):t(" No quiz session found for completed assignment:",j.id,E)}catch(S){t(" Error fetching quiz session for assignment:",j.id,S)}else t(" Assignment not completed, skipping quiz session fetch:",j.id);_.push(N)}t(" Transformed assignments:",_),n(_)}catch(x){console.error(" Error loading assignments:",x),u("Failed to load assignments")}},[e==null?void 0:e.teamId,t]),p=b.useCallback(async x=>{try{l(!0),u(null),t(" Saving assignment:",x);const w={id:x.id,user_id:x.user_id,team_id:x.team_id,date:TM(x.date),study_items:x.study_items,description:x.description,created_by:x.created_by||(e==null?void 0:e.id),completed:x.completed||!1,completed_at:x.completed_at},{data:_}=await V.from("study_assignments").select("id").eq("id",x.id).maybeSingle();if(_){t(" Updating existing assignment");const{error:j}=await V.from("study_assignments").update({study_items:w.study_items,description:w.description,completed:w.completed,completed_at:w.completed_at,updated_at:new Date().toISOString()}).eq("id",x.id);if(j)throw console.error(" Error updating assignment:",j),j;n(N=>N.map(S=>S.id===x.id?x:S))}else{t(" Creating new assignment");const{error:j}=await V.from("study_assignments").insert([w]);if(j)throw console.error(" Error creating assignment:",j),j;n(N=>[...N,x])}t(" Assignment saved successfully")}catch(w){throw console.error(" Error saving assignment:",w),u("Failed to save assignment"),w}finally{l(!1)}},[e==null?void 0:e.id,t]),y=b.useCallback(async x=>{try{l(!0),u(null),t(" Deleting assignment:",x);const{error:w}=await V.from("study_assignments").delete().eq("id",x);if(w)throw console.error(" Error deleting assignment:",w),w;n(_=>_.filter(j=>j.id!==x)),t(" Assignment deleted successfully")}catch(w){throw console.error(" Error deleting assignment:",w),u("Failed to delete assignment"),w}finally{l(!1)}},[t]),g=b.useCallback(async x=>{if(!(e!=null&&e.teamId)||!x)return null;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(x))throw new Error("Invalid assignment ID format");try{t(" Loading assignment by ID:",x);const{data:_,error:j}=await V.from("study_assignments").select("*").eq("id",x).eq("team_id",e.teamId).maybeSingle();if(j)throw console.error(" Error loading assignment:",j),j;if(!_)return console.warn(" Assignment not found:",x),null;if(_.team_id!==e.teamId)throw new Error("Unauthorized access to assignment");if(!(_.user_id===e.id||e.teamRole==="owner"||e.teamRole==="admin"))throw new Error("Insufficient permissions to view assignment");return t(" Assignment loaded:",_),d(_)}catch(_){throw console.error(" Error loading assignment by ID:",_),_}},[e==null?void 0:e.teamId,t]),v=b.useCallback(async()=>{if(!(e!=null&&e.teamId)){i([]),n([]);return}try{l(!0),u(null),await Promise.all([m(),h()])}catch(x){console.error(" Error loading data:",x),u("Failed to load data")}finally{l(!1)}},[e==null?void 0:e.teamId,m,h]);return b.useEffect(()=>{v()},[v]),{assignments:r,teamMembers:s,loading:o,error:c,normalizeAssignment:f,saveAssignment:p,deleteAssignment:y,getAssignmentById:g,loadAssignments:v}}function sn({columns:e,data:t,emptyState:r,className:n="",loading:s=!1,onRowClick:i,getRowClassName:o}){const l=t||[],c=r==null?void 0:r.icon;return s?a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:e.map(u=>a.jsx("th",{className:`px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${u.headerClassName||""}`,style:u.width?{width:u.width}:void 0,children:u.header},u.key))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:e.length,className:"px-6 py-12 text-center",children:r?a.jsxs(a.Fragment,{children:[c&&a.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),r.action]}):a.jsx("p",{className:"text-gray-500",children:"No data available"})})}):l.map((u,d)=>a.jsx("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${i?"cursor-pointer":""} ${o?o(u,d):""}`,onClick:()=>i==null?void 0:i(u,d),children:e.map(f=>a.jsx("td",{className:`px-4 sm:px-6 py-4 ${f.className||""}`,children:f.render?f.render(u,d):u[f.key]},f.key))},d))})]})})})}function LS({allAssignments:e,loading:t,user:r,questions:n,getSessionForAssignment:s,developerLog:i}){var f;const o=St(),l=b.useMemo(()=>{const m=Wr(new Date),h=new Date(m);h.setDate(m.getDate()-m.getDay());const p=new Date(h);return p.setDate(h.getDate()+6),e.filter(y=>{const g=Wr(y.date);return g>=h&&g<=p}).sort((y,g)=>y.date.getTime()-g.date.getTime())},[e]),c=m=>{o(`/quiz/study-assignment/${m.id}`,{state:{selectedStudyItems:m.study_items}})},u=oe.useCallback(m=>{var h;return NM(m,n,((h=r==null?void 0:r.subscription)==null?void 0:h.plan)||"free",i)},[n,(f=r==null?void 0:r.subscription)==null?void 0:f.plan,i]),d=oe.useMemo(()=>[{key:"day",header:"Day",render:m=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:oo(m.date,{weekday:"long"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:oo(m.date,{month:"short",day:"numeric"})})]}),className:"whitespace-nowrap"},{key:"book_chapters",header:"Book and Chapters",render:m=>a.jsxs("div",{className:"text-sm text-gray-900 break-words",children:[ao(m.study_items,n)," (",u(m.study_items)," Qs)"]})},{key:"questions_count",header:"Questions",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_questions_answered!==void 0?(i==null||i(" Completed assignment questions data:",{assignmentId:m.id,total_questions_answered:m.total_questions_answered,completed:m.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:m.total_questions_answered})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:u(m.study_items)})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"score",header:"Score",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_points_earned!==void 0&&m.max_points_possible!==void 0?(()=>{i==null||i(" Completed assignment score data:",{assignmentId:m.id,total_points_earned:m.total_points_earned,max_points_possible:m.max_points_possible,completed:m.completed});const h=m.max_points_possible>0?Math.round(m.total_points_earned/m.max_points_possible*100):0;return a.jsxs("div",{className:`font-bold text-lg ${h>=90?"text-green-600":h>=70?"text-blue-600":"text-red-600"}`,children:[h,"%"]})})():a.jsx("span",{className:"text-gray-400",children:""})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"time",header:"Time",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_time_spent_minutes!==void 0?(i==null||i(" Completed assignment time data:",{assignmentId:m.id,total_time_spent_minutes:m.total_time_spent_minutes,completed:m.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[m.total_time_spent_minutes,"m"]})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-gray-400",children:""})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"status",header:"Status",render:m=>a.jsx("div",{className:"flex items-center space-x-2",children:m.completed?a.jsxs(a.Fragment,{children:[a.jsx(Dt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Completed"}),m.total_points_earned!==void 0&&m.max_points_possible!==void 0&&a.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(m.total_points_earned/m.max_points_possible*100),"% score)"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Me,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"}),(()=>{const h=Wr(new Date),y=Wr(m.date).getTime()-h.getTime(),g=Math.ceil(y/(1e3*60*60*24));return g===0?a.jsx("span",{className:"text-xs text-gray-500",children:"(Due Today)"}):g===1?a.jsx("span",{className:"text-xs text-gray-500",children:"(Due Tomorrow)"}):g>1?a.jsxs("span",{className:"text-xs text-gray-500",children:["(Due in ",g," days)"]}):a.jsx("span",{className:"text-xs text-red-500",children:"(Overdue)"})})()]})}),className:"hidden md:table-cell",headerClassName:"hidden md:table-cell"},{key:"start",header:"Start",render:m=>a.jsx("div",{className:"text-center",children:m.completed?a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Completed"}):r?(()=>{const h=s(m.id,r.id);return h?a.jsx("button",{onClick:()=>o(`/quiz/runner/${h.id}`),className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition-colors duration-200",children:"Resume"}):a.jsx("button",{onClick:()=>c(m),className:"bg-indigo-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-indigo-700 transition-colors duration-200",children:"Start"})})():null}),className:"text-center",headerClassName:"text-center"}],[u,r,s,o,c,i]);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Weekly Schedule"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Study assignments for this week"})]})]}),a.jsx(sn,{columns:d,data:l,loading:t,emptyState:{icon:Yt,title:"No Assignments This Week",description:"You don't have any study assignments scheduled for this week. Check your full schedule or contact your team admin."}})]})}function iI(){const{user:e,developerLog:t}=xe();oe.useEffect(()=>{var y,g;t(" Dashboard: Component loaded with user:",e),t(" Dashboard: User subscription plan:",(y=e==null?void 0:e.subscription)==null?void 0:y.plan),t(" Dashboard: User plan settings:",e==null?void 0:e.planSettings),t(" Dashboard: User question tier access:",(g=e==null?void 0:e.planSettings)==null?void 0:g.question_tier_access)},[e,t]);const{userStats:r,userAchievements:n,achievements:s,loading:i,error:o}=Y0(),{assignments:l,loading:c}=X0(),{getSessionForAssignment:u}=aa(),{questions:d,loading:f}=ia();oe.useEffect(()=>{if(t(" Dashboard: Questions loaded from context:",d.length,"total questions"),t(" Dashboard: Questions loading state:",f),d.length>0){const y=d.reduce((v,x)=>(v[x.tier]=(v[x.tier]||0)+1,v),{});t(" Dashboard: Questions by tier:",y);const g=d.reduce((v,x)=>(v[x.book_of_bible]=(v[x.book_of_bible]||0)+1,v),{});t(" Dashboard: Questions by book:",g)}},[d,f,t]);const m=St();oe.useEffect(()=>{var y;t("*** Dashboard render: questions.length =",d.length),t("Dashboard render: questions.length =",d.length),t("Dashboard render: user subscription plan =",(y=e==null?void 0:e.subscription)==null?void 0:y.plan),t("Dashboard render: user plan settings =",e==null?void 0:e.planSettings)},[d,e,t]);const p=r?AM(r.total_xp,r.current_level):{current:0,needed:1e3,percentage:0};return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[f&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading questions..."})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your progress and recent activity."})]}),!f&&a.jsx("div",{className:"mb-8",children:a.jsx(LS,{allAssignments:l.filter(y=>y.user_id===(e==null?void 0:e.id)),loading:c,user:e,questions:d,getSessionForAssignment:u,developerLog:t})}),!i&&!o&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Progress"}),r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[a.jsx(Ke,{title:"Level",value:r.current_level,subtitle:`${r.total_xp.toLocaleString()} total XP`,icon:Ki,iconColor:"text-yellow-600"}),a.jsx(Ke,{title:"Longest Streak",value:`${r.longest_streak} days`,subtitle:"consecutive study days",icon:Pn,iconColor:"text-orange-600"}),a.jsx(Ke,{title:"Current Streak",value:`${r.current_streak||0} day${(r.current_streak||0)!==1?"s":""}`,subtitle:"consecutive study days",icon:no,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Achievements",value:n.length,subtitle:"unlocked",icon:mr,iconColor:"text-purple-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Level Progress"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Level ",r.current_level," (",Math.round(p.percentage),"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${p.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:[r.total_xp.toLocaleString()," XP"]}),a.jsxs("span",{children:[p.needed," XP to Level ",r.current_level+1]})]})]})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx(Nt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progress Yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Complete your first quiz to start tracking your progress, XP, and study streak!"}),a.jsx("button",{onClick:()=>m("/quiz"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[!i&&!o&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Achievements"}),a.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((y,g)=>{const v=s.find(x=>x.id===y.achievement_id);return a.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("div",{className:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Nt,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(v==null?void 0:v.name)||"Achievement Unlocked"}),(v==null?void 0:v.description)&&a.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.description}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(y.unlocked_at).toLocaleDateString()})]})]},`${y.user_id}-${y.achievement_id}`)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Bs,{to:"/quiz",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Start Quiz"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Begin a new quiz session"})]}),a.jsx(mb,{className:"h-4 w-4 text-gray-400"})]})}),a.jsx(Bs,{to:"/schedule",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"View Schedule"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Check your study assignments"})]}),a.jsx(mb,{className:"h-4 w-4 text-gray-400"})]})})]})]})]})]})})}function aI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function oI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function lI(e){return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function cI(e){return(e==null?void 0:e.role)==="admin"}function uI(){const{user:e,updateUserProfile:t,updatePassword:r,loading:n,isDeveloperMode:s,toggleDeveloperMode:i}=xe(),[o,l]=b.useState("profile"),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[m,h]=b.useState(null),[p,y]=b.useState(null),[g,v]=b.useState(null),[x,w]=b.useState(null),_=Gi({defaultValues:{name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||""}});oe.useEffect(()=>{e&&_.reset({name:e.name,email:e.email})},[e,_]);const j=Gi(),N=async T=>{try{y(null),h(null),await t({name:T.name,email:T.email}),h("Profile updated successfully!"),setTimeout(()=>h(null),3e3)}catch($){console.error("Error updating profile:",$),y($.message||"Failed to update profile")}},S=async T=>{try{w(null),v(null),await r(T.newPassword),v("Password updated successfully!"),j.reset(),setTimeout(()=>v(null),3e3)}catch($){console.error("Error updating password:",$),w($.message||"Failed to update password")}},O=[{id:"profile",name:"Profile",icon:$p},{id:"security",name:"Security",icon:_n},{id:"developer",name:"Developer",icon:Qa}].filter(T=>T.id==="developer"?cI(e):!0);return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences."})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:O.map(T=>a.jsxs("button",{onClick:()=>l(T.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o===T.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(T.icon,{className:"h-4 w-4"}),a.jsx("span",{children:T.name})]},T.id))})}),a.jsxs("div",{className:"p-6",children:[o==="profile"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),a.jsxs("form",{onSubmit:_.handleSubmit(N),className:"space-y-6",children:[m&&a.jsx(Fe,{type:"success",message:m,className:"mb-6"}),p&&a.jsx(Fe,{type:"error",message:p,className:"mb-6"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:"h-20 w-20 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx($p,{className:"h-8 w-8 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Change Avatar"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"JPG, GIF or PNG. 1MB max."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("name",{required:"Name is required"})}),_.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nickname (Public Display Name)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("nickname"),placeholder:"Your public display name for leaderboards"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be shown on leaderboards instead of your full name. Leave empty to use your full name."}),_.formState.errors.nickname&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.nickname.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("email",{required:"Email is required"})}),_.formState.errors.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.email.message})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(lo,{}),a.jsx(B0,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Saving...":"Save Changes"})]})})]})]}),o==="security"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Security Settings"}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(_n,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]})]}),a.jsx("button",{className:"mt-3 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Enable 2FA"})]}),g&&a.jsx(Fe,{type:"success",message:g}),x&&a.jsx(Fe,{type:"error",message:x}),a.jsxs("form",{onSubmit:j.handleSubmit(S),className:"space-y-6",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Change Password"}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(_n,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Password Security"}),a.jsx("p",{children:"Since you're already authenticated, you can directly set a new password without entering your current one."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("newPassword",{required:"New password is required",minLength:{value:12,message:"Password must be at least 12 characters"},validate:T=>{const $=BN(T);return $.isValid||$.error}})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>u(!c),children:c?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.newPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.newPassword.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("confirmPassword",{required:"Please confirm your password",validate:T=>T===j.watch("newPassword")||"The passwords do not match"})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>f(!d),children:d?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.confirmPassword.message})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(lo,{}),a.jsx(bS,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Updating...":"Update Password"})]})})]})]})]}),o==="developer"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Developer Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Developer Mode"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable detailed console logging for debugging purposes. This will show internal application logs in the browser console."})]}),a.jsx("button",{onClick:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${s?"bg-indigo-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${s?"translate-x-6":"translate-x-1"}`})})]}),s&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium",children:"Developer Mode Active"}),a.jsx("p",{children:"Console logging is now enabled. Open your browser's developer tools (F12) to view detailed logs."})]})]})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"About Developer Mode"}),a.jsxs("ul",{className:"mt-2 space-y-1 text-blue-700",children:[a.jsx("li",{children:" Shows authentication flow logs"}),a.jsx("li",{children:" Displays API request/response details"}),a.jsx("li",{children:" Logs component state changes"}),a.jsx("li",{children:" Helps troubleshoot application issues"}),a.jsx("li",{children:" Setting persists across browser sessions"})]})]})]})})]})]})]})]})]})})}function dI(e){switch(e){case"owner":return"";case"admin":return"";default:return""}}function fI(e){switch(e){case"owner":return ds;case"admin":return _n;default:return He}}function RS(){const{user:e,logout:t,developerLog:r}=xe(),[n,s]=b.useState([]),[i,o]=b.useState([]),[l,c]=b.useState(!1),[u,d]=b.useState(null),f=b.useCallback(()=>aI(e),[e]),m=b.useCallback(async(j,N,S,E)=>{r(" Processing member:",{memberId:j,userId:j,canViewDetails:E});try{const{data:O,error:T}=await V.rpc("get_team_member_profile",{p_user_id:j,p_team_id:N});if(T){console.warn("get_team_member_profile function not available, falling back to basic approach:",T);const{data:$,error:P}=await V.rpc("get_user_name_by_id",{p_user_id:j});return P&&console.warn(`Error getting name for user ${j}:`,P),j===(S==null?void 0:S.id)?{id:j,name:S.name||$||"Unknown User",email:S.email||"Email not available",lastActive:"Recently"}:{id:j,name:$||"Unknown User",email:E?"Run MANUAL_DB_FUNCTION.sql to enable email access":"Email restricted",lastActive:"Recently"}}else{if(O&&typeof O=="object"&&!O.error)return{id:O.id||j,name:O.name||"Unknown User",email:O.email||"Email not available",lastActive:"Recently"};{console.warn("get_team_member_profile returned error:",O);const{data:$,error:P}=await V.rpc("get_user_name_by_id",{p_user_id:j});return{id:j,name:j===(S==null?void 0:S.id)?S.name:$||"Unknown User",email:j===(S==null?void 0:S.id)?S.email:E?"Contact admin for email access":"Email restricted",lastActive:"Recently"}}}}catch{return{id:j,name:j===(S==null?void 0:S.id)?S.name:"Team Member",email:j===(S==null?void 0:S.id)?S.email:"Email restricted",lastActive:"Recently"}}},[r]),h=b.useCallback(async()=>{if(e!=null&&e.teamId)try{c(!0),d(null);const{data:j,error:N}=await V.from("team_members").select(`
          id,
          user_id,
          team_id,
          role,
          status,
          joined_at
        `).eq("team_id",e.teamId);if(N){console.error("Error loading team members:",N),d("Failed to load team members");return}r(" Raw team members data:",{teamId:e.teamId,membersCount:(j==null?void 0:j.length)||0,membersData:j});const S=[];r(" Starting member transformation. Processing",(j==null?void 0:j.length)||0,"members");for(const E of j||[]){const O=await m(E.user_id,e.teamId,e,f());S.push({id:E.id,userId:E.user_id,teamId:E.team_id,role:E.role,status:E.status,joinedAt:E.joined_at,user:O})}if(r(" Final transformed members:",{originalCount:(j==null?void 0:j.length)||0,transformedCount:S.length,members:S.map(E=>({id:E.id,userId:E.userId,role:E.role,status:E.status,userName:E.user.name,userEmail:E.user.email}))}),s(S),f()){const{data:E,error:O}=await V.from("team_invitations").select("*").eq("team_id",e.teamId).eq("status","pending").gt("expires_at",new Date().toISOString());if(O)console.error("Error loading team invitations:",O);else{const T=(E||[]).map($=>({id:$.id,teamId:$.team_id,email:$.email,role:$.role,invitedBy:$.invited_by,token:$.token,status:$.status,expiresAt:$.expires_at,createdAt:$.created_at}));o(T)}}else o([])}catch(j){console.error("Error loading team data:",j),d("Failed to load team data")}finally{c(!1)}},[e==null?void 0:e.teamId,e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.email,f,m,r]),p=b.useCallback(async j=>{try{c(!0),d(null),r(" Suspending team member:",j);const N=n.find(E=>E.id===j);if(!N)return{success:!1,error:"Member not found"};if(N.role==="owner")return{success:!1,error:"Cannot suspend the team owner"};const{error:S}=await V.from("team_members").update({status:"suspended",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error(" Error suspending member:",S),{success:!1,error:"Failed to suspend member"}):(r(" Member suspended successfully"),N.userId===(e==null?void 0:e.id)&&(r(" User suspended themselves, logging out..."),setTimeout(()=>{t()},1e3)),await h(),{success:!0})}catch(N){return console.error(" Error suspending member:",N),{success:!1,error:"Failed to suspend member"}}finally{c(!1)}},[n,e==null?void 0:e.id,t,h,r]),y=b.useCallback(async j=>{try{if(c(!0),d(null),r(" Reinstating team member:",j),!n.find(E=>E.id===j))return{success:!1,error:"Member not found"};const{error:S}=await V.from("team_members").update({status:"active",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error(" Error reinstating member:",S),{success:!1,error:"Failed to reinstate member"}):(r(" Member reinstated successfully"),await h(),{success:!0})}catch(N){return console.error(" Error reinstating member:",N),{success:!1,error:"Failed to reinstate member"}}finally{c(!1)}},[n,h,r]),g=b.useCallback(async(j,N)=>{if(!(e!=null&&e.teamId)||!j.trim())return{success:!1,error:"Please enter a valid email address"};try{c(!0),d(null);const{data:S,error:E}=await V.rpc("invite_team_member",{p_team_id:e.teamId,p_email:j.trim(),p_role:N});if(E)return console.error("Error calling invite_team_member function:",E),{success:!1,error:"Failed to send invitation. Please try again."};if(!S.success)return{success:!1,error:S.error||"Failed to send invitation"};r(" Invitation created successfully:",S);try{await V.functions.invoke("send-email-brevo",{body:{to:j.trim(),subject:`You're invited to join ${e.teamName||"a team"} on PBE Journey!`,htmlContent:`
              <p>Hello,</p>
              <p>You have been invited by ${e.name} to join their team on PBE Journey as a ${N}.</p>
              <p>Click the link below to accept your invitation:</p>
              <p><a href="${S.invitation_link}">${S.invitation_link}</a></p>
              <p>This link will expire in 7 days.</p>
              <p>Best regards,<br>The PBE Journey Team</p>
            `}})}catch(O){console.error(" Failed to send invitation email via Brevo:",O)}return await h(),{success:!0,invitationLink:S.invitation_link}}catch(S){return console.error(" Error inviting member:",S),{success:!1,error:"An unexpected error occurred. Please try again."}}finally{c(!1)}},[e==null?void 0:e.teamId,h,r]),v=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await V.from("team_invitations").update({expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString(),updated_at:new Date().toISOString()}).eq("id",j);return N?(console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}):(await h(),{success:!0})}catch(N){return console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}}finally{c(!1)}},[h]),x=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await V.from("team_invitations").delete().eq("id",j);return N?(console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}):(await h(),{success:!0})}catch(N){return console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}}finally{c(!1)}},[h]),w=b.useCallback(j=>`${window.location.origin}/invitations/accept?token=${j}`,[]),_={totalMembers:n.length,admins:n.filter(j=>j.role==="admin"||j.role==="owner").length,pendingInvites:i.length,activeMembers:n.filter(j=>j.status==="active").length};return b.useEffect(()=>{e!=null&&e.teamId?h():(s([]),o([]))},[e==null?void 0:e.teamId,h]),{teamMembers:n,teamInvitations:i,teamStats:_,loading:l,error:u,setError:d,inviteMember:g,suspendMember:p,reinstateMember:y,resendInvitation:v,cancelInvitation:x,generateInvitationLink:w,getRoleIcon:dI,loadTeamData:h}}function hI({teamId:e,userId:t,startDate:r,endDate:n}){const{developerLog:s}=xe(),[i,o]=b.useState(null),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){s(" useAnalyticsData: No teamId provided, skipping data fetch"),c(!1),o(null);return}s(" useAnalyticsData: Starting data fetch with params:",{teamId:e,userId:t,startDate:r,endDate:n}),c(!0),d(null);try{let m=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes").eq("team_id",e).eq("status","completed");if(t?(s(" useAnalyticsData: Filtering by userId:",t),m=m.eq("user_id",t)):s(" useAnalyticsData: Fetching data for all team members"),r&&(m=m.gte("completed_at",r.toISOString())),n){const P=new Date(n);P.setDate(P.getDate()+1),m=m.lt("completed_at",P.toISOString())}const{data:h,error:p}=await m;if(p)throw p;s(" useAnalyticsData: Fetched sessions for analytics:",h),s(" useAnalyticsData: Sessions fetched:",(h==null?void 0:h.length)||0,"sessions"),s(" useAnalyticsData: Sessions data:",h);const y=(h==null?void 0:h.map(P=>P.id))||[];s(" useAnalyticsData: Completed session IDs for analytics:",y),s(" useAnalyticsData: Completed session IDs:",y);let g=V.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, answered_at");if(y.length>0)g=g.in("quiz_session_id",y);else{s(" useAnalyticsData: No completed sessions found, returning empty data"),o({totalQuizzesCompleted:0,totalQuestionsAnswered:0,averageScore:0,totalTimeSpentMinutes:0,studyStreak:0,totalPointsEarned:0,totalPossiblePoints:0}),c(!1);return}if(t&&(g=g.eq("user_id",t)),r&&(g=g.gte("answered_at",r.toISOString())),n){const P=new Date(n);P.setDate(P.getDate()+1),g=g.lt("answered_at",P.toISOString())}const{data:v,error:x}=await g;if(x)throw x;s(" useAnalyticsData: Fetched question logs for analytics:",v),s(" useAnalyticsData: Question logs fetched:",(v==null?void 0:v.length)||0,"logs"),s(" useAnalyticsData: Question logs data:",v);const w=(h==null?void 0:h.length)||0,_=(v==null?void 0:v.length)||0;let j=0,N=0;v==null||v.forEach(P=>{j+=P.points_earned,N+=P.total_points_possible});const S=N>0?j/N*100:0,E=(h==null?void 0:h.reduce((P,z)=>P+(z.estimated_minutes||0),0))||0;s(" useAnalyticsData: Study time from estimated_minutes:",E);const O=(h==null?void 0:h.map(P=>({completed_at:P.completed_at})))||[],T=xf(O),$={totalQuizzesCompleted:w,totalQuestionsAnswered:_,averageScore:S,totalTimeSpentMinutes:E,studyStreak:T,totalPointsEarned:j,totalPossiblePoints:N};s(" useAnalyticsData: Calculated analytics data:",$),o($)}catch(m){console.error("Error fetching analytics data:",m),d(m.message||"Failed to load analytics data"),o(null)}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function mI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useKnowledgeGapsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useKnowledgeGapsData: Starting knowledge gaps analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log(" useKnowledgeGapsData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const j=new Date(n);j.setDate(j.getDate()+1),f=f.lt("completed_at",j.toISOString())}const{data:m,error:h}=await f;if(h)throw h;console.log(" useKnowledgeGapsData: Found completed sessions:",(m==null?void 0:m.length)||0);const p=(m==null?void 0:m.map(j=>j.id))||[];if(p.length===0){console.log(" useKnowledgeGapsData: No completed sessions found, returning empty data"),i([]),l(!1);return}let y=V.from("quiz_question_logs").select(`
          points_earned,
          total_points_possible,
          is_correct,
          questions!inner (
            book_of_bible,
            chapter,
            tier
          )
        `).in("quiz_session_id",p);t&&(y=y.eq("user_id",t));const{data:g,error:v}=await y;if(v)throw v;if(console.log(" useKnowledgeGapsData: Question logs fetched:",(g==null?void 0:g.length)||0),!g||g.length===0){i([]),l(!1);return}const x=new Map;g.forEach(j=>{const N=j.questions;if(!N)return;const S=`book:${N.book_of_bible}`;x.has(S)||x.set(S,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"book",book:N.book_of_bible});const E=x.get(S);E.totalAttempts++,E.totalPointsEarned+=j.points_earned,E.totalPointsPossible+=j.total_points_possible,j.is_correct&&E.correctAnswers++;const O=`chapter:${N.book_of_bible}:${N.chapter}`;x.has(O)||x.set(O,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"chapter",book:N.book_of_bible,chapter:N.chapter});const T=x.get(O);T.totalAttempts++,T.totalPointsEarned+=j.points_earned,T.totalPointsPossible+=j.total_points_possible,j.is_correct&&T.correctAnswers++;const $=`tier:${N.tier}`;x.has($)||x.set($,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"tier",tier:N.tier});const P=x.get($);P.totalAttempts++,P.totalPointsEarned+=j.points_earned,P.totalPointsPossible+=j.total_points_possible,j.is_correct&&P.correctAnswers++});const w=[];x.forEach((j,N)=>{var O,T;if(j.totalAttempts<3)return;const S=j.totalPointsPossible>0?j.totalPointsEarned/j.totalPointsPossible*100:0;if(S>=90)return;let E="";if(j.type==="book"?E=j.book:j.type==="chapter"?E=`${j.book} Chapter ${j.chapter}`:j.type==="tier"&&(E=`${(O=j.tier)==null?void 0:O.charAt(0).toUpperCase()}${(T=j.tier)==null?void 0:T.slice(1)} Questions`),r&&(y=y.gte("answered_at",r.toISOString())),n){const $=new Date(n);$.setDate($.getDate()+1),y=y.lt("answered_at",$.toISOString())}w.push({topic:E,type:j.type,averageScore:S,totalQuestions:j.totalAttempts,totalAttempts:j.totalAttempts,correctAnswers:j.correctAnswers,incorrectAnswers:j.totalAttempts-j.correctAnswers,book:j.book,chapter:j.chapter,tier:j.tier})}),w.sort((j,N)=>j.averageScore-N.averageScore);const _=w.slice(0,10);console.log(" useKnowledgeGapsData: Knowledge gaps analysis complete:",_.length,"gaps found"),i(_)}catch(f){console.error(" Error fetching knowledge gaps data:",f),u(f.message||"Failed to load knowledge gaps data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function pI({teamId:e,userId:t,timeframe:r="weekly",startDate:n,endDate:s}){const[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){console.log(" useProgressionData: No teamId provided, skipping data fetch"),c(!1),o([]);return}console.log(" useProgressionData: Starting progression analysis with params:",{teamId:e,userId:t,timeframe:r,startDate:n,endDate:s}),c(!0),d(null);try{const m=s||new Date,h=n||(()=>{const v=new Date(m);return r==="weekly"?v.setDate(v.getDate()-12*7):v.setMonth(v.getMonth()-12),v})(),p=[];let y=12;if(n&&s){const v=s.getTime()-n.getTime();r==="weekly"?y=Math.ceil(v/(7*24*60*60*1e3)):y=Math.ceil(v/(30*24*60*60*1e3)),y=Math.min(Math.max(y,1),24)}for(let v=y-1;v>=0;v--){let x,w,_;if(r==="weekly"){const j=new Date(m);j.setDate(m.getDate()-(m.getDay()+v*7)),j.setHours(0,0,0,0);const N=new Date(j);N.setDate(j.getDate()+6),N.setHours(23,59,59,999),x=j,w=N,_=`Week of ${j.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const j=new Date(m.getFullYear(),m.getMonth()-v,1),N=new Date(m.getFullYear(),m.getMonth()-v+1,0,23,59,59,999);x=j,w=N,_=j.toLocaleDateString("en-US",{month:"short",year:"numeric"})}n&&w<n||s&&x>s||p.push({start:x,end:w,label:_})}console.log(" useProgressionData: Analyzing",p.length,"periods within date range");const g=[];for(const v of p){console.log(` useProgressionData: Processing period: ${v.label}`);let x=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes").eq("team_id",e).eq("status","completed").gte("completed_at",v.start.toISOString()).lte("completed_at",v.end.toISOString());t&&(x=x.eq("user_id",t));const{data:w,error:_}=await x;if(_)throw _;const j=(w==null?void 0:w.map(Q=>Q.id))||[];let N=[];if(j.length>0){let Q=V.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, is_correct").gte("answered_at",v.start.toISOString()).lte("answered_at",v.end.toISOString()).in("quiz_session_id",j);t&&(Q=Q.eq("user_id",t));const{data:D,error:k}=await Q;if(k)throw k;N=D||[]}const S=(w==null?void 0:w.length)||0,E=(N==null?void 0:N.length)||0;let O=0,T=0,$=0,P=0;N==null||N.forEach(Q=>{O+=Q.points_earned,T+=Q.total_points_possible,Q.is_correct?$++:P++});const z=T>0?O/T*100:0,I=(w==null?void 0:w.reduce((Q,D)=>Q+(D.estimated_minutes||0),0))||0,q={period:v.label,periodStart:v.start,periodEnd:v.end,totalQuizzesCompleted:S,totalQuestionsAnswered:E,totalPointsEarned:O,totalPossiblePoints:T,averageScore:z,totalTimeSpentMinutes:I,correctAnswers:$,incorrectAnswers:P};g.push(q),console.log(` useProgressionData: Period ${v.label} processed:`,q)}console.log(" useProgressionData: Progression analysis complete:",g.length,"data points"),o(g)}catch(m){console.error(" Error fetching progression data:",m),d(m.message||"Failed to load progression data"),o([])}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function gI({userId:e,startDate:t,endDate:r}){const[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{if(!e){s([]),o(!1),c(null);return}o(!0),c(null);try{console.log(" useQuizHistoryData: Fetching quiz history for user:",e,"with date range:",t,r);let d=V.from("quiz_sessions").select(`
          id,
          title,
          type,
          completed_at,
          total_points,
          max_points,
          estimated_minutes,
          questions
        `).eq("user_id",e).eq("status","completed");if(t&&(d=d.gte("completed_at",t.toISOString())),r){const p=new Date(r);p.setDate(p.getDate()+1),d=d.lt("completed_at",p.toISOString())}d=d.order("completed_at",{ascending:!1});const{data:f,error:m}=await d;if(m)throw console.error(" useQuizHistoryData: Error fetching quiz sessions:",m),m;console.log(" useQuizHistoryData: Fetched",(f==null?void 0:f.length)||0,"quiz history entries.");const h=(f||[]).map(p=>({...p,questions_count:Array.isArray(p.questions)?p.questions.length:0}));s(h)}catch(d){console.error(" useQuizHistoryData: Failed to fetch quiz history:",d),c(d.message||"Failed to load quiz history"),s([])}finally{o(!1)}},[e,t,r]);return b.useEffect(()=>{u()},[u]),{data:n,loading:i,error:l,refreshData:u}}function xI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useStudyScheduleAnalysisData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useStudyScheduleAnalysisData: Starting study schedule analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("study_assignments").select("*").eq("team_id",e);t&&(console.log(" useStudyScheduleAnalysisData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("date",r.toISOString().split("T")[0])),n&&(f=f.lte("date",n.toISOString().split("T")[0])),f=f.order("date",{ascending:!1});const{data:m,error:h}=await f;if(h)throw console.error(" useStudyScheduleAnalysisData: Error fetching assignments:",h),h;console.log(" useStudyScheduleAnalysisData: Fetched assignments:",(m==null?void 0:m.length)||0);const p=[];for(const y of m||[]){const g={...y,date:typeof y.date=="string"?ES(y.date):y.date,study_items:y.study_items||[]};if(y.completed)try{const{data:v,error:x}=await V.from("quiz_sessions").select("id, total_points, max_points, questions, estimated_minutes").eq("assignment_id",y.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!x&&v&&(g.quiz_session_id=v.id,g.total_points_earned=v.total_points,g.max_points_possible=v.max_points,g.total_questions_answered=Array.isArray(v.questions)?v.questions.length:0,g.total_time_spent_minutes=v.estimated_minutes)}catch(v){console.warn(" Could not fetch quiz session data for assignment:",y.id,v)}p.push(g)}console.log(" useStudyScheduleAnalysisData: Transformed assignments:",p.length),i(p)}catch(f){console.error(" useStudyScheduleAnalysisData: Error fetching study schedule data:",f),u(f.message||"Failed to load study schedule data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function yI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useQuestionPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useQuestionPerformanceData: Starting question performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log(" useQuestionPerformanceData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),f=f.lt("completed_at",_.toISOString())}const{data:m,error:h}=await f;if(h)throw h;console.log(" useQuestionPerformanceData: Found completed sessions:",(m==null?void 0:m.length)||0);const p=(m==null?void 0:m.map(_=>_.id))||[];if(p.length===0){console.log(" useQuestionPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}let y=V.from("quiz_question_logs").select(`
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          questions!inner (
            id,
            question,
            answer,
            book_of_bible,
            chapter,
            tier,
            points
          )
        `).in("quiz_session_id",p);if(t&&(y=y.eq("user_id",t)),r&&(y=y.gte("answered_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),y=y.lt("answered_at",_.toISOString())}const{data:g,error:v}=await y;if(v)throw v;if(console.log(" useQuestionPerformanceData: Question logs fetched:",(g==null?void 0:g.length)||0),!g||g.length===0){i([]),l(!1);return}const x=new Map;g.forEach(_=>{const j=_.question_id,N=_.questions;if(!N)return;x.has(j)||x.set(j,{question:N,totalAttempts:0,correctAttempts:0,totalTimeSpent:0,totalPointsEarned:0,totalPointsPossible:0});const S=x.get(j);S.totalAttempts++,S.totalTimeSpent+=_.time_spent,S.totalPointsEarned+=_.points_earned,S.totalPointsPossible+=_.total_points_possible,_.is_correct&&S.correctAttempts++});const w=[];x.forEach((_,j)=>{const N=_.totalAttempts>0?Math.round(_.correctAttempts/_.totalAttempts*100):0,S=_.totalAttempts>0?Math.round(_.totalTimeSpent/_.totalAttempts):0;w.push({question_id:j,question_text:_.question.question,answer_text:_.question.answer,book_of_bible:_.question.book_of_bible,chapter:_.question.chapter,tier:_.question.tier,points:_.question.points,total_attempts:_.totalAttempts,correct_attempts:_.correctAttempts,incorrect_attempts:_.totalAttempts-_.correctAttempts,accuracy_rate:N,average_time_spent:S,total_points_earned:_.totalPointsEarned,total_points_possible:_.totalPointsPossible})}),w.sort((_,j)=>_.accuracy_rate-j.accuracy_rate),console.log(" useQuestionPerformanceData: Question performance analysis complete:",w.length,"questions analyzed"),i(w)}catch(f){console.error(" Error fetching question performance data:",f),u(f.message||"Failed to load question performance data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function vI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useEngagementData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useEngagementData: Starting engagement analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=n||new Date,m=r||(()=>{const S=new Date(f);return S.setDate(S.getDate()-30),S})();let h=V.from("quiz_sessions").select("id, completed_at, estimated_minutes").eq("team_id",e).eq("status","completed").gte("completed_at",m.toISOString()).lte("completed_at",f.toISOString());t&&(console.log(" useEngagementData: Filtering by userId:",t),h=h.eq("user_id",t));const{data:p,error:y}=await h;if(y)throw y;console.log(" useEngagementData: Found completed sessions:",(p==null?void 0:p.length)||0);const g=(p==null?void 0:p.map(S=>S.id))||[];let v=[];if(g.length>0){let S=V.from("quiz_question_logs").select("answered_at, time_spent").in("quiz_session_id",g).gte("answered_at",m.toISOString()).lte("answered_at",f.toISOString());t&&(S=S.eq("user_id",t));const{data:E,error:O}=await S;if(O)throw O;v=E||[]}console.log(" useEngagementData: Question logs fetched:",v.length);const x=new Map;p==null||p.forEach(S=>{const E=new Date(S.completed_at),O=E.toISOString().split("T")[0];x.has(O)||x.set(O,{date:O,dateObj:E,quizzesCompleted:0,questionsAnswered:0,timeSpentMinutes:0,sessionTimes:[]});const T=x.get(O);T.quizzesCompleted++,T.timeSpentMinutes+=S.estimated_minutes||0,T.sessionTimes.push(S.estimated_minutes||0)}),v.forEach(S=>{const O=new Date(S.answered_at).toISOString().split("T")[0];if(x.has(O)){const T=x.get(O);T.questionsAnswered++}});const w=[],_=Array.from(x.keys()).sort();let j=0,N=new Date(f);N.setDate(N.getDate()+1),_.forEach((S,E)=>{const O=x.get(S),T=O.sessionTimes.length>0?Math.round(O.sessionTimes.reduce((z,I)=>z+I,0)/O.sessionTimes.length):0,$=new Date(S),P=new Date(N);P.setDate(P.getDate()-1),O.quizzesCompleted>0?($.toDateString()===P.toDateString()?j++:j=1,N=$):j=0,w.push({date:S,dateObj:O.dateObj,quizzesCompleted:O.quizzesCompleted,questionsAnswered:O.questionsAnswered,timeSpentMinutes:O.timeSpentMinutes,averageSessionTime:T,studyStreak:j})}),w.sort((S,E)=>E.dateObj.getTime()-S.dateObj.getTime()),console.log(" useEngagementData: Engagement analysis complete:",w.length,"data points"),i(w)}catch(f){console.error(" Error fetching engagement data:",f),u(f.message||"Failed to load engagement data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function bI(e,t,r,n=12){const s=r||new Date;t||(()=>{const l=new Date(s);return e==="weekly"?l.setDate(l.getDate()-n*7):l.setMonth(l.getMonth()-n),l})();const i=[];let o=n;if(t&&r){const l=r.getTime()-t.getTime();e==="weekly"?o=Math.ceil(l/(7*24*60*60*1e3)):o=Math.ceil(l/(30*24*60*60*1e3)),o=Math.min(Math.max(o,1),24)}for(let l=o-1;l>=0;l--){let c,u,d;if(e==="weekly"){const f=new Date(s);f.setDate(s.getDate()-(s.getDay()+l*7)),f.setHours(0,0,0,0);const m=new Date(f);m.setDate(f.getDate()+6),m.setHours(23,59,59,999),c=f,u=m,d=`Week of ${f.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const f=new Date(s.getFullYear(),s.getMonth()-l,1),m=new Date(s.getFullYear(),s.getMonth()-l+1,0,23,59,59,999);c=f,u=m,d=f.toLocaleDateString("en-US",{month:"short",year:"numeric"})}t&&u<t||r&&c>r||i.push({start:c,end:u,label:d})}return i}async function qS(e){let t=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes, user_id").eq("team_id",e.teamId).eq("status","completed");if(e.userId&&(t=t.eq("user_id",e.userId)),e.startDate&&(t=t.gte("completed_at",e.startDate.toISOString())),e.endDate){const r=new Date(e.endDate);r.setDate(r.getDate()+1),t=t.lt("completed_at",r.toISOString())}return await t}async function FS(e,t,r=!1){if(e.length===0)return{data:[],error:null};const n=r?`points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id,
       questions!inner (book_of_bible, chapter, tier, question, answer, points)`:"points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id";let s=V.from("quiz_question_logs").select(n).in("quiz_session_id",e);if(t.userId&&(s=s.eq("user_id",t.userId)),t.startDate&&(s=s.gte("answered_at",t.startDate.toISOString())),t.endDate){const i=new Date(t.endDate);i.setDate(i.getDate()+1),s=s.lt("answered_at",i.toISOString())}return await s}function wI(e,t){return t>0?e/t*100:0}function jI(e,t=[]){let r=Math.round(e/60);return e<30&&t.length>0&&(r=t.reduce((s,i)=>s+(i.estimated_minutes||0),0)),r}function Ob(e){return new Set(e).size}function US(e,t){return console.error(` ${t}:`,e),e.message||`Failed to load ${t.toLowerCase()}`}function Wa(e,t,r){console.log(` ${e}:`,t)}function _I({teamId:e,timeframe:t="weekly",startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useTeamPerformanceTrendsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useTeamPerformanceTrendsData: Starting team performance trends analysis with params:",{teamId:e,timeframe:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=bI(t,r,n);Wa("useTeamPerformanceTrendsData: Analyzing periods",{periodsCount:f.length,timeframe:t});const m=[],h={teamId:e,startDate:r,endDate:n};for(const p of f){Wa(`Processing period: ${p.label}`,{period:p});const y={...h,startDate:p.start,endDate:p.end},{data:g,error:v}=await qS(y);if(v)throw v;const x=(g==null?void 0:g.map(q=>q.id))||[],{data:w,error:_}=await FS(x,y);if(_)throw _;const j=(g==null?void 0:g.length)||0,N=(w==null?void 0:w.length)||0;let S=0,E=0,O=0;(w||[]).forEach(q=>{S+=q.points_earned,E+=q.total_points_possible,O+=q.time_spent});const T=wI(S,E),$=jI(O,g||[]),P=Ob((g||[]).map(q=>new Date(q.completed_at).toDateString())),z=Ob((g||[]).map(q=>q.user_id)),I={period:p.label,periodStart:p.start,periodEnd:p.end,totalQuizzesCompleted:j,totalQuestionsAnswered:N,totalPointsEarned:S,totalPossiblePoints:E,averageScore:T,totalTimeSpentMinutes:$,activeDays:P,activeMembers:z};m.push(I)}Wa("useTeamPerformanceTrendsData: Analysis complete",{dataPointsCount:m.length}),i(m)}catch(f){u(US(f,"useTeamPerformanceTrendsData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function NI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useBookChapterPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useBookChapterPerformanceData: Starting book/chapter performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f={teamId:e,userId:t,startDate:r,endDate:n},{data:m,error:h}=await qS(f);if(h)throw h;Wa("useBookChapterPerformanceData: Sessions fetched",{sessionsCount:(m==null?void 0:m.length)||0});const p=(m==null?void 0:m.map(w=>w.id))||[];if(p.length===0){console.log(" useBookChapterPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}const{data:y,error:g}=await FS(p,f,!0);if(g)throw g;if(Wa("useBookChapterPerformanceData: Question logs fetched",{logsCount:(y==null?void 0:y.length)||0}),!y||y.length===0){i([]),l(!1);return}const v=new Map;y.forEach(w=>{const _=w.questions;if(!_)return;const j=`${_.book_of_bible}:${_.chapter}`;v.has(j)||v.set(j,{book_of_bible:_.book_of_bible,chapter:_.chapter,total_attempts:0,correct_attempts:0,total_time_spent:0,total_points_earned:0,total_points_possible:0});const N=v.get(j);N.total_attempts++,N.total_time_spent+=w.time_spent,N.total_points_earned+=w.points_earned,N.total_points_possible+=w.total_points_possible,w.is_correct&&N.correct_attempts++});const x=[];v.forEach(w=>{const _=w.total_attempts>0?Math.round(w.correct_attempts/w.total_attempts*100):0,j=w.total_attempts>0?Math.round(w.total_time_spent/w.total_attempts):0,N=w.total_points_possible>0?Math.round(w.total_points_earned/w.total_points_possible*100):0;x.push({book_of_bible:w.book_of_bible,chapter:w.chapter,total_attempts:w.total_attempts,correct_attempts:w.correct_attempts,incorrect_attempts:w.total_attempts-w.correct_attempts,accuracy_rate:_,average_time_spent:j,total_points_earned:w.total_points_earned,total_points_possible:w.total_points_possible,points_efficiency:N})}),x.sort((w,_)=>w.accuracy_rate-_.accuracy_rate),Wa("useBookChapterPerformanceData: Analysis complete",{dataPointsCount:x.length}),i(x)}catch(f){u(US(f,"useBookChapterPerformanceData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}const BS=b.createContext(void 0);function SI({children:e,value:t}){return a.jsx(BS.Provider,{value:t,children:e})}function ui(){const e=b.useContext(BS);if(e===void 0)throw new Error("useAnalyticsContext must be used within an AnalyticsProvider");return e}function Up({teamMembers:e,selectedMemberId:t,onSelectMember:r,selectedMemberInfo:n,disabled:s=!1,includeAllTeamOption:i=!1}){var o,l;return e.length===0&&!i?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to manage study schedules."})]})}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:s?`${n==null?void 0:n.user.name}'s Study Schedule`:"Viewing Performance For:"}),s?a.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-base font-medium text-gray-900 min-w-64 capitalize",children:[n==null?void 0:n.role," Access"]}):a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:t===void 0?"":t,onChange:c=>r(c.target.value===""?void 0:c.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 text-base font-medium text-gray-900 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 w-full sm:min-w-64",disabled:s,children:[i&&a.jsx("option",{value:"",children:"All Team"}),t&&e.find(c=>c.userId===t)&&a.jsxs("option",{value:t,children:[(o=e.find(c=>c.userId===t))==null?void 0:o.user.name," (",(l=e.find(c=>c.userId===t))==null?void 0:l.role,")"]},t),e.filter(c=>c.role==="member"&&c.userId!==t).map(c=>a.jsxs("option",{value:c.userId,children:[c.user.name," (",c.role,")"]},c.userId))]}),a.jsx(sM,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]})})})}function QS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=QS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function je(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=QS(e))&&(n&&(n+=" "),n+=t);return n}var vf={},VS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(VS);var J0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(J0);var Z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Z0);var bf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const u=r[i];l?u==="\\"&&i+1<s?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(bf);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VS,r=J0,n=Z0,s=bf;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(vf);var kI=vf.get;const Yi=Qn(kI);var WS={exports:{}},$e={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=Symbol.for("react.transitional.element"),tx=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Nf=Symbol.for("react.consumer"),Sf=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Af=Symbol.for("react.lazy"),PI=Symbol.for("react.view_transition"),EI=Symbol.for("react.client.reference");function an(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ex:switch(e=e.type,e){case wf:case _f:case jf:case Pf:case Ef:case PI:return e;default:switch(e=e&&e.$$typeof,e){case Sf:case kf:case Af:case Cf:return e;case Nf:return e;default:return t}}case tx:return t}}}$e.ContextConsumer=Nf;$e.ContextProvider=Sf;$e.Element=ex;$e.ForwardRef=kf;$e.Fragment=wf;$e.Lazy=Af;$e.Memo=Cf;$e.Portal=tx;$e.Profiler=_f;$e.StrictMode=jf;$e.Suspense=Pf;$e.SuspenseList=Ef;$e.isContextConsumer=function(e){return an(e)===Nf};$e.isContextProvider=function(e){return an(e)===Sf};$e.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ex};$e.isForwardRef=function(e){return an(e)===kf};$e.isFragment=function(e){return an(e)===wf};$e.isLazy=function(e){return an(e)===Af};$e.isMemo=function(e){return an(e)===Cf};$e.isPortal=function(e){return an(e)===tx};$e.isProfiler=function(e){return an(e)===_f};$e.isStrictMode=function(e){return an(e)===jf};$e.isSuspense=function(e){return an(e)===Pf};$e.isSuspenseList=function(e){return an(e)===Ef};$e.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wf||e===_f||e===jf||e===Pf||e===Ef||typeof e=="object"&&e!==null&&(e.$$typeof===Af||e.$$typeof===Cf||e.$$typeof===Sf||e.$$typeof===Nf||e.$$typeof===kf||e.$$typeof===EI||e.getModuleId!==void 0)};$e.typeOf=an;WS.exports=$e;var CI=WS.exports,pr=e=>e===0?0:e>0?1:-1,Dr=e=>typeof e=="number"&&e!=+e,Ci=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ce=e=>(typeof e=="number"||e instanceof Number)&&!Dr(e),Fn=e=>ce(e)||typeof e=="string",AI=0,co=e=>{var t=++AI;return"".concat(e||"").concat(t)},Sn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ce(t)&&typeof t!="string")return n;var i;if(Ci(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Dr(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},KS=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},pn=(e,t)=>ce(e)&&ce(t)?r=>e+r*(t-e):()=>t;function HS(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Yi(n,t))===r)}var Ie=e=>e===null||typeof e>"u",bc=e=>Ie(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),TI=["viewBox","children"],OI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Db=["points","pathLength"],im={svg:TI,polygon:Db,polyline:Db},rx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],nx=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{rx.includes(s)&&(n[s]=i=>r[s](r,i))}),n},DI=(e,t,r)=>n=>(e(t,r,n),null),sx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];rx.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=DI(i,t,r))}),n},Mb=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Ib=null,am=null,GS=e=>{if(e===Ib&&Array.isArray(am))return am;var t=[];return b.Children.forEach(e,r=>{Ie(r)||(CI.isFragment(r)?t=t.concat(GS(r.props.children)):t.push(r))}),am=t,Ib=e,t};function ix(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>Mb(s)):n=[Mb(t)],GS(e).forEach(s=>{var i=Yi(s,"type.displayName")||Yi(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var YS=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,MI=(e,t,r,n)=>{var s,i=(s=n&&(im==null?void 0:im[n]))!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||OI.includes(t))||r&&rx.includes(t)},Pe=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;MI((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},II=["children","width","height","viewBox","className","style","title","desc"];function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bp.apply(null,arguments)}function $I(e,t){if(e==null)return{};var r,n,s=zI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XS=b.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=$I(e,II),f=i||{width:n,height:s,x:0,y:0},m=je("recharts-surface",o);return b.createElement("svg",Bp({},Pe(d,!0,"svg"),{className:m,width:n,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,c),b.createElement("desc",null,u),r)}),LI=["children","className"];function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qp.apply(null,arguments)}function RI(e,t){if(e==null)return{};var r,n,s=qI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mr=b.forwardRef((e,t)=>{var{children:r,className:n}=e,s=RI(e,LI),i=je("recharts-layer",n);return b.createElement("g",Qp({className:i},Pe(s,!0),{ref:t}),r)}),FI=b.createContext(null);function Re(e){return function(){return e}}const JS=Math.cos,ld=Math.sin,En=Math.sqrt,cd=Math.PI,Tf=2*cd,Vp=Math.PI,Wp=2*Vp,wi=1e-6,UI=Wp-wi;function ZS(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function BI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ZS;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class QI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ZS:BI(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>wi)if(!(Math.abs(f*c-u*d)>wi)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,p=s-l,y=c*c+u*u,g=h*h+p*p,v=Math.sqrt(y),x=Math.sqrt(m),w=i*Math.tan((Vp-Math.acos((y+m-g)/(2*v*x)))/2),_=w/x,j=w/v;Math.abs(_-1)>wi&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*h>d*p)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,f=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>wi||Math.abs(this._y1-d)>wi)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%Wp+Wp),m>UI?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>wi&&this._append`A${n},${n},0,${+(m>=Vp)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ax(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new QI(t)}function ox(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ek(e){this._context=e}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Of(e){return new ek(e)}function tk(e){return e[0]}function rk(e){return e[1]}function nk(e,t){var r=Re(!0),n=null,s=Of,i=null,o=ax(l);e=typeof e=="function"?e:e===void 0?tk:Re(e),t=typeof t=="function"?t:t===void 0?rk:Re(t);function l(c){var u,d=(c=ox(c)).length,f,m=!1,h;for(n==null&&(i=s(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Re(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Re(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Re(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function tu(e,t,r){var n=null,s=Re(!0),i=null,o=Of,l=null,c=ax(u);e=typeof e=="function"?e:e===void 0?tk:Re(+e),t=typeof t=="function"?t:Re(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?rk:Re(+r);function u(f){var m,h,p,y=(f=ox(f)).length,g,v=!1,x,w=new Array(y),_=new Array(y);for(i==null&&(l=o(x=c())),m=0;m<=y;++m){if(!(m<y&&s(g=f[m],m,f))===v)if(v=!v)h=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=m-1;p>=h;--p)l.point(w[p],_[p]);l.lineEnd(),l.areaEnd()}v&&(w[m]=+e(g,m,f),_[m]=+t(g,m,f),l.point(n?+n(g,m,f):w[m],r?+r(g,m,f):_[m]))}if(x)return l=null,x+""||null}function d(){return nk().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Re(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Re(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Re(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Re(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Re(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Re(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Re(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class sk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function VI(e){return new sk(e,!0)}function WI(e){return new sk(e,!1)}const lx={draw(e,t){const r=En(t/cd);e.moveTo(r,0),e.arc(0,0,r,0,Tf)}},KI={draw(e,t){const r=En(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ik=En(1/3),HI=ik*2,GI={draw(e,t){const r=En(t/HI),n=r*ik;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},YI={draw(e,t){const r=En(t),n=-r/2;e.rect(n,n,r,r)}},XI=.8908130915292852,ak=ld(cd/10)/ld(7*cd/10),JI=ld(Tf/10)*ak,ZI=-JS(Tf/10)*ak,e$={draw(e,t){const r=En(t*XI),n=JI*r,s=ZI*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Tf*i/5,l=JS(o),c=ld(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},om=En(3),t$={draw(e,t){const r=-En(t/(om*3));e.moveTo(0,r*2),e.lineTo(-om*r,-r),e.lineTo(om*r,-r),e.closePath()}},qr=-.5,Fr=En(3)/2,Kp=1/En(12),r$=(Kp/2+1)*3,n$={draw(e,t){const r=En(t/r$),n=r/2,s=r*Kp,i=n,o=r*Kp+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(qr*n-Fr*s,Fr*n+qr*s),e.lineTo(qr*i-Fr*o,Fr*i+qr*o),e.lineTo(qr*l-Fr*c,Fr*l+qr*c),e.lineTo(qr*n+Fr*s,qr*s-Fr*n),e.lineTo(qr*i+Fr*o,qr*o-Fr*i),e.lineTo(qr*l+Fr*c,qr*c-Fr*l),e.closePath()}};function s$(e,t){let r=null,n=ax(s);e=typeof e=="function"?e:Re(e||lx),t=typeof t=="function"?t:Re(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Re(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Re(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function ud(){}function dd(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ok(e){this._context=e}ok.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function i$(e){return new ok(e)}function lk(e){this._context=e}lk.prototype={areaStart:ud,areaEnd:ud,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function a$(e){return new lk(e)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function o$(e){return new ck(e)}function uk(e){this._context=e}uk.prototype={areaStart:ud,areaEnd:ud,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function l$(e){return new uk(e)}function $b(e){return e<0?-1:1}function zb(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return($b(i)+$b(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Lb(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function lm(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function fd(e){this._context=e}fd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lm(this,this._t0,Lb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lm(this,Lb(this,r=zb(this,e,t)),r);break;default:lm(this,this._t0,r=zb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function dk(e){this._context=new fk(e)}(dk.prototype=Object.create(fd.prototype)).point=function(e,t){fd.prototype.point.call(this,t,e)};function fk(e){this._context=e}fk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function c$(e){return new fd(e)}function u$(e){return new dk(e)}function hk(e){this._context=e}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Rb(e),s=Rb(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rb(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function d$(e){return new hk(e)}function Df(e,t){this._context=e,this._t=t}Df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function f$(e){return new Df(e,.5)}function h$(e){return new Df(e,0)}function m$(e){return new Df(e,1)}function uo(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Hp(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function p$(e,t){return e[t]}function g$(e){const t=[];return t.key=e,t}function x$(){var e=Re([]),t=Hp,r=uo,n=p$;function s(i){var o=Array.from(e.apply(this,arguments),g$),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=ox(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Re(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Re(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Hp:typeof i=="function"?i:Re(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??uo,s):r},s}function y$(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}uo(e,t)}}function v$(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}uo(e,t)}}function b$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,p=0;p<l;++p){var y=e[t[p]],g=y[n][1]||0,v=y[n-1][1]||0;h+=g-v}c+=f,u+=h*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,uo(e,t)}}var w$=["type","size","sizeType"];function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gp.apply(null,arguments)}function qb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qb(Object(r),!0).forEach(function(n){j$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j$(e,t,r){return(t=_$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _$(e){var t=N$(e,"string");return typeof t=="symbol"?t:t+""}function N$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S$(e,t){if(e==null)return{};var r,n,s=k$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function k$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mk={symbolCircle:lx,symbolCross:KI,symbolDiamond:GI,symbolSquare:YI,symbolStar:e$,symbolTriangle:t$,symbolWye:n$},P$=Math.PI/180,E$=e=>{var t="symbol".concat(bc(e));return mk[t]||lx},C$=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*P$;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},A$=(e,t)=>{mk["symbol".concat(bc(e))]=t},pk=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=S$(e,w$),i=Fb(Fb({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var f=E$(t),m=s$().type(f).size(C$(r,n,t));return m()},{className:l,cx:c,cy:u}=i,d=Pe(i,!0);return c===+c&&u===+u&&r===+r?b.createElement("path",Gp({},d,{className:je("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};pk.registerSymbol=A$;var gk={},xk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(xk);var cx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(cx);var yk={},Mf={},vk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(vk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vk;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Mf);var bk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(bk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mf,r=bk;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(yk);var wk={},jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vf;function r(n){return function(s){return t.get(s,n)}}e.property=r})(jk);var _k={},cm={},um={},ux={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ux);var dx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(dx);var If={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(If);var Ub;function T$(){return Ub||(Ub=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=ux,n=dx,s=If;function i(f,m,h){return typeof h!="function"?t.isMatch(f,m):o(f,m,function p(y,g,v,x,w,_){const j=h(y,g,v,x,w,_);return j!==void 0?!!j:o(y,g,p,_)},new Map)}function o(f,m,h,p){if(m===f)return!0;switch(typeof m){case"object":return l(f,m,h,p);case"function":return Object.keys(m).length>0?o(f,{...m},h,p):s.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:s.eq(f,m)}}function l(f,m,h,p){if(m==null)return!0;if(Array.isArray(m))return u(f,m,h,p);if(m instanceof Map)return c(f,m,h,p);if(m instanceof Set)return d(f,m,h,p);const y=Object.keys(m);if(f==null)return y.length===0;if(y.length===0)return!0;if(p&&p.has(m))return p.get(m)===f;p&&p.set(m,f);try{for(let g=0;g<y.length;g++){const v=y[g];if(!n.isPrimitive(f)&&!(v in f)||m[v]===void 0&&f[v]!==void 0||m[v]===null&&f[v]!==null||!h(f[v],m[v],v,f,m,p))return!1}return!0}finally{p&&p.delete(m)}}function c(f,m,h,p){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,g]of m.entries()){const v=f.get(y);if(h(v,g,y,f,m,p)===!1)return!1}return!0}function u(f,m,h,p){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let g=0;g<m.length;g++){const v=m[g];let x=!1;for(let w=0;w<f.length;w++){if(y.has(w))continue;const _=f[w];let j=!1;if(h(_,v,g,f,m,p)&&(j=!0),j){y.add(w),x=!0;break}}if(!x)return!1}return!0}function d(f,m,h,p){return m.size===0?!0:f instanceof Set?u([...f],[...m],h,p):!1}e.isMatchWith=i,e.isSetMatch=d}(um)),um}var Bb;function fx(){return Bb||(Bb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T$();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(cm)),cm}var Nk={},hx={},mx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(mx);var $f={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})($f);var zf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",h="[object Object]",p="[object Error]",y="[object DataView]",g="[object Uint8Array]",v="[object Uint8ClampedArray]",x="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",E="[object BigInt64Array]",O="[object Float32Array]",T="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=y,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=O,e.float64ArrayTag=T,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=S,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=x,e.uint32ArrayTag=w,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=v})(zf);var Sk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Sk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx,r=$f,n=zf,s=dx,i=Sk;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,m,h=new Map,p=void 0){const y=p==null?void 0:p(d,f,m,h);if(y!=null)return y;if(s.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,m,h,p);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[v,x]of d)g.set(v,l(x,v,m,h,p));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const v of d)g.add(l(v,void 0,m,h,p));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let v=0;v<d.length;v++)g[v]=l(d[v],v,m,h,p);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,m,h,p),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,m,h,p),g}if(d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,m,h,p),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,m,h,p),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,m,h,p),g}return d}function c(d,f,m=d,h,p){const y=[...Object.keys(f),...t.getSymbols(f)];for(let g=0;g<y.length;g++){const v=y[g],x=Object.getOwnPropertyDescriptor(d,v);(x==null||x.writable)&&(d[v]=l(f[v],v,m,h,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(hx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Nk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=Nk;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(_k);var kk={},Pk={},Ek={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx,r=zf;function n(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Ek);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ek;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Pk);var Ck={},px={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(px);var Ak={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$f;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Ak);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J0,r=px,n=Ak,s=bf;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(Ck);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=Z0,n=Pk,s=vf,i=Ck;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(kk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx,r=jk,n=_k,s=kk;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(wk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xk,r=cx,n=yk,s=wk;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(gk);var O$=gk.uniqBy;const Qb=Qn(O$);function D$(e,t,r){return t===!0?Qb(e,r):typeof t=="function"?Qb(e,t):e}var Tk={exports:{}},Ok={},Dk={exports:{}},Mk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=b;function M$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var I$=typeof Object.is=="function"?Object.is:M$,$$=fo.useState,z$=fo.useEffect,L$=fo.useLayoutEffect,R$=fo.useDebugValue;function q$(e,t){var r=t(),n=$$({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return L$(function(){s.value=r,s.getSnapshot=t,dm(s)&&i({inst:s})},[e,r,t]),z$(function(){return dm(s)&&i({inst:s}),e(function(){dm(s)&&i({inst:s})})},[e]),R$(r),r}function dm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!I$(e,r)}catch{return!0}}function F$(e,t){return t()}var U$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?F$:q$;Mk.useSyncExternalStore=fo.useSyncExternalStore!==void 0?fo.useSyncExternalStore:U$;Dk.exports=Mk;var B$=Dk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=b,Q$=B$;function V$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W$=typeof Object.is=="function"?Object.is:V$,K$=Q$.useSyncExternalStore,H$=Lf.useRef,G$=Lf.useEffect,Y$=Lf.useMemo,X$=Lf.useDebugValue;Ok.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=H$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Y$(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return f=p}return f=h}if(p=f,W$(d,h))return p;var y=n(h);return s!==void 0&&s(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=K$(e,i[0],i[1]);return G$(function(){o.hasValue=!0,o.value=l},[l]),X$(l),l};Tk.exports=Ok;var J$=Tk.exports,gx=b.createContext(null),Z$=e=>e,yt=()=>{var e=b.useContext(gx);return e?e.store.dispatch:Z$},Cu=()=>{},e3=()=>Cu,t3=(e,t)=>e===t;function fe(e){var t=b.useContext(gx);return J$.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:e3,t?t.store.getState:Cu,t?t.store.getState:Cu,t?e:Cu,t3)}function r3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function n3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function s3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Vb=e=>Array.isArray(e)?e:[e];function i3(e){const t=Array.isArray(e[0])?e[0]:e;return s3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function a3(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var o3=class{constructor(e){this.value=e}deref(){return this.value}},l3=typeof WeakRef<"u"?WeakRef:o3,c3=0,Wb=1;function ru(){return{s:c3,v:void 0,o:null,p:null}}function Ik(e,t={}){let r=ru();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let m=0,h=c;m<h;m++){const p=arguments[m];if(typeof p=="function"||typeof p=="object"&&p!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const g=y.get(p);g===void 0?(l=ru(),y.set(p,l)):l=g}else{let y=l.p;y===null&&(l.p=y=new Map);const g=y.get(p);g===void 0?(l=ru(),y.set(p,l)):l=g}}const u=l;let d;if(l.s===Wb)d=l.v;else if(d=e.apply(null,arguments),i++,n){const m=((f=s==null?void 0:s.deref)==null?void 0:f.call(s))??s;m!=null&&n(m,d)&&(d=m,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new l3(d):d}return u.s=Wb,u.v=d,d}return o.clearCache=()=>{r=ru(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function u3(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),r3(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:m=[],argsMemoize:h=Ik,argsMemoizeOptions:p=[],devModeChecks:y={}}=d,g=Vb(m),v=Vb(p),x=i3(s),w=f(function(){return i++,u.apply(null,arguments)},...g),_=h(function(){o++;const N=a3(x,arguments);return l=w.apply(null,N),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var K=u3(Ik),d3=Object.assign((e,t=K)=>{n3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>d3}),$k={},zk={},Lk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(Lk);var Rk={},xx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(xx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xx,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(Rk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lk,r=Rk,n=bf;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,p)=>{let y=h;for(let g=0;g<p.length&&y!=null;++g)y=y[p[g]];return y},d=(h,p)=>p==null||h==null?p:typeof h=="object"&&"key"in h?Object.hasOwn(p,h.key)?p[h.key]:u(p,h.path):typeof h=="function"?h(p):Array.isArray(h)?u(p,h):typeof p=="object"?p[h]:p,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(p=>d(p,h))})).slice().sort((h,p)=>{for(let y=0;y<f.length;y++){const g=t.compareValues(h.criteria[y],p.criteria[y],l[y]);if(g!==0)return g}return 0}).map(h=>h.original)}e.orderBy=s})(zk);var qk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}e.flatten=t})(qk);var yx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=px,r=Mf,n=ux,s=If;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(yx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zk,r=qk,n=yx;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})($k);var f3=$k.sortBy;const Rf=Qn(f3);var Fk=e=>e.legend.settings,h3=e=>e.legend.size,m3=e=>e.legend.payload;K([m3,Fk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Rf(n,r):n});var nu=1;function p3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),n=b.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>nu||Math.abs(o.left-t.left)>nu||Math.abs(o.top-t.top)>nu||Math.abs(o.width-t.width)>nu)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function At(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var g3=typeof Symbol=="function"&&Symbol.observable||"@@observable",Kb=g3,fm=()=>Math.random().toString(36).substring(7).split("").join("."),x3={INIT:`@@redux/INIT${fm()}`,REPLACE:`@@redux/REPLACE${fm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fm()}`},hd=x3;function vx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Uk(e,t,r){if(typeof e!="function")throw new Error(At(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(At(1));return r(Uk)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((g,v)=>{o.set(v,g)}))}function d(){if(c)throw new Error(At(3));return s}function f(g){if(typeof g!="function")throw new Error(At(4));if(c)throw new Error(At(5));let v=!0;u();const x=l++;return o.set(x,g),function(){if(v){if(c)throw new Error(At(6));v=!1,u(),o.delete(x),i=null}}}function m(g){if(!vx(g))throw new Error(At(7));if(typeof g.type>"u")throw new Error(At(8));if(typeof g.type!="string")throw new Error(At(17));if(c)throw new Error(At(9));try{c=!0,s=n(s,g)}finally{c=!1}return(i=o).forEach(x=>{x()}),g}function h(g){if(typeof g!="function")throw new Error(At(10));n=g,m({type:hd.REPLACE})}function p(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(At(11));function x(){const _=v;_.next&&_.next(d())}return x(),{unsubscribe:g(x)}},[Kb](){return this}}}return m({type:hd.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:h,[Kb]:p}}function y3(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hd.INIT})>"u")throw new Error(At(12));if(typeof r(void 0,{type:hd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function Bk(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{y3(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],h=o[f],p=m(h,l);if(typeof p>"u")throw l&&l.type,new Error(At(14));u[f]=p,c=c||p!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function md(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function v3(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(At(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=md(...l)(s.dispatch),{...s,dispatch:i}}}function Qk(e){return vx(e)&&"type"in e&&typeof e.type=="string"}var Vk=Symbol.for("immer-nothing"),Hb=Symbol.for("immer-draftable"),Ir=Symbol.for("immer-state");function vn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ho=Object.getPrototypeOf;function Xi(e){return!!e&&!!e[Ir]}function fs(e){var t;return e?Wk(e)||Array.isArray(e)||!!e[Hb]||!!((t=e.constructor)!=null&&t[Hb])||Ff(e)||Uf(e):!1}var b3=Object.prototype.constructor.toString();function Wk(e){if(!e||typeof e!="object")return!1;const t=ho(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===b3}function pd(e,t){qf(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function qf(e){const t=e[Ir];return t?t.type_:Array.isArray(e)?1:Ff(e)?2:Uf(e)?3:0}function Yp(e,t){return qf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Kk(e,t,r){const n=qf(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function w3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ff(e){return e instanceof Map}function Uf(e){return e instanceof Set}function ji(e){return e.copy_||e.base_}function Xp(e,t){if(Ff(e))return new Map(e);if(Uf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Wk(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ir];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(ho(e),n)}else{const n=ho(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function bx(e,t=!1){return Bf(e)||Xi(e)||!fs(e)||(qf(e)>1&&(e.set=e.add=e.clear=e.delete=j3),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>bx(n,!0))),e}function j3(){vn(2)}function Bf(e){return Object.isFrozen(e)}var _3={};function Ji(e){const t=_3[e];return t||vn(0,e),t}var Xl;function Hk(){return Xl}function N3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gb(e,t){t&&(Ji("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jp(e){Zp(e),e.drafts_.forEach(S3),e.drafts_=null}function Zp(e){e===Xl&&(Xl=e.parent_)}function Yb(e){return Xl=N3(Xl,e)}function S3(e){const t=e[Ir];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Xb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ir].modified_&&(Jp(t),vn(4)),fs(e)&&(e=gd(t,e),t.parent_||xd(t,e)),t.patches_&&Ji("Patches").generateReplacementPatches_(r[Ir].base_,e,t.patches_,t.inversePatches_)):e=gd(t,r,[]),Jp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Vk?e:void 0}function gd(e,t,r){if(Bf(t))return t;const n=t[Ir];if(!n)return pd(t,(s,i)=>Jb(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return xd(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),pd(i,(l,c)=>Jb(e,n,s,l,c,r,o)),xd(e,s,!1),r&&e.patches_&&Ji("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Jb(e,t,r,n,s,i,o){if(Xi(s)){const l=i&&t&&t.type_!==3&&!Yp(t.assigned_,n)?i.concat(n):void 0,c=gd(e,s,l);if(Kk(r,n,c),Xi(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(fs(s)&&!Bf(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gd(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&xd(e,s)}}function xd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bx(t,r)}function k3(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Hk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=wx;r&&(s=[n],i=Jl);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var wx={get(e,t){if(t===Ir)return e;const r=ji(e);if(!Yp(r,t))return P3(e,r,t);const n=r[t];return e.finalized_||!fs(n)?n:n===hm(e.base_,t)?(mm(e),e.copy_[t]=tg(n,e)):n},has(e,t){return t in ji(e)},ownKeys(e){return Reflect.ownKeys(ji(e))},set(e,t,r){const n=Gk(ji(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=hm(ji(e),t),i=s==null?void 0:s[Ir];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(w3(r,s)&&(r!==void 0||Yp(e.base_,t)))return!0;mm(e),eg(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return hm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mm(e),eg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ji(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){vn(11)},getPrototypeOf(e){return ho(e.base_)},setPrototypeOf(){vn(12)}},Jl={};pd(wx,(e,t)=>{Jl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jl.deleteProperty=function(e,t){return Jl.set.call(this,e,t,void 0)};Jl.set=function(e,t,r){return wx.set.call(this,e[0],t,r,e[0])};function hm(e,t){const r=e[Ir];return(r?ji(r):e)[t]}function P3(e,t,r){var s;const n=Gk(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function Gk(e,t){if(!(t in e))return;let r=ho(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ho(r)}}function eg(e){e.modified_||(e.modified_=!0,e.parent_&&eg(e.parent_))}function mm(e){e.copy_||(e.copy_=Xp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var E3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&vn(6),n!==void 0&&typeof n!="function"&&vn(7);let s;if(fs(t)){const i=Yb(this),o=tg(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Jp(i):Zp(i)}return Gb(i,n),Xb(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Vk&&(s=void 0),this.autoFreeze_&&bx(s,!0),n){const i=[],o=[];Ji("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else vn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fs(e)||vn(8),Xi(e)&&(e=is(e));const t=Yb(this),r=tg(e,void 0);return r[Ir].isManual_=!0,Zp(t),r}finishDraft(e,t){const r=e&&e[Ir];(!r||!r.isManual_)&&vn(9);const{scope_:n}=r;return Gb(n,t),Xb(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Ji("Patches").applyPatches_;return Xi(e)?n(e,t):this.produce(e,s=>n(s,t))}};function tg(e,t){const r=Ff(e)?Ji("MapSet").proxyMap_(e,t):Uf(e)?Ji("MapSet").proxySet_(e,t):k3(e,t);return(t?t.scope_:Hk()).drafts_.push(r),r}function is(e){return Xi(e)||vn(10,e),Yk(e)}function Yk(e){if(!fs(e)||Bf(e))return e;const t=e[Ir];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Xp(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Xp(e,!0);return pd(r,(n,s)=>{Kk(r,n,Yk(s))}),t&&(t.finalized_=!1),r}var $r=new E3,Xk=$r.produce;$r.produceWithPatches.bind($r);$r.setAutoFreeze.bind($r);$r.setUseStrictShallowCopy.bind($r);$r.applyPatches.bind($r);$r.createDraft.bind($r);$r.finishDraft.bind($r);function Jk(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var C3=Jk(),A3=Jk,T3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?md:md.apply(null,arguments)};function rn(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Tr(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Qk(n)&&n.type===e,r}var Zk=class cl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,cl.prototype)}static get[Symbol.species](){return cl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new cl(...t[0].concat(this)):new cl(...t.concat(this))}};function Zb(e){return fs(e)?Xk(e,()=>{}):e}function su(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function O3(e){return typeof e=="boolean"}var D3=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new Zk;return r&&(O3(r)?o.push(C3):o.push(A3(r.extraArgument))),o},M3="RTK_autoBatch",ew=e=>t=>{setTimeout(t,e)},I3=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ew(10):e.type==="callback"?e.queueNotification:ew(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),m=n.subscribe(f);return l.add(d),()=>{m(),l.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[M3]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},$3=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new Zk(e);return n&&s.push(I3(typeof n=="object"?n:void 0)),s};function z3(e){const t=D3(),{reducer:r=void 0,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(vx(r))c=Bk(r);else throw new Error(Tr(1));let u;typeof n=="function"?u=n(t):u=t();let d=md;s&&(d=T3({trace:!1,...typeof s=="object"&&s}));const f=v3(...u),m=$3(f);let h=typeof l=="function"?l(m):m();const p=d(...h);return Uk(c,o,p)}function e2(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Tr(28));if(l in t)throw new Error(Tr(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function L3(e){return typeof e=="function"}function R3(e,t){let[r,n,s]=e2(t),i;if(L3(e))i=()=>Zb(e());else{const l=Zb(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Xi(d)){const h=f(d,c);return h===void 0?d:h}else{if(fs(d))return Xk(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},l)}return o.getInitialState=i,o}var q3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",F3=(e=21)=>{let t="",r=e;for(;r--;)t+=q3[Math.random()*64|0];return t},U3=Symbol.for("rtk-slice-createasyncthunk");function B3(e,t){return`${e}/${t}`}function Q3({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[U3];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Tr(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(W3()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(Tr(12));if(N in u.sliceCaseReducersByType)throw new Error(Tr(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:B3(i,_),createNotation:typeof s.reducers=="function"};H3(j)?Y3(N,j,d,t):K3(N,j,d)});function f(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?e2(s.extraReducers):[s.extraReducers],S={..._,...u.sliceCaseReducersByType};return R3(s.initialState,E=>{for(let O in S)E.addCase(O,S[O]);for(let O of u.sliceMatchers)E.addMatcher(O.matcher,O.reducer);for(let O of j)E.addMatcher(O.matcher,O.reducer);N&&E.addDefaultCase(N)})}const m=_=>_,h=new Map,p=new WeakMap;let y;function g(_,j){return y||(y=f()),y(_,j)}function v(){return y||(y=f()),y.getInitialState()}function x(_,j=!1){function N(E){let O=E[_];return typeof O>"u"&&j&&(O=su(p,N,v)),O}function S(E=m){const O=su(h,j,()=>new WeakMap);return su(O,E,()=>{const T={};for(const[$,P]of Object.entries(s.selectors??{}))T[$]=V3(P,E,()=>su(p,E,v),j);return T})}return{reducerPath:_,getSelectors:S,get selectors(){return S(N)},selectSlice:N}}const w={name:i,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...x(o),injectInto(_,{reducerPath:j,...N}={}){const S=j??o;return _.inject({reducerPath:S,reducer:g},N),{...w,...x(S,!0)}}};return w}}function V3(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var on=Q3();function W3(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function K3({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!G3(n))throw new Error(Tr(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?rn(e,o):rn(e))}function H3(e){return e._reducerDefinitionType==="asyncThunk"}function G3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Y3({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Tr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=s(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||iu,pending:l||iu,rejected:c||iu,settled:u||iu})}function iu(){}var X3="task",t2="listener",r2="completed",jx="cancelled",J3=`task-${jx}`,Z3=`task-${r2}`,rg=`${t2}-${jx}`,e5=`${t2}-${r2}`,Qf=class{constructor(e){wh(this,"name","TaskAbortError");wh(this,"message");this.code=e,this.message=`${X3} ${jx} (reason: ${e})`}},_x=(e,t)=>{if(typeof e!="function")throw new TypeError(Tr(32))},yd=()=>{},n2=(e,t=yd)=>(e.catch(t),e),s2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),$i=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},zi=e=>{if(e.aborted){const{reason:t}=e;throw new Qf(t)}};function i2(e,t){let r=yd;return new Promise((n,s)=>{const i=()=>s(new Qf(e.reason));if(e.aborted){i();return}r=s2(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=yd})}var t5=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Qf?"cancelled":"rejected",error:r}}finally{t==null||t()}},vd=e=>t=>n2(i2(e,t).then(r=>(zi(e),r))),a2=e=>{const t=vd(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ka}=Object,tw={},Vf="listenerMiddleware",r5=(e,t)=>{const r=n=>s2(e,()=>$i(n,e.reason));return(n,s)=>{_x(n);const i=new AbortController;r(i);const o=t5(async()=>{zi(e),zi(i.signal);const l=await n({pause:vd(i.signal),delay:a2(i.signal),signal:i.signal});return zi(i.signal),l},()=>$i(i,Z3));return s!=null&&s.autoJoin&&t.push(o.catch(yd)),{result:vd(e)(o),cancel(){$i(i,J3)}}}},n5=(e,t)=>{const r=async(n,s)=>{zi(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),c([f,m.getState(),m.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await i2(t,Promise.race(l));return zi(t),c}finally{i()}};return(n,s)=>n2(r(n,s))},o2=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=rn(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Tr(21));return _x(i),{predicate:s,type:t,effect:i}},l2=Ka(e=>{const{type:t,predicate:r,effect:n}=o2(e);return{id:F3(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Tr(22))}}},{withTypes:()=>l2}),rw=(e,t)=>{const{type:r,effect:n,predicate:s}=o2(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},ng=e=>{e.pending.forEach(t=>{$i(t,rg)})},s5=e=>()=>{e.forEach(ng),e.clear()},nw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},c2=Ka(rn(`${Vf}/add`),{withTypes:()=>c2}),i5=rn(`${Vf}/removeAll`),u2=Ka(rn(`${Vf}/remove`),{withTypes:()=>u2}),a5=(...e)=>{console.error(`${Vf}/error`,...e)},wc=(e={})=>{const t=new Map,{extra:r,onError:n=a5}=e;_x(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&ng(d)}),i=d=>{const f=rw(t,d)??l2(d);return s(f)};Ka(i,{withTypes:()=>i});const o=d=>{const f=rw(t,d);return f&&(f.unsubscribe(),d.cancelActive&&ng(f)),!!f};Ka(o,{withTypes:()=>o});const l=async(d,f,m,h)=>{const p=new AbortController,y=n5(i,p.signal),g=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,Ka({},m,{getOriginalState:h,condition:(v,x)=>y(v,x).then(Boolean),take:y,delay:a2(p.signal),pause:vd(p.signal),extra:r,signal:p.signal,fork:r5(p.signal,g),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((v,x,w)=>{v!==p&&($i(v,rg),w.delete(v))})},cancel:()=>{$i(p,rg),d.pending.delete(p)},throwIfCancelled:()=>{zi(p.signal)}})))}catch(v){v instanceof Qf||nw(n,v,{raisedBy:"effect"})}finally{await Promise.all(g),$i(p,e5),d.pending.delete(p)}},c=s5(t);return{middleware:d=>f=>m=>{if(!Qk(m))return f(m);if(c2.match(m))return i(m.payload);if(i5.match(m)){c();return}if(u2.match(m))return o(m.payload);let h=d.getState();const p=()=>{if(h===tw)throw new Error(Tr(23));return h};let y;try{if(y=f(m),t.size>0){const g=d.getState(),v=Array.from(t.values());for(const x of v){let w=!1;try{w=x.predicate(m,g,h)}catch(_){w=!1,nw(n,_,{raisedBy:"predicate"})}w&&l(x,m,d,p)}}}finally{h=tw}return y},startListening:i,stopListening:o,clearListeners:c}};function Tr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},d2=on({name:"chartLayout",initialState:o5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:l5,setLayout:c5,setChartSize:u5,setScale:d5}=d2.actions,f5=d2.reducer;function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(n){h5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h5(e,t,r){return(t=m5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m5(e){var t=p5(e,"string");return typeof t=="symbol"?t:t+""}function p5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bd=Math.PI/180,g5=e=>e*180/Math.PI,$t=(e,t,r,n)=>({x:e+Math.cos(-bd*n)*r,y:t+Math.sin(-bd*n)*r}),x5=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},y5=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},v5=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=y5({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:g5(c),angleInRadian:c}},b5=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},w5=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},j5=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=v5({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=b5(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?iw(iw({},t),{},{radius:s,angle:w5(d,t)}):null};function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(n){_5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _5(e,t,r){return(t=N5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N5(e){var t=S5(e,"string");return typeof t=="symbol"?t:t+""}function S5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ht(e,t,r){return Ie(e)||Ie(t)?r:Fn(t)?Yi(e,t,r):typeof t=="function"?t(e):r}var k5=(e,t,r,n,s)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(pr(d-u)!==pr(f-d)){var h=[];if(pr(f-d)===pr(s[1]-s[0])){m=f;var p=d+s[1]-s[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{m=u;var y=f+s[1]-s[0];h[0]=Math.min(d,(y+d)/2),h[1]=Math.max(d,(y+d)/2)}var g=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>g[0]&&e<=g[1]||e>=h[0]&&e<=h[1]){({index:o}=r[c]);break}}else{var v=Math.min(u,f),x=Math.max(u,f);if(e>(v+d)/2&&e<=(x+d)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},P5=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ce(e[i]))return Vr(Vr({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ce(e[o]))return Vr(Vr({},e),{},{[o]:e[o]+(s||0)})}return e},di=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",f2=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},h2=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:h}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=s==="category"&&o.bandwidth?o.bandwidth()/p:0;if(y=h==="angleAxis"&&i&&i.length>=2?pr(i[0]-i[1])*2*y:y,f||m){var g=(f||m||[]).map((v,x)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+y,value:v,offset:y,index:x}});return g.filter(v=>!Dr(v.coordinate))}return c&&u?u.map((v,x)=>({coordinate:o(v)+y,value:v,index:x,offset:y})):o.ticks&&!r&&d!=null?o.ticks(d).map((v,x)=>({coordinate:o(v)+y,value:v,offset:y,index:x})):o.domain().map((v,x)=>({coordinate:o(v)+y,value:n?n[v]:v,index:x,offset:y}))},ow=1e-4,E5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-ow,i=Math.max(n[0],n[1])+ow,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},C5=(e,t)=>{if(!t||t.length!==2||!ce(t[0])||!ce(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ce(e[0])||e[0]<r)&&(s[0]=r),(!ce(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},A5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=Dr(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},T5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Dr(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},O5={sign:A5,expand:y$,none:uo,silhouette:v$,wiggle:b$,positive:T5},D5=(e,t,r)=>{var n=O5[r],s=x$().keys(t).value((i,o)=>+Ht(i,o,0)).order(Hp).offset(n);return s(e)};function m2(e){return e==null?void 0:String(e)}function lw(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ie(s[t.dataKey])){var l=HS(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Ht(s,Ie(o)?t.dataKey:o);return Ie(c)?null:t.scale(c)}var cw=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ht(i,t.dataKey,t.scale.domain()[o]);return Ie(l)?null:t.scale(l)-s/2+n},M5=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},I5=e=>{var t=e.flat(2).filter(ce);return[Math.min(...t),Math.max(...t)]},$5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],z5=(e,t,r)=>{if(e!=null)return $5(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=I5(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},uw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Rf(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function fw(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Vr(Vr({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Wf(e,t){if(e)return String(e);if(typeof t=="string")return t}function L5(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?j5({x:e,y:t},n):null}var R5=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Vr(Vr(Vr({},n),$t(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Vr(Vr(Vr({},n),$t(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},q5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,vs=e=>e.layout.width,bs=e=>e.layout.height,F5=e=>e.layout.scale,p2=e=>e.layout.margin,Nx=K(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sx=K(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),U5="data-recharts-item-index",B5="data-recharts-item-data-key",Kf=60;function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(n){Q5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q5(e,t,r){return(t=V5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V5(e){var t=W5(e,"string");return typeof t=="symbol"?t:t+""}function W5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K5=e=>e.brush.height,kt=K([vs,bs,p2,K5,Nx,Sx,Fk,h3],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((p,y)=>{var{orientation:g}=y;if(!y.mirror&&!y.hide){var v=typeof y.width=="number"?y.width:Kf;return Ps(Ps({},p),{},{[g]:p[g]+v})}return p},{left:r.left||0,right:r.right||0}),u=s.reduce((p,y)=>{var{orientation:g}=y;return!y.mirror&&!y.hide?Ps(Ps({},p),{},{[g]:Yi(p,"".concat(g))+y.height}):p},{top:r.top||0,bottom:r.bottom||0}),d=Ps(Ps({},u),c),f=d.bottom;d.bottom+=n,d=P5(d,o,l);var m=e-d.left-d.right,h=t-d.top-d.bottom;return Ps(Ps({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(h,0)})}),H5=K(kt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),g2=K(vs,bs,(e,t)=>({x:0,y:0,width:e,height:t})),G5=b.createContext(null),or=()=>b.useContext(G5)!=null,Hf=e=>e.brush,Gf=K([Hf,kt,p2],(e,t,r)=>({height:e.height,x:ce(e.x)?e.x:t.left,y:ce(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ce(e.width)?e.width:t.width})),kx=()=>{var e,t=or(),r=fe(H5),n=fe(Gf),s=(e=fe(Hf))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Y5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},x2=()=>{var e;return(e=fe(kt))!==null&&e!==void 0?e:Y5},y2=()=>fe(vs),v2=()=>fe(bs),Te=e=>e.layout.layoutType,Yf=()=>fe(Te),X5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},b2=on({name:"legend",initialState:X5,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=is(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:TK,setLegendSettings:OK,addLegendPayload:J5,removeLegendPayload:Z5}=b2.actions,ez=b2.reducer;function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sg.apply(null,arguments)}function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(r),!0).forEach(function(n){tz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tz(e,t,r){return(t=rz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rz(e){var t=nz(e,"string");return typeof t=="symbol"?t:t+""}function nz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sz(e){return Array.isArray(e)&&Fn(e[0])&&Fn(e[1])?e.join(" ~ "):e}var iz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,h=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?Rf(i,l):i).map((S,E)=>{if(S.type==="none")return null;var O=S.formatter||o||sz,{value:T,name:$}=S,P=T,z=$;if(O){var I=O(T,$,S,E,i);if(Array.isArray(I))[P,z]=I;else if(I!=null)P=I;else return null}var q=pm({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:q},Fn(z)?b.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Fn(z)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},P),b.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},p=pm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=pm({margin:0},s),g=!Ie(d),v=g?d:"",x=je("recharts-default-tooltip",c),w=je("recharts-tooltip-label",u);g&&f&&i!==void 0&&i!==null&&(v=f(d,i));var _=m?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",sg({className:x,style:p},_),b.createElement("p",{className:w,style:y},b.isValidElement(v)?v:"".concat(v)),h())},Yo="recharts-tooltip-wrapper",az={visibility:"hidden"};function oz(e){var{coordinate:t,translateX:r,translateY:n}=e;return je(Yo,{["".concat(Yo,"-right")]:ce(r)&&t&&ce(t.x)&&r>=t.x,["".concat(Yo,"-left")]:ce(r)&&t&&ce(t.x)&&r<t.x,["".concat(Yo,"-bottom")]:ce(n)&&t&&ce(t.y)&&n>=t.y,["".concat(Yo,"-top")]:ce(n)&&t&&ce(t.y)&&n<t.y})}function pw(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&ce(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),f=r[n]+s;if(t[n])return o[n]?d:f;var m=c[n];if(m==null)return 0;if(o[n]){var h=d,p=m;return h<p?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var y=f+l,g=m+u;return y>g?Math.max(d,m):Math.max(f,m)}function lz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function cz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=pw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=pw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=lz({translateX:d,translateY:f,useTranslate3d:l})):u=az,{cssProperties:u,cssClasses:oz({translateX:d,translateY:f,coordinate:r})}}function gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(r),!0).forEach(function(n){ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ig(e,t,r){return(t=uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uz(e){var t=dz(e,"string");return typeof t=="symbol"?t:t+""}function dz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class fz extends b.PureComponent{constructor(){super(...arguments),ig(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ig(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:h,wrapperStyle:p,lastBoundingBox:y,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:x,cssProperties:w}=cz({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:m,viewBox:h}),_=v?{}:au(au({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=au(au({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:x,style:j,ref:g},i)}}var hz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Po={isSsr:hz()},w2=()=>fe(e=>e.rootProps.accessibilityLayer);function zr(e){return Number.isFinite(e)}function wd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ag.apply(null,arguments)}function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(r),!0).forEach(function(n){mz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mz(e,t,r){return(t=pz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pz(e){var t=gz(e,"string");return typeof t=="symbol"?t:t+""}function gz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vw={curveBasisClosed:a$,curveBasisOpen:o$,curveBasis:i$,curveBumpX:VI,curveBumpY:WI,curveLinearClosed:l$,curveLinear:Of,curveMonotoneX:c$,curveMonotoneY:u$,curveNatural:d$,curveStep:f$,curveStepAfter:m$,curveStepBefore:h$},ou=e=>zr(e.x)&&zr(e.y),Xo=e=>e.x,Jo=e=>e.y,xz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(bc(e));return(r==="curveMonotone"||r==="curveBump")&&t?vw["".concat(r).concat(t==="vertical"?"Y":"X")]:vw[r]||Of},yz=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=xz(t,s),l=i?r.filter(ou):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>ou(f)):n,d=l.map((f,m)=>yw(yw({},f),{},{base:u[m]}));return s==="vertical"?c=tu().y(Jo).x1(Xo).x0(f=>f.base.x):c=tu().x(Xo).y1(Jo).y0(f=>f.base.y),c.defined(ou).curve(o),c(d)}return s==="vertical"&&ce(n)?c=tu().y(Jo).x1(Xo).x0(n):ce(n)?c=tu().x(Xo).y1(Jo).y0(n):c=nk().x(Xo).y(Jo),c.defined(ou).curve(o),c(l)},j2=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?yz(e):n;return b.createElement("path",ag({},Pe(e,!1),nx(e),{className:je("recharts-curve",t),d:i===null?void 0:i,ref:s}))},vz=["x","y","top","left","width","height","className"];function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(null,arguments)}function bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(r),!0).forEach(function(n){wz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wz(e,t,r){return(t=jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jz(e){var t=_z(e,"string");return typeof t=="symbol"?t:t+""}function _z(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nz(e,t){if(e==null)return{};var r,n,s=Sz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Sz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kz=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Pz=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=Nz(e,vz),u=bz({x:t,y:r,top:n,left:s,width:i,height:o},c);return!ce(t)||!ce(r)||!ce(i)||!ce(o)||!ce(n)||!ce(s)?null:b.createElement("path",og({},Pe(u,!0),{className:je("recharts-cross",l),d:kz(t,r,i,o,n,s)}))};function Ez(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){Az(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Az(e,t,r){return(t=Tz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tz(e){var t=Oz(e,"string");return typeof t=="symbol"?t:t+""}function Oz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ws(e,t){var r=Cz({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var _2={},N2={},S2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(S2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S2,r=mx,n=$f,s=zf,i=If;function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,m,h,p,y){const g=y(u,d,f,m,h,p);if(g!==void 0)return g;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,p,y)}return c(u,d,p,y)}function c(u,d,f,m){if(Object.is(u,d))return!0;let h=n.getTag(u),p=n.getTag(d);if(h===s.argumentsTag&&(h=s.objectTag),p===s.argumentsTag&&(p=s.objectTag),h!==p)return!1;switch(h){case s.stringTag:return u.toString()===d.toString();case s.numberTag:{const v=u.valueOf(),x=d.valueOf();return i.eq(v,x)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(u.valueOf(),d.valueOf());case s.regexpTag:return u.source===d.source&&u.flags===d.flags;case s.functionTag:return u===d}f=f??new Map;const y=f.get(u),g=f.get(d);if(y!=null&&g!=null)return y===d;f.set(u,d),f.set(d,u);try{switch(h){case s.mapTag:{if(u.size!==d.size)return!1;for(const[v,x]of u.entries())if(!d.has(v)||!l(x,d.get(v),v,u,d,f,m))return!1;return!0}case s.setTag:{if(u.size!==d.size)return!1;const v=Array.from(u.values()),x=Array.from(d.values());for(let w=0;w<v.length;w++){const _=v[w],j=x.findIndex(N=>l(_,N,void 0,u,d,f,m));if(j===-1)return!1;x.splice(j,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let v=0;v<u.length;v++)if(!l(u[v],d[v],v,u,d,f,m))return!1;return!0}case s.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case s.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case s.errorTag:return u.name===d.name&&u.message===d.message;case s.objectTag:{if(!(c(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const x=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(x.length!==w.length)return!1;for(let _=0;_<x.length;_++){const j=x[_],N=u[j];if(!Object.hasOwn(d,j))return!1;const S=d[j];if(!l(N,S,j,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(N2);var k2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(k2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2,r=k2;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(_2);var Dz=_2.isEqual;const Mz=Qn(Dz);function Iz(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var jd=1e-4,P2=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],E2=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),jw=(e,t)=>r=>{var n=P2(e,t);return E2(n,r)},$z=(e,t)=>r=>{var n=P2(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return E2(s,r)},_w=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,n,r,s]=o);var u=jw(t,r),d=jw(n,s),f=$z(t,r),m=p=>p>1?1:p<0?0:p,h=p=>{for(var y=p>1?1:p,g=y,v=0;v<8;++v){var x=u(g)-y,w=f(g);if(Math.abs(x-y)<jd||w<jd)return d(g);g=m(g-x/w)}return d(g)};return h.isStepper=!1,h},zz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*s/1e3,m=c*s/1e3+o;return Math.abs(m-l)<jd&&Math.abs(f)<jd?[l,0]:[m,f]};return i.isStepper=!0,i.dt=s,i},Lz=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _w(e);case"spring":return zz();default:if(e.split("(")[0]==="cubic-bezier")return _w(e)}return typeof e=="function"?e:null};function Nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(r),!0).forEach(function(n){Rz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rz(e,t,r){return(t=qz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qz(e){var t=Fz(e,"string");return typeof t=="symbol"?t:t+""}function Fz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uz=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Bz=(e,t,r)=>e.map(n=>"".concat(Uz(n)," ").concat(t,"ms ").concat(r)).join(","),Qz=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ec=(e,t)=>Object.keys(t).reduce((r,n)=>Sw(Sw({},r),{},{[n]:e(n,t[n])}),{});function kw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kw(Object(r),!0).forEach(function(n){Vz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vz(e,t,r){return(t=Wz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wz(e){var t=Kz(e,"string");return typeof t=="symbol"?t:t+""}function Kz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _d=(e,t,r)=>e+(t-e)*r,lg=e=>{var{from:t,to:r}=e;return t!==r},C2=(e,t,r)=>{var n=ec((s,i)=>{if(lg(i)){var[o,l]=e(i.from,i.to,i.velocity);return Ot(Ot({},i),{},{from:o,velocity:l})}return i},t);return r<1?ec((s,i)=>lg(i)?Ot(Ot({},i),{},{velocity:_d(i.velocity,n[s].velocity,r),from:_d(i.from,n[s].from,r)}):i,t):C2(e,n,r-1)};function Hz(e,t,r,n,s,i){var o,l=n.reduce((m,h)=>Ot(Ot({},m),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>ec((m,h)=>h.from,l),u=()=>!Object.values(l).filter(lg).length,d=null,f=m=>{o||(o=m);var h=m-o,p=h/r.dt;l=C2(r,l,p),s(Ot(Ot(Ot({},e),t),c())),o=m,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function Gz(e,t,r,n,s,i,o){var l=null,c=s.reduce((f,m)=>Ot(Ot({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,h=ec((y,g)=>_d(...g,r(m)),c);if(i(Ot(Ot(Ot({},e),t),h)),m<1)l=o.setTimeout(d);else{var p=ec((y,g)=>_d(...g,r(1)),c);i(Ot(Ot(Ot({},e),t),p))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Yz=(e,t,r,n,s,i)=>{var o=Qz(e,t);return r.isStepper===!0?Hz(e,t,r,o,s,i):Gz(e,t,r,n,o,s,i)};class Xz{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var Jz=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cg.apply(null,arguments)}function Zz(e,t){if(e==null)return{};var r,n,s=eL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(r),!0).forEach(function(n){Ai(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ai(e,t,r){return(t=tL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tL(e){var t=rL(e,"string");return typeof t=="symbol"?t:t+""}function rL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nL(){return Iz(new Xz)}class Px extends b.PureComponent{constructor(t,r){super(t,r),Ai(this,"mounted",!1),Ai(this,"manager",null),Ai(this,"stopJSAnimation",null),Ai(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(u);return}if(!(Mz(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?l:t.to;if(this.state&&c){var m={style:s?{[s]:f}:f};(s&&c[s]!==f||!s&&c!==f)&&this.setState(m)}this.runAnimation(Es(Es({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Yz(r,n,Lz(i),s,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=s?{[s]:i}:i,f=Bz(Object.keys(d),n,o);this.manager.start([l,r,Es(Es({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:h,animationManager:p}=t,y=Zz(t,Jz),g=b.Children.count(r),v=this.state.style;if(typeof r=="function")return r(v);if(!l||g===0||s<=0)return r;var x=w=>{var{style:_={},className:j}=w.props,N=b.cloneElement(w,Es(Es({},y),{},{style:Es(Es({},_),v),className:j}));return N};return g===1?x(b.Children.only(r)):b.createElement("div",null,b.Children.map(r,w=>x(w)))}}Ai(Px,"displayName","Animate");Ai(Px,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var sL=b.createContext(null);function Zi(e){var t,r,n=b.useContext(sL);return b.createElement(Px,cg({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:nL()}))}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nd.apply(null,arguments)}var Ew=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=s[f]>i?i:s[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var h=Math.min(i,s);u="M ".concat(e,",").concat(t+o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,`
            L `).concat(e+r-l*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,`
            L `).concat(e+r,",").concat(t+n-o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,`
            L `).concat(e+l*h,",").concat(t+n,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},iL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},A2=e=>{var t=ws(e,iL),r=b.useRef(null),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&s(v)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isAnimationActive:p,isUpdateAnimationActive:y}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var g=je("recharts-rectangle",d);return y?b.createElement(Zi,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:f,isActive:y},v=>{var{width:x,height:w,x:_,y:j}=v;return b.createElement(Zi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,isActive:p,easing:f},b.createElement("path",Nd({},Pe(t,!0),{className:g,d:Ew(_,j,x,w,u),ref:r})))}):b.createElement("path",Nd({},Pe(t,!0),{className:g,d:Ew(i,o,l,c,u)}))};function T2(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=$t(t,r,n,s),l=$t(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function ug(){return ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ug.apply(null,arguments)}var aL=(e,t)=>{var r=pr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},lu=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/bd,f=c?s:s+i*d,m=$t(t,r,u,f),h=$t(t,r,n,f),p=c?s-i*d:s,y=$t(t,r,u*Math.cos(d*bd),p);return{center:m,circleTangency:h,lineTangency:y,theta:d}},O2=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=aL(i,o),c=i+l,u=$t(t,r,s,i),d=$t(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=$t(t,r,n,i),h=$t(t,r,n,c);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},oL=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=pr(u-c),{circleTangency:f,lineTangency:m,theta:h}=lu({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:y,theta:g}=lu({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-g;if(v<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):O2({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var x="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=lu({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:S,theta:E}=lu({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),O=l?Math.abs(c-u):Math.abs(c-u)-j-E;if(O<0&&i===0)return"".concat(x,"L").concat(t,",").concat(r,"Z");x+="L".concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else x+="L".concat(t,",").concat(r,"Z");return x},lL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},D2=e=>{var t=ws(e,lL),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<s||u===d)return null;var m=je("recharts-sector",f),h=i-s,p=Sn(o,h,0,!0),y;return p>0&&Math.abs(u-d)<360?y=oL({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=O2({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),b.createElement("path",ug({},Pe(t,!0),{className:m,d:y}))};function cL(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,m=$t(l,c,u,f),h=$t(l,c,d,f);n=m.x,s=m.y,i=h.x,o=h.y}else return T2(t);return[{x:n,y:s},{x:i,y:o}]}var M2={},I2={},$2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xx;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})($2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$2;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(I2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yx,r=I2;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=n})(M2);var uL=M2.range;const z2=Qn(uL);function ei(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ex(e){let t,r,n;e.length!==2?(t=ei,r=(l,c)=>ei(e(l),c),n=(l,c)=>e(l)-c):(t=e===ei||e===dL?e:fL,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function fL(){return 0}function L2(e){return e===null?NaN:+e}function*hL(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const mL=Ex(ei),jc=mL.right;Ex(L2).center;class Cw extends Map{constructor(t,r=xL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Aw(this,t))}has(t){return super.has(Aw(this,t))}set(t,r){return super.set(pL(this,t),r)}delete(t){return super.delete(gL(this,t))}}function Aw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function pL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function gL({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function xL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yL(e=ei){if(e===ei)return R2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function R2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vL=Math.sqrt(50),bL=Math.sqrt(10),wL=Math.sqrt(2);function Sd(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=vL?10:i>=bL?5:i>=wL?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Sd(e,t,r*2):[l,c,u]}function dg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Sd(t,e,r):Sd(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function fg(e,t,r){return t=+t,e=+e,r=+r,Sd(e,t,r)[2]}function hg(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?fg(t,e,r):fg(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Tw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Ow(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function q2(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?R2:yL(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+m)),p=Math.min(n,Math.floor(t+(c-u)*f/c+m));q2(e,t,h,p,s)}const i=e[t];let o=r,l=n;for(Zo(e,r,t),s(e[n],i)>0&&Zo(e,r,n);o<l;){for(Zo(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Zo(e,r,l):(++l,Zo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Zo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function jL(e,t,r){if(e=Float64Array.from(hL(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Ow(e);if(t>=1)return Tw(e);var n,s=(n-1)*t,i=Math.floor(s),o=Tw(q2(e,i).subarray(0,i+1)),l=Ow(e.subarray(i+1));return o+(l-o)*(s-i)}}function _L(e,t,r=L2){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function NL(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ln(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function js(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mg=Symbol("implicit");function Cx(){var e=new Cw,t=[],r=[],n=mg;function s(i){let o=e.get(i);if(o===void 0){if(n!==mg)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Cw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Cx(t,r).unknown(n)},ln.apply(s,arguments),s}function Ax(){var e=Cx().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=s<n,p=h?s:n,y=h?n:s;i=(y-p)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),p+=(y-p-i*(m-c))*d,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var g=NL(m).map(function(v){return p+i*v});return r(h?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Ax(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ln.apply(f(),arguments)}function F2(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return F2(t())},e}function SL(){return F2(Ax.apply(null,arguments).paddingInner(1))}function Tx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function U2(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function _c(){}var tc=.7,kd=1/tc,Ha="\\s*([+-]?\\d+)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kL=/^#([0-9a-f]{3,8})$/,PL=new RegExp(`^rgb\\(${Ha},${Ha},${Ha}\\)$`),EL=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),CL=new RegExp(`^rgba\\(${Ha},${Ha},${Ha},${rc}\\)$`),AL=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${rc}\\)$`),TL=new RegExp(`^hsl\\(${rc},${Rn},${Rn}\\)$`),OL=new RegExp(`^hsla\\(${rc},${Rn},${Rn},${rc}\\)$`),Dw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tx(_c,nc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Mw,formatHex:Mw,formatHex8:DL,formatHsl:ML,formatRgb:Iw,toString:Iw});function Mw(){return this.rgb().formatHex()}function DL(){return this.rgb().formatHex8()}function ML(){return B2(this).formatHsl()}function Iw(){return this.rgb().formatRgb()}function nc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kL.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$w(t):r===3?new gr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?cu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?cu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=PL.exec(e))?new gr(t[1],t[2],t[3],1):(t=EL.exec(e))?new gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CL.exec(e))?cu(t[1],t[2],t[3],t[4]):(t=AL.exec(e))?cu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=TL.exec(e))?Rw(t[1],t[2]/100,t[3]/100,1):(t=OL.exec(e))?Rw(t[1],t[2]/100,t[3]/100,t[4]):Dw.hasOwnProperty(e)?$w(Dw[e]):e==="transparent"?new gr(NaN,NaN,NaN,0):null}function $w(e){return new gr(e>>16&255,e>>8&255,e&255,1)}function cu(e,t,r,n){return n<=0&&(e=t=r=NaN),new gr(e,t,r,n)}function IL(e){return e instanceof _c||(e=nc(e)),e?(e=e.rgb(),new gr(e.r,e.g,e.b,e.opacity)):new gr}function pg(e,t,r,n){return arguments.length===1?IL(e):new gr(e,t,r,n??1)}function gr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Tx(gr,pg,U2(_c,{brighter(e){return e=e==null?kd:Math.pow(kd,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gr(Li(this.r),Li(this.g),Li(this.b),Pd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zw,formatHex:zw,formatHex8:$L,formatRgb:Lw,toString:Lw}));function zw(){return`#${Ti(this.r)}${Ti(this.g)}${Ti(this.b)}`}function $L(){return`#${Ti(this.r)}${Ti(this.g)}${Ti(this.b)}${Ti((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lw(){const e=Pd(this.opacity);return`${e===1?"rgb(":"rgba("}${Li(this.r)}, ${Li(this.g)}, ${Li(this.b)}${e===1?")":`, ${e})`}`}function Pd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Li(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ti(e){return e=Li(e),(e<16?"0":"")+e.toString(16)}function Rw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new bn(e,t,r,n)}function B2(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof _c||(e=nc(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new bn(o,l,c,e.opacity)}function zL(e,t,r,n){return arguments.length===1?B2(e):new bn(e,t,r,n??1)}function bn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Tx(bn,zL,U2(_c,{brighter(e){return e=e==null?kd:Math.pow(kd,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new gr(gm(e>=240?e-240:e+120,s,n),gm(e,s,n),gm(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new bn(qw(this.h),uu(this.s),uu(this.l),Pd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pd(this.opacity);return`${e===1?"hsl(":"hsla("}${qw(this.h)}, ${uu(this.s)*100}%, ${uu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qw(e){return e=(e||0)%360,e<0?e+360:e}function uu(e){return Math.max(0,Math.min(1,e||0))}function gm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ox=e=>()=>e;function LL(e,t){return function(r){return e+r*t}}function RL(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function qL(e){return(e=+e)==1?Q2:function(t,r){return r-t?RL(t,r,e):Ox(isNaN(t)?r:t)}}function Q2(e,t){var r=t-e;return r?LL(e,r):Ox(isNaN(e)?t:e)}const Fw=function e(t){var r=qL(t);function n(s,i){var o=r((s=pg(s)).r,(i=pg(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=Q2(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function FL(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function UL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function BL(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Eo(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function QL(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ed(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function VL(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Eo(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var gg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xm=new RegExp(gg.source,"g");function WL(e){return function(){return e}}function KL(e){return function(t){return e(t)+""}}function HL(e,t){var r=gg.lastIndex=xm.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=gg.exec(e))&&(s=xm.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Ed(n,s)})),r=xm.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?KL(c[0].x):WL(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Eo(e,t){var r=typeof t,n;return t==null||r==="boolean"?Ox(t):(r==="number"?Ed:r==="string"?(n=nc(t))?(t=n,Fw):HL:t instanceof nc?Fw:t instanceof Date?QL:UL(t)?FL:Array.isArray(t)?BL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VL:Ed)(e,t)}function Dx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function GL(e,t){t===void 0&&(t=e,e=Eo);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function YL(e){return function(){return e}}function Cd(e){return+e}var Uw=[0,1];function rr(e){return e}function xg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:YL(isNaN(t)?NaN:.5)}function XL(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function JL(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=xg(s,n),i=r(o,i)):(n=xg(n,s),i=r(i,o)),function(l){return i(n(l))}}function ZL(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=xg(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=jc(e,l,1,n)-1;return i[c](s[c](l))}}function Nc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xf(){var e=Uw,t=Uw,r=Eo,n,s,i,o=rr,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==rr&&(o=XL(e[0],e[m-1])),l=m>2?ZL:JL,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(s((u||(u=l(t,e.map(n),Ed)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Cd),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=Dx,d()},f.clamp=function(m){return arguments.length?(o=m?!0:rr,d()):o!==rr},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,h){return n=m,s=h,d()}}function Mx(){return Xf()(rr,rr)}function eR(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ad(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mo(e){return e=Ad(Math.abs(e)),e?e[1]:NaN}function tR(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function rR(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var nR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sc(e){if(!(t=nR.exec(e)))throw new Error("invalid format: "+e);var t;return new Ix({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sc.prototype=Ix.prototype;function Ix(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ix.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sR(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var V2;function iR(e,t){var r=Ad(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(V2=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ad(e,Math.max(0,t+i-1))[0]}function Bw(e,t){var r=Ad(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Qw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eR,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bw(e*100,t),r:Bw,s:iR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Vw(e){return e}var Ww=Array.prototype.map,Kw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aR(e){var t=e.grouping===void 0||e.thousands===void 0?Vw:tR(Ww.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Vw:rR(Ww.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=sc(f);var m=f.fill,h=f.align,p=f.sign,y=f.symbol,g=f.zero,v=f.width,x=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(x=!0,j="g"):Qw[j]||(w===void 0&&(w=12),_=!0,j="g"),(g||m==="0"&&h==="=")&&(g=!0,m="0",h="=");var N=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=y==="$"?n:/[%p]/.test(j)?o:"",E=Qw[j],O=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T($){var P=N,z=S,I,q,Q;if(j==="c")z=E($)+z,$="";else{$=+$;var D=$<0||1/$<0;if($=isNaN($)?c:E(Math.abs($),w),_&&($=sR($)),D&&+$==0&&p!=="+"&&(D=!1),P=(D?p==="("?p:l:p==="-"||p==="("?"":p)+P,z=(j==="s"?Kw[8+V2/3]:"")+z+(D&&p==="("?")":""),O){for(I=-1,q=$.length;++I<q;)if(Q=$.charCodeAt(I),48>Q||Q>57){z=(Q===46?s+$.slice(I+1):$.slice(I))+z,$=$.slice(0,I);break}}}x&&!g&&($=t($,1/0));var k=P.length+$.length+z.length,C=k<v?new Array(v-k+1).join(m):"";switch(x&&g&&($=t(C+$,C.length?v-z.length:1/0),C=""),h){case"<":$=P+$+z+C;break;case"=":$=P+C+$+z;break;case"^":$=C.slice(0,k=C.length>>1)+P+$+z+C.slice(k);break;default:$=C+P+$+z;break}return i($)}return T.toString=function(){return f+""},T}function d(f,m){var h=u((f=sc(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mo(m)/3)))*3,y=Math.pow(10,-p),g=Kw[8+p/3];return function(v){return h(y*v)+g}}return{format:u,formatPrefix:d}}var du,$x,W2;oR({thousands:",",grouping:[3],currency:["$",""]});function oR(e){return du=aR(e),$x=du.format,W2=du.formatPrefix,du}function lR(e){return Math.max(0,-mo(Math.abs(e)))}function cR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mo(t)/3)))*3-mo(Math.abs(e)))}function uR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mo(t)-mo(e))+1}function K2(e,t,r,n){var s=hg(e,t,r),i;switch(n=sc(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=cR(s,o))&&(n.precision=i),W2(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=uR(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=lR(s))&&(n.precision=i-(n.type==="%")*2);break}}return $x(n)}function fi(e){var t=e.domain;return e.ticks=function(r){var n=t();return dg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return K2(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=fg(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function H2(){var e=Mx();return e.copy=function(){return Nc(e,H2())},ln.apply(e,arguments),fi(e)}function G2(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Cd),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return G2(e).unknown(t)},e=arguments.length?Array.from(e,Cd):[0,1],fi(r)}function Y2(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function Hw(e){return Math.log(e)}function Gw(e){return Math.exp(e)}function dR(e){return-Math.log(-e)}function fR(e){return-Math.exp(-e)}function hR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mR(e){return e===10?hR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Yw(e){return(t,r)=>-e(-t,r)}function zx(e){const t=e(Hw,Gw),r=t.domain;let n=10,s,i;function o(){return s=pR(n),i=mR(n),r()[0]<0?(s=Yw(s),i=Yw(i),e(dR,fR)):e(Hw,Gw),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),h=s(d),p,y;const g=l==null?10:+l;let v=[];if(!(n%1)&&h-m<g){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(p=1;p<n;++p)if(y=m<0?p/i(-m):p*i(m),!(y<u)){if(y>d)break;v.push(y)}}else for(;m<=h;++m)for(p=n-1;p>=1;--p)if(y=m>0?p/i(-m):p*i(m),!(y<u)){if(y>d)break;v.push(y)}v.length*2<g&&(v=dg(u,d,g))}else v=dg(m,h,Math.min(h-m,g)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sc(c)).precision==null&&(c.trim=!0),c=$x(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Y2(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function X2(){const e=zx(Xf()).domain([1,10]);return e.copy=()=>Nc(e,X2()).base(e.base()),ln.apply(e,arguments),e}function Xw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Lx(e){var t=1,r=e(Xw(t),Jw(t));return r.constant=function(n){return arguments.length?e(Xw(t=+n),Jw(t)):t},fi(r)}function J2(){var e=Lx(Xf());return e.copy=function(){return Nc(e,J2()).constant(e.constant())},ln.apply(e,arguments)}function Zw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gR(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function xR(e){return e<0?-e*e:e*e}function Rx(e){var t=e(rr,rr),r=1;function n(){return r===1?e(rr,rr):r===.5?e(gR,xR):e(Zw(r),Zw(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},fi(t)}function qx(){var e=Rx(Xf());return e.copy=function(){return Nc(e,qx()).exponent(e.exponent())},ln.apply(e,arguments),e}function yR(){return qx.apply(null,arguments).exponent(.5)}function ej(e){return Math.sign(e)*e*e}function vR(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Z2(){var e=Mx(),t=[0,1],r=!1,n;function s(i){var o=vR(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(ej(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Cd)).map(ej)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Z2(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ln.apply(s,arguments),fi(s)}function eP(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=_L(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[jc(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ei),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return eP().domain(e).range(t).unknown(n)},ln.apply(i,arguments)}function tP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[jc(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return tP().domain([e,t]).range(s).unknown(i)},ln.apply(fi(o),arguments)}function rP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[jc(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return rP().domain(e).range(t).unknown(r)},ln.apply(s,arguments)}const ym=new Date,vm=new Date;function vt(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>vt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(ym.setTime(+i),vm.setTime(+o),e(ym),e(vm),Math.floor(r(ym,vm))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Td=vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Td.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Td);Td.range;const rs=1e3,Hr=rs*60,ns=Hr*60,hs=ns*24,Fx=hs*7,tj=hs*30,bm=hs*365,Oi=vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*rs)},(e,t)=>(t-e)/rs,e=>e.getUTCSeconds());Oi.range;const Ux=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rs)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getMinutes());Ux.range;const Bx=vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getUTCMinutes());Bx.range;const Qx=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rs-e.getMinutes()*Hr)},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getHours());Qx.range;const Vx=vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getUTCHours());Vx.range;const Sc=vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hr)/hs,e=>e.getDate()-1);Sc.range;const Jf=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hs,e=>e.getUTCDate()-1);Jf.range;const nP=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hs,e=>Math.floor(e/hs));nP.range;function oa(e){return vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/Fx)}const Zf=oa(0),Od=oa(1),bR=oa(2),wR=oa(3),po=oa(4),jR=oa(5),_R=oa(6);Zf.range;Od.range;bR.range;wR.range;po.range;jR.range;_R.range;function la(e){return vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Fx)}const eh=la(0),Dd=la(1),NR=la(2),SR=la(3),go=la(4),kR=la(5),PR=la(6);eh.range;Dd.range;NR.range;SR.range;go.range;kR.range;PR.range;const Wx=vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Wx.range;const Kx=vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kx.range;const ms=vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ms.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ms.range;const ps=vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ps.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ps.range;function sP(e,t,r,n,s,i){const o=[[Oi,1,rs],[Oi,5,5*rs],[Oi,15,15*rs],[Oi,30,30*rs],[i,1,Hr],[i,5,5*Hr],[i,15,15*Hr],[i,30,30*Hr],[s,1,ns],[s,3,3*ns],[s,6,6*ns],[s,12,12*ns],[n,1,hs],[n,2,2*hs],[r,1,Fx],[t,1,tj],[t,3,3*tj],[e,1,bm]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),p=h?h.range(u,+d+1):[];return m?p.reverse():p}function c(u,d,f){const m=Math.abs(d-u)/f,h=Ex(([,,g])=>g).right(o,m);if(h===o.length)return e.every(hg(u/bm,d/bm,f));if(h===0)return Td.every(Math.max(hg(u,d,f),1));const[p,y]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return p.every(y)}return[l,c]}const[ER,CR]=sP(ps,Kx,eh,nP,Vx,Bx),[AR,TR]=sP(ms,Wx,Zf,Sc,Qx,Ux);function wm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function el(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function OR(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=tl(s),d=rl(s),f=tl(i),m=rl(i),h=tl(o),p=rl(o),y=tl(l),g=rl(l),v=tl(c),x=rl(c),w={a:D,A:k,b:C,B:A,c:null,d:oj,e:oj,f:tq,g:dq,G:hq,H:JR,I:ZR,j:eq,L:iP,m:rq,M:nq,p:R,q:F,Q:uj,s:dj,S:sq,u:iq,U:aq,V:oq,w:lq,W:cq,x:null,X:null,y:uq,Y:fq,Z:mq,"%":cj},_={a:Z,A:re,b:ne,B:J,c:null,d:lj,e:lj,f:yq,g:Eq,G:Aq,H:pq,I:gq,j:xq,L:oP,m:vq,M:bq,p:he,q:rt,Q:uj,s:dj,S:wq,u:jq,U:_q,V:Nq,w:Sq,W:kq,x:null,X:null,y:Pq,Y:Cq,Z:Tq,"%":cj},j={a:T,A:$,b:P,B:z,c:I,d:ij,e:ij,f:HR,g:sj,G:nj,H:aj,I:aj,j:QR,L:KR,m:BR,M:VR,p:O,q:UR,Q:YR,s:XR,S:WR,u:zR,U:LR,V:RR,w:$R,W:qR,x:q,X:Q,y:sj,Y:nj,Z:FR,"%":GR};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(B,ee){return function(le){var G=[],et=-1,ge=0,Ee=B.length,ze,ot,Ye;for(le instanceof Date||(le=new Date(+le));++et<Ee;)B.charCodeAt(et)===37&&(G.push(B.slice(ge,et)),(ot=rj[ze=B.charAt(++et)])!=null?ze=B.charAt(++et):ot=ze==="e"?" ":"0",(Ye=ee[ze])&&(ze=Ye(le,ot)),G.push(ze),ge=et+1);return G.push(B.slice(ge,et)),G.join("")}}function S(B,ee){return function(le){var G=el(1900,void 0,1),et=E(G,B,le+="",0),ge,Ee;if(et!=le.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(ee&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(ge=jm(el(G.y,0,1)),Ee=ge.getUTCDay(),ge=Ee>4||Ee===0?Dd.ceil(ge):Dd(ge),ge=Jf.offset(ge,(G.V-1)*7),G.y=ge.getUTCFullYear(),G.m=ge.getUTCMonth(),G.d=ge.getUTCDate()+(G.w+6)%7):(ge=wm(el(G.y,0,1)),Ee=ge.getDay(),ge=Ee>4||Ee===0?Od.ceil(ge):Od(ge),ge=Sc.offset(ge,(G.V-1)*7),G.y=ge.getFullYear(),G.m=ge.getMonth(),G.d=ge.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),Ee="Z"in G?jm(el(G.y,0,1)).getUTCDay():wm(el(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(Ee+5)%7:G.w+G.U*7-(Ee+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,jm(G)):wm(G)}}function E(B,ee,le,G){for(var et=0,ge=ee.length,Ee=le.length,ze,ot;et<ge;){if(G>=Ee)return-1;if(ze=ee.charCodeAt(et++),ze===37){if(ze=ee.charAt(et++),ot=j[ze in rj?ee.charAt(et++):ze],!ot||(G=ot(B,le,G))<0)return-1}else if(ze!=le.charCodeAt(G++))return-1}return G}function O(B,ee,le){var G=u.exec(ee.slice(le));return G?(B.p=d.get(G[0].toLowerCase()),le+G[0].length):-1}function T(B,ee,le){var G=h.exec(ee.slice(le));return G?(B.w=p.get(G[0].toLowerCase()),le+G[0].length):-1}function $(B,ee,le){var G=f.exec(ee.slice(le));return G?(B.w=m.get(G[0].toLowerCase()),le+G[0].length):-1}function P(B,ee,le){var G=v.exec(ee.slice(le));return G?(B.m=x.get(G[0].toLowerCase()),le+G[0].length):-1}function z(B,ee,le){var G=y.exec(ee.slice(le));return G?(B.m=g.get(G[0].toLowerCase()),le+G[0].length):-1}function I(B,ee,le){return E(B,t,ee,le)}function q(B,ee,le){return E(B,r,ee,le)}function Q(B,ee,le){return E(B,n,ee,le)}function D(B){return o[B.getDay()]}function k(B){return i[B.getDay()]}function C(B){return c[B.getMonth()]}function A(B){return l[B.getMonth()]}function R(B){return s[+(B.getHours()>=12)]}function F(B){return 1+~~(B.getMonth()/3)}function Z(B){return o[B.getUTCDay()]}function re(B){return i[B.getUTCDay()]}function ne(B){return c[B.getUTCMonth()]}function J(B){return l[B.getUTCMonth()]}function he(B){return s[+(B.getUTCHours()>=12)]}function rt(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var ee=N(B+="",w);return ee.toString=function(){return B},ee},parse:function(B){var ee=S(B+="",!1);return ee.toString=function(){return B},ee},utcFormat:function(B){var ee=N(B+="",_);return ee.toString=function(){return B},ee},utcParse:function(B){var ee=S(B+="",!0);return ee.toString=function(){return B},ee}}}var rj={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,DR=/^%/,MR=/[\\^$*+?|[\]().{}]/g;function _e(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function IR(e){return e.replace(MR,"\\$&")}function tl(e){return new RegExp("^(?:"+e.map(IR).join("|")+")","i")}function rl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function $R(e,t,r){var n=Pt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function zR(e,t,r){var n=Pt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function LR(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function RR(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function qR(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nj(e,t,r){var n=Pt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sj(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function FR(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function UR(e,t,r){var n=Pt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function BR(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ij(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function QR(e,t,r){var n=Pt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function aj(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function VR(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function WR(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function KR(e,t,r){var n=Pt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function HR(e,t,r){var n=Pt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function GR(e,t,r){var n=DR.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function YR(e,t,r){var n=Pt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function XR(e,t,r){var n=Pt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function oj(e,t){return _e(e.getDate(),t,2)}function JR(e,t){return _e(e.getHours(),t,2)}function ZR(e,t){return _e(e.getHours()%12||12,t,2)}function eq(e,t){return _e(1+Sc.count(ms(e),e),t,3)}function iP(e,t){return _e(e.getMilliseconds(),t,3)}function tq(e,t){return iP(e,t)+"000"}function rq(e,t){return _e(e.getMonth()+1,t,2)}function nq(e,t){return _e(e.getMinutes(),t,2)}function sq(e,t){return _e(e.getSeconds(),t,2)}function iq(e){var t=e.getDay();return t===0?7:t}function aq(e,t){return _e(Zf.count(ms(e)-1,e),t,2)}function aP(e){var t=e.getDay();return t>=4||t===0?po(e):po.ceil(e)}function oq(e,t){return e=aP(e),_e(po.count(ms(e),e)+(ms(e).getDay()===4),t,2)}function lq(e){return e.getDay()}function cq(e,t){return _e(Od.count(ms(e)-1,e),t,2)}function uq(e,t){return _e(e.getFullYear()%100,t,2)}function dq(e,t){return e=aP(e),_e(e.getFullYear()%100,t,2)}function fq(e,t){return _e(e.getFullYear()%1e4,t,4)}function hq(e,t){var r=e.getDay();return e=r>=4||r===0?po(e):po.ceil(e),_e(e.getFullYear()%1e4,t,4)}function mq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_e(t/60|0,"0",2)+_e(t%60,"0",2)}function lj(e,t){return _e(e.getUTCDate(),t,2)}function pq(e,t){return _e(e.getUTCHours(),t,2)}function gq(e,t){return _e(e.getUTCHours()%12||12,t,2)}function xq(e,t){return _e(1+Jf.count(ps(e),e),t,3)}function oP(e,t){return _e(e.getUTCMilliseconds(),t,3)}function yq(e,t){return oP(e,t)+"000"}function vq(e,t){return _e(e.getUTCMonth()+1,t,2)}function bq(e,t){return _e(e.getUTCMinutes(),t,2)}function wq(e,t){return _e(e.getUTCSeconds(),t,2)}function jq(e){var t=e.getUTCDay();return t===0?7:t}function _q(e,t){return _e(eh.count(ps(e)-1,e),t,2)}function lP(e){var t=e.getUTCDay();return t>=4||t===0?go(e):go.ceil(e)}function Nq(e,t){return e=lP(e),_e(go.count(ps(e),e)+(ps(e).getUTCDay()===4),t,2)}function Sq(e){return e.getUTCDay()}function kq(e,t){return _e(Dd.count(ps(e)-1,e),t,2)}function Pq(e,t){return _e(e.getUTCFullYear()%100,t,2)}function Eq(e,t){return e=lP(e),_e(e.getUTCFullYear()%100,t,2)}function Cq(e,t){return _e(e.getUTCFullYear()%1e4,t,4)}function Aq(e,t){var r=e.getUTCDay();return e=r>=4||r===0?go(e):go.ceil(e),_e(e.getUTCFullYear()%1e4,t,4)}function Tq(){return"+0000"}function cj(){return"%"}function uj(e){return+e}function dj(e){return Math.floor(+e/1e3)}var va,cP,uP;Oq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oq(e){return va=OR(e),cP=va.format,va.parse,uP=va.utcFormat,va.utcParse,va}function Dq(e){return new Date(e)}function Mq(e){return e instanceof Date?+e:+new Date(+e)}function Hx(e,t,r,n,s,i,o,l,c,u){var d=Mx(),f=d.invert,m=d.domain,h=u(".%L"),p=u(":%S"),y=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),x=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?h:l(N)<N?p:o(N)<N?y:i(N)<N?g:n(N)<N?s(N)<N?v:x:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?m(Array.from(N,Mq)):m().map(Dq)},d.ticks=function(N){var S=m();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?j:u(S)},d.nice=function(N){var S=m();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?m(Y2(S,N)):d},d.copy=function(){return Nc(d,Hx(e,t,r,n,s,i,o,l,c,u))},d}function Iq(){return ln.apply(Hx(AR,TR,ms,Wx,Zf,Sc,Qx,Ux,Oi,cP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $q(){return ln.apply(Hx(ER,CR,ps,Kx,eh,Jf,Vx,Bx,Oi,uP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function th(){var e=0,t=1,r,n,s,i,o=rr,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,p;return arguments.length?([h,p]=m,o=f(h,p),u):[o(0),o(1)]}}return u.range=d(Eo),u.rangeRound=d(Dx),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function hi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dP(){var e=fi(th()(rr));return e.copy=function(){return hi(e,dP())},js.apply(e,arguments)}function fP(){var e=zx(th()).domain([1,10]);return e.copy=function(){return hi(e,fP()).base(e.base())},js.apply(e,arguments)}function hP(){var e=Lx(th());return e.copy=function(){return hi(e,hP()).constant(e.constant())},js.apply(e,arguments)}function Gx(){var e=Rx(th());return e.copy=function(){return hi(e,Gx()).exponent(e.exponent())},js.apply(e,arguments)}function zq(){return Gx.apply(null,arguments).exponent(.5)}function mP(){var e=[],t=rr;function r(n){if(n!=null&&!isNaN(n=+n))return t((jc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ei),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>jL(e,i/n))},r.copy=function(){return mP(t).domain(e)},js.apply(r,arguments)}function rh(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=rr,d,f=!1,m;function h(y){return isNaN(y=+y)?m:(y=.5+((y=+d(y))-i)*(n*y<n*i?l:c),u(f?Math.max(0,Math.min(1,y)):y))}h.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h):[e,t,r]},h.clamp=function(y){return arguments.length?(f=!!y,h):f},h.interpolator=function(y){return arguments.length?(u=y,h):u};function p(y){return function(g){var v,x,w;return arguments.length?([v,x,w]=g,u=GL(y,[v,x,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(Eo),h.rangeRound=p(Dx),h.unknown=function(y){return arguments.length?(m=y,h):m},function(y){return d=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h}}function pP(){var e=fi(rh()(rr));return e.copy=function(){return hi(e,pP())},js.apply(e,arguments)}function gP(){var e=zx(rh()).domain([.1,1,10]);return e.copy=function(){return hi(e,gP()).base(e.base())},js.apply(e,arguments)}function xP(){var e=Lx(rh());return e.copy=function(){return hi(e,xP()).constant(e.constant())},js.apply(e,arguments)}function Yx(){var e=Rx(rh());return e.copy=function(){return hi(e,Yx()).exponent(e.exponent())},js.apply(e,arguments)}function Lq(){return Yx.apply(null,arguments).exponent(.5)}const ul=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ax,scaleDiverging:pP,scaleDivergingLog:gP,scaleDivergingPow:Yx,scaleDivergingSqrt:Lq,scaleDivergingSymlog:xP,scaleIdentity:G2,scaleImplicit:mg,scaleLinear:H2,scaleLog:X2,scaleOrdinal:Cx,scalePoint:SL,scalePow:qx,scaleQuantile:eP,scaleQuantize:tP,scaleRadial:Z2,scaleSequential:dP,scaleSequentialLog:fP,scaleSequentialPow:Gx,scaleSequentialQuantile:mP,scaleSequentialSqrt:zq,scaleSequentialSymlog:hP,scaleSqrt:yR,scaleSymlog:J2,scaleThreshold:rP,scaleTime:Iq,scaleUtc:$q,tickFormat:K2},Symbol.toStringTag,{value:"Module"}));var ca=e=>e.chartData,Rq=K([ca],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Xx=(e,t,r,n)=>n?Rq(e):ca(e);function xo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zr(t)&&zr(r))return!0}return!1}function fj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function qq(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(zr(r))s=r;else if(typeof r=="function")return;if(zr(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(xo(o))return o}}function Fq(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(xo(n))return fj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(ce(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&uw.test(s)){var c=uw.exec(s);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ce(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&dw.test(i)){var d=dw.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var m=[o,l];if(xo(m))return t==null?m:fj(m,t,r)}}}var Co=1e9,Uq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Zx,Ge=!0,nn="[DecimalError] ",Ri=nn+"Invalid argument: ",Jx=nn+"Exponent out of range: ",Ao=Math.floor,_i=Math.pow,Bq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Er,wt=1e7,Qe=7,yP=9007199254740991,Md=Ao(yP/Qe),ae={};ae.absoluteValue=ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ae.comparedTo=ae.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};ae.decimalPlaces=ae.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Qe;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ae.dividedBy=ae.div=function(e){return as(this,new this.constructor(e))};ae.dividedToIntegerBy=ae.idiv=function(e){var t=this,r=t.constructor;return De(as(t,new r(e),0,1),r.precision)};ae.equals=ae.eq=function(e){return!this.cmp(e)};ae.exponent=function(){return ft(this)};ae.greaterThan=ae.gt=function(e){return this.cmp(e)>0};ae.greaterThanOrEqualTo=ae.gte=function(e){return this.cmp(e)>=0};ae.isInteger=ae.isint=function(){return this.e>this.d.length-2};ae.isNegative=ae.isneg=function(){return this.s<0};ae.isPositive=ae.ispos=function(){return this.s>0};ae.isZero=function(){return this.s===0};ae.lessThan=ae.lt=function(e){return this.cmp(e)<0};ae.lessThanOrEqualTo=ae.lte=function(e){return this.cmp(e)<1};ae.logarithm=ae.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Er))throw Error(nn+"NaN");if(r.s<1)throw Error(nn+(r.s?"NaN":"-Infinity"));return r.eq(Er)?new n(0):(Ge=!1,t=as(ic(r,i),ic(e,i),i),Ge=!0,De(t,s))};ae.minus=ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wP(t,e):vP(t,(e.s=-e.s,e))};ae.modulo=ae.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(nn+"NaN");return r.s?(Ge=!1,t=as(r,e,0,1).times(e),Ge=!0,r.minus(t)):De(new n(r),s)};ae.naturalExponential=ae.exp=function(){return bP(this)};ae.naturalLogarithm=ae.ln=function(){return ic(this)};ae.negated=ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ae.plus=ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vP(t,e):wP(t,(e.s=-e.s,e))};ae.precision=ae.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ri+e);if(t=ft(s)+1,n=s.d.length-1,r=n*Qe+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ae.squareRoot=ae.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(nn+"NaN")}for(e=ft(l),Ge=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=In(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ao((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(as(l,i,o+2)).times(.5),In(i.d).slice(0,o)===(t=In(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(De(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ge=!0,De(n,r)};ae.times=ae.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=h.length,c<u&&(i=m,m=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+h[n]*m[s-n-1]+t,i[s--]=l%wt|0,t=l/wt|0;i[s]=(i[s]+t)%wt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ge?De(e,f.precision):e};ae.toDecimalPlaces=ae.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Un(e,0,Co),t===void 0?t=n.rounding:Un(t,0,8),De(r,e+ft(r)+1,t))};ae.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ea(n,!0):(Un(e,0,Co),t===void 0?t=s.rounding:Un(t,0,8),n=De(new s(n),e+1,t),r=ea(n,!0,e+1)),r};ae.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ea(s):(Un(e,0,Co),t===void 0?t=i.rounding:Un(t,0,8),n=De(new i(s),e+ft(s)+1,t),r=ea(n.abs(),!1,e+ft(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};ae.toInteger=ae.toint=function(){var e=this,t=e.constructor;return De(new t(e),ft(e)+1,t.rounding)};ae.toNumber=function(){return+this};ae.toPower=ae.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Er);if(l=new c(l),!l.s){if(e.s<1)throw Error(nn+"Infinity");return l}if(l.eq(Er))return l;if(n=c.precision,e.eq(Er))return De(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=yP){for(s=new c(Er),t=Math.ceil(n/Qe+4),Ge=!1;r%2&&(s=s.times(l),mj(s.d,t)),r=Ao(r/2),r!==0;)l=l.times(l),mj(l.d,t);return Ge=!0,e.s<0?new c(Er).div(s):De(s,n)}}else if(i<0)throw Error(nn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ge=!1,s=e.times(ic(l,n+u)),Ge=!0,s=bP(s),s.s=i,s};ae.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ft(s),n=ea(s,r<=i.toExpNeg||r>=i.toExpPos)):(Un(e,1,Co),t===void 0?t=i.rounding:Un(t,0,8),s=De(new i(s),e,t),r=ft(s),n=ea(s,e<=r||r<=i.toExpNeg,e)),n};ae.toSignificantDigits=ae.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Un(e,1,Co),t===void 0?t=n.rounding:Un(t,0,8)),De(new n(r),e,t)};ae.toString=ae.valueOf=ae.val=ae.toJSON=ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ft(e),r=e.constructor;return ea(e,t<=r.toExpNeg||t>=r.toExpPos)};function vP(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ge?De(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(f/Qe),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/wt|0,c[i]%=wt;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ge?De(t,f):t}function Un(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ri+e)}function In(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Qe-n.length,r&&(i+=Ds(r)),i+=n;o=e[t],n=o+"",r=Qe-n.length,r&&(i+=Ds(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var as=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%wt|0,o=i/wt|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*wt+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,f,m,h,p,y,g,v,x,w,_,j,N,S,E,O=n.constructor,T=n.s==s.s?1:-1,$=n.d,P=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(nn+"Division by zero");for(c=n.e-s.e,S=P.length,j=$.length,h=new O(T),p=h.d=[],u=0;P[u]==($[u]||0);)++u;if(P[u]>($[u]||0)&&--c,i==null?x=i=O.precision:o?x=i+(ft(n)-ft(s))+1:x=i,x<0)return new O(0);if(x=x/Qe+2|0,u=0,S==1)for(d=0,P=P[0],x++;(u<j||d)&&x--;u++)w=d*wt+($[u]||0),p[u]=w/P|0,d=w%P|0;else{for(d=wt/(P[0]+1)|0,d>1&&(P=e(P,d),$=e($,d),S=P.length,j=$.length),_=S,y=$.slice(0,S),g=y.length;g<S;)y[g++]=0;E=P.slice(),E.unshift(0),N=P[0],P[1]>=wt/2&&++N;do d=0,l=t(P,y,S,g),l<0?(v=y[0],S!=g&&(v=v*wt+(y[1]||0)),d=v/N|0,d>1?(d>=wt&&(d=wt-1),f=e(P,d),m=f.length,g=y.length,l=t(f,y,m,g),l==1&&(d--,r(f,S<m?E:P,m))):(d==0&&(l=d=1),f=P.slice()),m=f.length,m<g&&f.unshift(0),r(y,f,g),l==-1&&(g=y.length,l=t(P,y,S,g),l<1&&(d++,r(y,S<g?E:P,g))),g=y.length):l===0&&(d++,y=[0]),p[u++]=d,l&&y[0]?y[g++]=$[_]||0:(y=[$[_]],g=1);while((_++<j||y[0]!==void 0)&&x--)}return p[0]||p.shift(),h.e=c,De(h,o?i+ft(h)+1:i)}}();function bP(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(ft(e)>16)throw Error(Jx+ft(e));if(!e.s)return new d(Er);for(t==null?(Ge=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(_i(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Er),d.precision=l;;){if(s=De(s.times(e),l),r=r.times(++c),o=i.plus(as(s,r,l)),In(o.d).slice(0,l)===In(i.d).slice(0,l)){for(;u--;)i=De(i.times(i),l);return d.precision=f,t==null?(Ge=!0,De(i,f)):i}i=o}}function ft(e){for(var t=e.e*Qe,r=e.d[0];r>=10;r/=10)t++;return t}function _m(e,t,r){if(t>e.LN10.sd())throw Ge=!0,r&&(e.precision=r),Error(nn+"LN10 precision limit exceeded");return De(new e(e.LN10),t)}function Ds(e){for(var t="";e--;)t+="0";return t}function ic(e,t){var r,n,s,i,o,l,c,u,d,f=1,m=10,h=e,p=h.d,y=h.constructor,g=y.precision;if(h.s<1)throw Error(nn+(h.s?"NaN":"-Infinity"));if(h.eq(Er))return new y(0);if(t==null?(Ge=!1,u=g):u=t,h.eq(10))return t==null&&(Ge=!0),_m(y,u);if(u+=m,y.precision=u,r=In(p),n=r.charAt(0),i=ft(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=In(h.d),n=r.charAt(0),f++;i=ft(h),n>1?(h=new y("0."+r),i++):h=new y(n+"."+r.slice(1))}else return c=_m(y,u+2,g).times(i+""),h=ic(new y(n+"."+r.slice(1)),u-m).plus(c),y.precision=g,t==null?(Ge=!0,De(h,g)):h;for(l=o=h=as(h.minus(Er),h.plus(Er),u),d=De(h.times(h),u),s=3;;){if(o=De(o.times(d),u),c=l.plus(as(o,new y(s),u)),In(c.d).slice(0,u)===In(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(_m(y,u+2,g).times(i+""))),l=as(l,new y(f),u),y.precision=g,t==null?(Ge=!0,De(l,g)):l;l=c,s+=2}}function hj(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ao(r/Qe),e.d=[],n=(r+1)%Qe,r<0&&(n+=Qe),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Qe;n<s;)e.d.push(+t.slice(n,n+=Qe));t=t.slice(n),n=Qe-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ge&&(e.e>Md||e.e<-Md))throw Error(Jx+r)}else e.s=0,e.e=0,e.d=[0];return e}function De(e,t,r){var n,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Qe,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Qe),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Qe,s=n-Qe+o}if(r!==void 0&&(i=_i(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/_i(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ft(e),f.length=1,t=t-i-1,f[0]=_i(10,(Qe-t%Qe)%Qe),e.e=Ao(-t/Qe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=_i(10,Qe-n),f[d]=s>0?(u/_i(10,o-s)%_i(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==wt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=wt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ge&&(e.e>Md||e.e<-Md))throw Error(Jx+ft(e));return e}function wP(e,t){var r,n,s,i,o,l,c,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Ge?De(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),s=Math.max(Math.ceil(h/Qe),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=wt-1;--c[i],c[s]+=wt}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ge?De(t,h):t):new m(0)}function ea(e,t,r){var n,s=ft(e),i=In(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ds(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Ds(-s-1)+i,r&&(n=r-o)>0&&(i+=Ds(n))):s>=o?(i+=Ds(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Ds(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Ds(n))),e.s<0?"-"+i:i}function mj(e,t){if(e.length>t)return e.length=t,!0}function jP(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ri+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return hj(o,i.toString())}else if(typeof i!="string")throw Error(Ri+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Bq.test(i))hj(o,i);else throw Error(Ri+i)}if(s.prototype=ae,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=jP,s.config=s.set=Qq,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Qq(e){if(!e||typeof e!="object")throw Error(nn+"Object expected");var t,r,n,s=["precision",1,Co,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ao(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Ri+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ri+r+": "+n);return this}var Zx=jP(Uq);Er=new Zx(1);const Ce=Zx;var Vq=e=>e,_P={"@@functional/placeholder":!0},NP=e=>e===_P,pj=e=>function t(){return arguments.length===0||arguments.length===1&&NP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},SP=(e,t)=>e===1?t:pj(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==_P).length;return i>=e?t(...n):SP(e-i,pj(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>NP(d)?l.shift():d);return t(...u,...l)}))}),nh=e=>SP(e.length,e),yg=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Wq=nh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Kq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Vq;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},vg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),kP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function PP(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function EP(e,t,r){for(var n=new Ce(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}nh((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var CP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},AP=(e,t,r)=>{if(e.lte(0))return new Ce(0);var n=PP(e.toNumber()),s=new Ce(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ce(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new Ce(c.toNumber()):new Ce(Math.ceil(c.toNumber()))},Hq=(e,t,r)=>{var n=new Ce(1),s=new Ce(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ce(10).pow(PP(e)-1),s=new Ce(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ce(Math.floor(e)))}else e===0?s=new Ce(Math.floor((t-1)/2)):r||(s=new Ce(Math.floor(e)));var o=Math.floor((t-1)/2),l=Kq(Wq(c=>s.add(new Ce(c-o).mul(n)).toNumber()),yg);return l(0,t)},TP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var o=AP(new Ce(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new Ce(0):(l=new Ce(t).add(r).div(2),l=l.sub(new Ce(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Ce(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?TP(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ce(c).mul(o)),tickMax:l.add(new Ce(u).mul(o))})};function Gq(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=CP([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...yg(0,n-1).map(()=>1/0)]:[...yg(0,n-1).map(()=>-1/0),l];return t>r?vg(c):c}if(o===l)return Hq(o,n,s);var{step:u,tickMin:d,tickMax:f}=TP(o,l,i,s,0),m=EP(d,f.add(new Ce(.1).mul(u)),u);return t>r?vg(m):m}function Yq(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=CP([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=AP(new Ce(o).sub(i).div(l-1),s,0),u=[...EP(new Ce(i),new Ce(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?vg(u):u}var Xq=kP(Gq),Jq=kP(Yq),OP=e=>e.rootProps.maxBarSize,Zq=e=>e.rootProps.barGap,DP=e=>e.rootProps.barCategoryGap,eF=e=>e.rootProps.barSize,sh=e=>e.rootProps.stackOffset,ey=e=>e.options.chartName,ty=e=>e.rootProps.syncId,MP=e=>e.rootProps.syncMethod,ry=e=>e.options.eventEmitter,Xn={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},kr={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},ih=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},tF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Xn.angleAxisId,includeHidden:!1,name:void 0,reversed:Xn.reversed,scale:Xn.scale,tick:Xn.tick,tickCount:void 0,ticks:void 0,type:Xn.type,unit:void 0},rF={allowDataOverflow:kr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:kr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:kr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,ticks:void 0,type:kr.type,unit:void 0},nF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xn.scale,tick:Xn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},sF={allowDataOverflow:kr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:kr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:kr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,ticks:void 0,type:"category",unit:void 0},ny=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?nF:tF,sy=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?sF:rF,ah=e=>e.polarOptions,iy=K([vs,bs,kt],x5),IP=K([ah,iy],(e,t)=>{if(e!=null)return Sn(e.innerRadius,t,0)}),$P=K([ah,iy],(e,t)=>{if(e!=null)return Sn(e.outerRadius,t,t*.8)}),iF=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},zP=K([ah],iF);K([ny,zP],ih);var LP=K([iy,IP,$P],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});K([sy,LP],ih);var aF=K([Te,ah,IP,$P,vs,bs],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Sn(o,s,s/2),cy:Sn(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Et=(e,t)=>t,oh=(e,t,r)=>r;function gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gj(Object(r),!0).forEach(function(n){oF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oF(e,t,r){return(t=lF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lF(e){var t=cF(e,"string");return typeof t=="symbol"?t:t+""}function cF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bg=[0,"auto"],_r={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_s=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??_r},Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kf},mi=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Nr},uF={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ay=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??uF},jr=(e,t,r)=>{switch(t){case"xAxis":return _s(e,r);case"yAxis":return mi(e,r);case"zAxis":return ay(e,r);case"angleAxis":return ny(e,r);case"radiusAxis":return sy(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dF=(e,t,r)=>{switch(t){case"xAxis":return _s(e,r);case"yAxis":return mi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kc=(e,t,r)=>{switch(t){case"xAxis":return _s(e,r);case"yAxis":return mi(e,r);case"angleAxis":return ny(e,r);case"radiusAxis":return sy(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RP=e=>e.graphicalItems.countOfBars>0;function qP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var lh=e=>e.graphicalItems.cartesianItems,fF=K([Et,oh],qP),FP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Pc=K([lh,jr,fF],FP),UP=e=>e.filter(t=>t.stackId===void 0),hF=K([Pc],UP),BP=e=>e.map(t=>t.data).filter(Boolean).flat(1),mF=K([Pc],BP),QP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},ch=K([mF,Xx],QP),VP=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ht(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ht(s,n)}))):e.map(n=>({value:n})),uh=K([ch,jr,Pc],VP);function WP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ua(e){return e.filter(t=>Fn(t)||t instanceof Date).map(Number).filter(t=>Dr(t)===!1)}function pF(e,t,r){return!r||typeof t!="number"||Dr(t)?[]:r.length?ua(r.flatMap(n=>{var s=Ht(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!zr(i)||!zr(o)))return[t-i,t+o]})):[]}var KP=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(u=>u.dataKey);return[o,{stackedData:D5(e,c,r),graphicalItems:l}]}))},wg=K([ch,Pc,sh],KP),HP=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=z5(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},gF=K([wg,ca,Et],HP),GP=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>WP(n,d)),u=Ht(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:u,errorDomain:pF(s,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ht(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),xF=K(ch,jr,hF,Et,GP);function yF(e){var{value:t}=e;if(Fn(t)||t instanceof Date)return t}var vF=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ua(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bF=(e,t,r)=>{var n=e.map(yF).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&KS(n))?z2(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},oy=e=>{var t;if(e==null||!("domain"in e))return bg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ua(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bg},ly=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},YP=e=>e.referenceElements.dots,To=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),wF=K([YP,Et,oh],To),XP=e=>e.referenceElements.areas,jF=K([XP,Et,oh],To),JP=e=>e.referenceElements.lines,_F=K([JP,Et,oh],To),ZP=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},NF=K(wF,Et,ZP),eE=(e,t)=>{var r=ua(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},SF=K([jF,Et],eE),tE=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},kF=K(_F,Et,tE),PF=K(NF,kF,SF,(e,t,r)=>ly(e,r,t)),EF=K([jr],oy),rE=(e,t,r,n,s)=>{var i=qq(t,e.allowDataOverflow);return i??Fq(t,ly(r,s,vF(n)),e.allowDataOverflow)},CF=K([jr,EF,gF,xF,PF],rE),AF=[0,1],nE=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,u=di(t,i);return u&&l==null?z2(0,r.length):c==="category"?bF(n,e,u):s==="expand"?AF:o}},cy=K([jr,Te,ch,uh,sh,Et,CF],nE),sE=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(bc(i));return l in ul?l:"point"}}},Ec=K([jr,Te,RP,ey,Et],sE);function TF(e){if(e!=null){if(e in ul)return ul[e]();var t="scale".concat(bc(e));if(t in ul)return ul[t]()}}function uy(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=TF(t);if(s!=null){var i=s.domain(r).range(n);return E5(i),i}}}var iE=(e,t,r)=>{var n=oy(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&xo(e))return Xq(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xo(e))return Jq(e,t.tickCount,t.allowDecimals)}},dy=K([cy,kc,Ec],iE),aE=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xo(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},OF=K([jr,cy,dy,Et],aE),DF=K(uh,jr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ua(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),oE=K(DF,Te,DP,kt,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!zr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Sn(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),MF=(e,t)=>{var r=_s(e,t);return r==null||typeof r.padding!="string"?0:oE(e,"xAxis",t,r.padding)},IF=(e,t)=>{var r=mi(e,t);return r==null||typeof r.padding!="string"?0:oE(e,"yAxis",t,r.padding)},$F=K(_s,MF,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),zF=K(mi,IF,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),LF=K([kt,$F,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),RF=K([kt,Te,zF,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Cc=(e,t,r,n)=>{var s;switch(t){case"xAxis":return LF(e,r,n);case"yAxis":return RF(e,r,n);case"zAxis":return(s=ay(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return zP(e);case"radiusAxis":return LP(e,r);default:return}},lE=K([jr,Cc],ih),Oo=K([jr,Ec,OF,lE],uy);K(Pc,Et,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>WP(t,r)));function cE(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dh=(e,t)=>t,fh=(e,t,r)=>r,qF=K(Nx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(cE)),FF=K(Sx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(cE)),uE=(e,t)=>({width:e.width,height:t.height}),UF=(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}},dE=K(kt,_s,uE),BF=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},QF=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},VF=K(bs,kt,qF,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=uE(t,l);o==null&&(o=BF(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),WF=K(vs,kt,FF,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=UF(t,l);o==null&&(o=QF(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),KF=(e,t)=>{var r=kt(e),n=_s(e,t);if(n!=null){var s=VF(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},HF=(e,t)=>{var r=kt(e),n=mi(e,t);if(n!=null){var s=WF(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},fE=K(kt,mi,(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}}),xj=(e,t,r)=>{switch(t){case"xAxis":return dE(e,r).width;case"yAxis":return fE(e,r).height;default:return}},hE=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=di(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&KS(c))return c}},fy=K([Te,uh,jr,Et],hE),mE=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=di(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},hy=K([Te,uh,kc,Et],mE),yj=K([Te,dF,Ec,Oo,fy,hy,Cc,dy,Et],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var u=di(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),GF=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var u=di(e,c),{type:d,ticks:f,tickCount:m}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/h:0;p=c==="angleAxis"&&i!=null&&i.length>=2?pr(i[0]-i[1])*2*p:p;var y=f||s;if(y){var g=y.map((v,x)=>{var w=o?o.indexOf(v):v;return{index:x,coordinate:n(w)+p,value:v,offset:p}});return g.filter(v=>!Dr(v.coordinate))}return u&&l?l.map((v,x)=>({coordinate:n(v)+p,value:v,index:x,offset:p})):n.ticks?n.ticks(m).map(v=>({coordinate:n(v)+p,value:v,offset:p})):n.domain().map((v,x)=>({coordinate:n(v)+p,value:o?o[v]:v,index:x,offset:p}))}},pE=K([Te,kc,Ec,Oo,dy,Cc,fy,hy,Et],GF),YF=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=di(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?pr(n[0]-n[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},si=K([Te,kc,Oo,Cc,fy,hy,Et],YF),Bn=K(jr,Oo,(e,t)=>{if(!(e==null||t==null))return Id(Id({},e),{},{scale:t})}),XF=K([jr,Ec,cy,lE],uy);K((e,t,r)=>ay(e,r),XF,(e,t)=>{if(!(e==null||t==null))return Id(Id({},e),{},{scale:t})});var JF=K([Te,Nx,Sx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),gE=e=>e.options.defaultTooltipEventType,xE=e=>e.options.validateTooltipEventTypes;function yE(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function my(e,t){var r=gE(e),n=xE(e);return yE(t,r,n)}function ZF(e){return fe(t=>my(t,e))}var vE=(e,t)=>{var r,n=Number(t);if(!(Dr(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},e8=e=>e.tooltip.settings,Rs={active:!1,index:null,dataKey:void 0,coordinate:void 0},t8={itemInteraction:{click:Rs,hover:Rs},axisInteraction:{click:Rs,hover:Rs},keyboardInteraction:Rs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bE=on({name:"tooltip",initialState:t8,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=is(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:r8,removeTooltipEntrySettings:n8,setTooltipSettingsState:s8,setActiveMouseOverItemIndex:wE,mouseLeaveItem:i8,mouseLeaveChart:jE,setActiveClickItemIndex:a8,setMouseOverAxisIndex:_E,setMouseClickAxisIndex:o8,setSyncInteraction:jg,setKeyboardInteraction:_g}=bE.actions,l8=bE.reducer;function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){c8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c8(e,t,r){return(t=u8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u8(e){var t=d8(e,"string");return typeof t=="symbol"?t:t+""}function d8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f8(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function h8(e){return e.index!=null}var NE=(e,t,r,n)=>{if(t==null)return Rs;var s=f8(e,t,r);if(s==null)return Rs;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(h8(s)){if(i)return fu(fu({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return fu(fu({},Rs),{},{coordinate:s.coordinate})},py=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!zr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},SE=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},kE=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Ac=e=>e.options.tooltipPayloadSearcher,Do=e=>e.tooltip;function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){m8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m8(e,t,r){return(t=p8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p8(e){var t=g8(e,"string");return typeof t=="symbol"?t:t+""}function g8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x8(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function y8(e,t){return e??t}var PE=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,h)=>{var p,{dataDefinedOnItem:y,settings:g}=h,v=y8(y,l),x=x8(v,u,d),w=(p=g==null?void 0:g.dataKey)!==null&&p!==void 0?p:n==null?void 0:n.dataKey,_=g==null?void 0:g.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(x)&&!Array.isArray(x[0])&&o==="axis"?j=HS(x,n.dataKey,s):j=i(x,t,c,_),Array.isArray(j))j.forEach(S=>{var E=wj(wj({},g),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});m.push(fw({tooltipEntrySettings:E,dataKey:S.dataKey,payload:S.payload,value:Ht(S.payload,S.dataKey),name:S.name}))});else{var N;m.push(fw({tooltipEntrySettings:g,dataKey:w,payload:j,value:Ht(j,w),name:(N=Ht(j,_))!==null&&N!==void 0?N:g==null?void 0:g.name}))}return m},f)}},Ct=e=>{var t=Te(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Mo=e=>e.tooltip.settings.axisId,qt=e=>{var t=Ct(e),r=Mo(e);return kc(e,t,r)},gy=K([qt,Te,RP,ey,Ct],sE),v8=K([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),b8=K([Ct,Mo],qP),hh=K([v8,qt,b8],FP),w8=K([hh],BP),da=K([w8,ca],QP),xy=K([da,qt,hh],VP),j8=K([qt],oy),_8=K([da,hh,sh],KP),N8=K([_8,ca,Ct],HP),S8=K([hh],UP),k8=K([da,qt,S8,Ct],GP),P8=K([YP,Ct,Mo],To),E8=K([P8,Ct],ZP),C8=K([XP,Ct,Mo],To),A8=K([C8,Ct],eE),T8=K([JP,Ct,Mo],To),O8=K([T8,Ct],tE),D8=K([E8,O8,A8],ly),M8=K([qt,j8,N8,k8,D8],rE),EE=K([qt,Te,da,xy,sh,Ct,M8],nE),I8=K([EE,qt,gy],iE),$8=K([qt,EE,I8,Ct],aE),CE=e=>{var t=Ct(e),r=Mo(e),n=!1;return Cc(e,t,r,n)},AE=K([qt,CE],ih),TE=K([qt,gy,$8,AE],uy),z8=K([Te,xy,qt,Ct],hE),L8=K([Te,xy,qt,Ct],mE),R8=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,u=di(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?pr(s[0]-s[1])*2*f:f,u&&o?o.map((m,h)=>({coordinate:n(m)+f,value:m,index:h,offset:f})):n.domain().map((m,h)=>({coordinate:n(m)+f,value:i?i[m]:m,index:h,offset:f}))}}},Ns=K([Te,qt,gy,TE,CE,z8,L8,Ct],R8),yy=K([gE,xE,e8],(e,t,r)=>yE(r.shared,e,t)),OE=e=>e.tooltip.settings.trigger,vy=e=>e.tooltip.settings.defaultIndex,mh=K([Do,yy,OE,vy],NE),ta=K([mh,da],py),DE=K([Ns,ta],vE),ME=K([mh],e=>{if(e)return e.dataKey}),IE=K([Do,yy,OE,vy],kE),q8=K([vs,bs,Te,kt,Ns,vy,IE,Ac],SE),F8=K([mh,q8],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),U8=K([mh],e=>e.active),B8=K([IE,ta,ca,qt,DE,Ac,yy],PE),Q8=K([B8],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(r),!0).forEach(function(n){V8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V8(e,t,r){return(t=W8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W8(e){var t=K8(e,"string");return typeof t=="symbol"?t:t+""}function K8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H8=()=>fe(qt),G8=()=>{var e=H8(),t=fe(Ns),r=fe(TE);return Zl(_j(_j({},e),{},{scale:r}),t)},Y8=()=>fe(ey),by=(e,t)=>t,$E=(e,t,r)=>r,wy=(e,t,r,n)=>n,X8=K(Ns,e=>Rf(e,t=>t.coordinate)),jy=K([Do,by,$E,wy],NE),zE=K([jy,da],py),J8=(e,t,r)=>{if(t!=null){var n=Do(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},LE=K([Do,by,$E,wy],kE),$d=K([vs,bs,Te,kt,Ns,wy,LE,Ac],SE),Z8=K([jy,$d],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),RE=K(Ns,zE,vE),eU=K([LE,zE,ca,qt,RE,Ac,by],PE),tU=K([jy],e=>({isActive:e.active,activeIndex:e.index})),rU=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=L5(e.chartX,e.chartY,t,r,l);if(c){var u=q5(c,t),d=k5(u,o,i,n,s),f=R5(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function Ng(){return Ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ng.apply(null,arguments)}function Nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nj(Object(r),!0).forEach(function(n){nU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nU(e,t,r){return(t=sU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sU(e){var t=iU(e,"string");return typeof t=="symbol"?t:t+""}function iU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aU(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,m=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var h,p;if(u==="ScatterChart")h=d,p=Pz;else if(u==="BarChart")h=Ez(o,d,s,i),p=A2;else if(o==="radial"){var{cx:y,cy:g,radius:v,startAngle:x,endAngle:w}=T2(d);h={cx:y,cy:g,startAngle:x,endAngle:w,innerRadius:v,outerRadius:v},p=D2}else h={points:cL(o,d,s)},p=j2;var _=typeof l=="object"&&"className"in l?l.className:void 0,j=hu(hu(hu(hu({stroke:"#ccc",pointerEvents:"none"},s),h),Pe(l,!1)),{},{payload:f,payloadIndex:m,className:je("recharts-tooltip-cursor",_)});return b.isValidElement(l)?b.cloneElement(l,j):b.createElement(p,j)}function oU(e){var t=G8(),r=x2(),n=Yf(),s=Y8();return b.createElement(aU,Ng({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var qE=b.createContext(null),lU=()=>b.useContext(qE),FE={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new s(d,f||c,m),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,p=new Array(h);m<h;m++)p[m]=f[m].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,h,p){var y=r?r+u:u;if(!this._events[y])return!1;var g=this._events[y],v=arguments.length,x,w;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,m),!0;case 5:return g.fn.call(g.context,d,f,m,h),!0;case 6:return g.fn.call(g.context,d,f,m,h,p),!0}for(w=1,x=new Array(v-1);w<v;w++)x[w-1]=arguments[w];g.fn.apply(g.context,x)}else{var _=g.length,j;for(w=0;w<_;w++)switch(g[w].once&&this.removeListener(u,g[w].fn,void 0,!0),v){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,d);break;case 3:g[w].fn.call(g[w].context,d,f);break;case 4:g[w].fn.call(g[w].context,d,f,m);break;default:if(!x)for(j=1,x=new Array(v-1);j<v;j++)x[j-1]=arguments[j];g[w].fn.apply(g[w].context,x)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===d&&(!m||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var y=0,g=[],v=p.length;y<v;y++)(p[y].fn!==d||m&&!p[y].once||f&&p[y].context!==f)&&g.push(p[y]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(FE);var cU=FE.exports;const uU=Qn(cU);var ac=new uU,Sg="recharts.syncEvent.tooltip",Sj="recharts.syncEvent.brush";function UE(e,t){if(t){var r=Number.parseInt(t,10);if(!Dr(r))return e==null?void 0:e[r]}}var dU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},BE=on({name:"options",initialState:dU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fU=BE.reducer,{createEventEmitter:hU}=BE.actions;function mU(e){return e.tooltip.syncInteraction}var pU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},QE=on({name:"chartData",initialState:pU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:kj,setDataStartEndIndexes:gU,setComputedData:DK}=QE.actions,xU=QE.reducer,VE=()=>{};function yU(){var e=fe(ty),t=fe(ry),r=yt(),n=fe(MP),s=fe(Ns),i=Yf(),o=kx(),l=fe(c=>c.rootProps.className);b.useEffect(()=>{if(e==null)return VE;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(s!=null){var m;if(typeof n=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},p=n(s,h);m=s[p]}else n==="value"&&(m=s.find(N=>String(N.value)===d.payload.label));var{coordinate:y}=d.payload;if(m==null||d.payload.active===!1||y==null||o==null){r(jg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:g,y:v}=y,x=Math.min(g,o.x+o.width),w=Math.min(v,o.y+o.height),_={x:i==="horizontal"?m.coordinate:x,y:i==="horizontal"?w:m.coordinate},j=jg({active:d.payload.active,coordinate:_,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(j)}}};return ac.on(Sg,c),()=>{ac.off(Sg,c)}},[l,r,t,e,n,s,i,o])}function vU(){var e=fe(ty),t=fe(ry),r=yt();b.useEffect(()=>{if(e==null)return VE;var n=(s,i,o)=>{t!==o&&e===s&&r(gU(i))};return ac.on(Sj,n),()=>{ac.off(Sj,n)}},[r,t,e])}function bU(){var e=yt();b.useEffect(()=>{e(hU())},[e]),yU(),vU()}function wU(e,t,r,n,s,i){var o=fe(m=>J8(m,e,t)),l=fe(ry),c=fe(ty),u=fe(MP),d=fe(mU),f=d==null?void 0:d.active;b.useEffect(()=>{if(!f&&c!=null&&l!=null){var m=jg({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ac.emit(Sg,c,m,l)}},[f,r,o,s,n,l,c,u,i])}function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){jU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jU(e,t,r){return(t=_U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _U(e){var t=NU(e,"string");return typeof t=="symbol"?t:t+""}function NU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SU(e){return e.dataKey}function kU(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(iz,t)}var Cj=[],PU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Po.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kg(e){var t=ws(e,PU),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:h,wrapperStyle:p,cursor:y,shared:g,trigger:v,defaultIndex:x,portal:w,axisId:_}=t,j=yt(),N=typeof x=="number"?String(x):x;b.useEffect(()=>{j(s8({shared:g,trigger:v,axisId:_,active:r,defaultIndex:N}))},[j,g,v,_,r,N]);var S=kx(),E=w2(),O=ZF(g),{activeIndex:T,isActive:$}=fe(ne=>tU(ne,O,v,N)),P=fe(ne=>eU(ne,O,v,N)),z=fe(ne=>RE(ne,O,v,N)),I=fe(ne=>Z8(ne,O,v,N)),q=P,Q=lU(),D=r??$,[k,C]=p3([q,D]),A=O==="axis"?z:void 0;wU(O,v,I,A,T,D);var R=w??Q;if(R==null)return null;var F=q??Cj;D||(F=Cj),l&&F.length&&(F=D$(q.filter(ne=>ne.value!=null&&(ne.hide!==!0||t.includeHidden)),d,SU));var Z=F.length>0,re=b.createElement(fz,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:D,coordinate:I,hasPayload:Z,offset:u,position:f,reverseDirection:m,useTranslate3d:h,viewBox:S,wrapperStyle:p,lastBoundingBox:k,innerRef:C,hasPortalFromProps:!!w},kU(o,Ej(Ej({},t),{},{payload:F,label:A,active:D,coordinate:I,accessibilityLayer:E})));return b.createElement(b.Fragment,null,AN.createPortal(re,R),D&&b.createElement(oU,{cursor:y,tooltipEventType:O,coordinate:I,payload:q,index:T}))}var WE={},KE={},HE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),y()};let m=null;const h=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},n)},p=()=>{m!==null&&(clearTimeout(m),m=null)},y=()=>{p(),o=void 0,l=null},g=()=>{d()},v=function(...x){if(s!=null&&s.aborted)return;o=this,l=x;const w=m==null;h(),c&&w&&d()};return v.schedule=h,v.cancel=y,v.flush=g,s==null||s.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(HE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HE;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const m=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),h=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,y),d)},p=()=>(m.flush(),d);return h.cancel=m.cancel,h.flush=p,h}e.debounce=r})(KE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KE;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(WE);var EU=WE.throttle;const CU=Qn(EU);var kl=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AU(e,t,r){return(t=TU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pg=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:m,onResize:h,style:p={}}=e,y=b.useRef(null),g=b.useRef();g.current=h,b.useImperativeHandle(t,()=>y.current);var[v,x]=b.useState({containerWidth:n.width,containerHeight:n.height}),w=b.useCallback((j,N)=>{x(S=>{var E=Math.round(j),O=Math.round(N);return S.containerWidth===E&&S.containerHeight===O?S:{containerWidth:E,containerHeight:O}})},[]);b.useEffect(()=>{var j=O=>{var T,{width:$,height:P}=O[0].contentRect;w($,P),(T=g.current)===null||T===void 0||T.call(g,$,P)};d>0&&(j=CU(j,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(j),{width:S,height:E}=y.current.getBoundingClientRect();return w(S,E),N.observe(y.current),()=>{N.disconnect()}},[w,d]);var _=b.useMemo(()=>{var{containerWidth:j,containerHeight:N}=v;if(j<0||N<0)return null;kl(Ci(s)||Ci(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),kl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var S=Ci(s)?j:s,E=Ci(i)?N:i;return r&&r>0&&(S?E=S/r:E&&(S=E*r),c&&E>c&&(E=c)),kl(S>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,E,s,i,o,l,r),b.Children.map(u,O=>b.cloneElement(O,{width:S,height:E,style:Nm({width:S,height:E},O.props.style)}))},[r,u,i,c,l,o,v,s]);return b.createElement("div",{id:f?"".concat(f):void 0,className:je("recharts-responsive-container",m),style:Nm(Nm({},p),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:y},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),GE=e=>null;GE.displayName="Cell";function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){DU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DU(e,t,r){return(t=MU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MU(e){var t=IU(e,"string");return typeof t=="symbol"?t:t+""}function IU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ba={widthCache:{},cacheCount:0},$U=2e3,zU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Oj="recharts_measurement_span";function LU(e){var t=Eg({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Pl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Po.isSsr)return{width:0,height:0};var n=LU(r),s=JSON.stringify({text:t,copyStyle:n});if(ba.widthCache[s])return ba.widthCache[s];try{var i=document.getElementById(Oj);i||(i=document.createElement("span"),i.setAttribute("id",Oj),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Eg(Eg({},zU),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ba.widthCache[s]=c,++ba.cacheCount>$U&&(ba.cacheCount=0,ba.widthCache={}),c}catch{return{width:0,height:0}}},Dj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,YE={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FU=Object.keys(YE),Ia="NaN";function UU(e,t){return e*YE[t]}class ur{static parse(t){var r,[,n,s]=(r=qU.exec(t))!==null&&r!==void 0?r:[];return new ur(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Dr(t)&&(this.unit=""),r!==""&&!RU.test(r)&&(this.num=NaN,this.unit=""),FU.includes(r)&&(this.num=UU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Dr(this.num)}}function XE(e){if(e.includes(Ia))return Ia;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=Dj.exec(t))!==null&&r!==void 0?r:[],o=ur.parse(n??""),l=ur.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Ia;t=t.replace(Dj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=Mj.exec(t))!==null&&u!==void 0?u:[],h=ur.parse(d??""),p=ur.parse(m??""),y=f==="+"?h.add(p):h.subtract(p);if(y.isNaN())return Ia;t=t.replace(Mj,y.toString())}return t}var Ij=/\(([^()]*)\)/;function BU(e){for(var t=e,r;(r=Ij.exec(t))!=null;){var[,n]=r;t=t.replace(Ij,XE(n))}return t}function QU(e){var t=e.replace(/\s+/g,"");return t=BU(t),t=XE(t),t}function VU(e){try{return QU(e)}catch{return Ia}}function Sm(e){var t=VU(e.slice(5,-1));return t===Ia?"":t}var WU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],KU=["dx","dy","angle","className","breakAll"];function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(null,arguments)}function $j(e,t){if(e==null)return{};var r,n,s=HU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JE=/[ \f\n\r\t\v\u2028\u2029]+/,ZE=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Ie(t)||(r?s=t.toString().split(""):s=t.toString().split(JE));var i=s.map(l=>({word:l,width:Pl(l,n).width})),o=r?0:Pl("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},GU=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=ce(i),d=o,f=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce((P,z)=>{var{word:I,width:q}=z,Q=P[P.length-1];if(Q&&(n==null||s||Q.width+q+r<Number(n)))Q.words.push(I),Q.width+=q+r;else{var D={words:[I],width:q};P.push(D)}return P},[])},m=f(t),h=T=>T.reduce(($,P)=>$.width>P.width?$:P);if(!u||s)return m;var p=m.length>i||h(m).width>Number(n);if(!p)return m;for(var y="",g=T=>{var $=d.slice(0,T),P=ZE({breakAll:c,style:l,children:$+y}).wordsWithComputedWidth,z=f(P),I=z.length>i||h(z).width>Number(n);return[I,z]},v=0,x=d.length-1,w=0,_;v<=x&&w<=d.length-1;){var j=Math.floor((v+x)/2),N=j-1,[S,E]=g(N),[O]=g(j);if(!S&&!O&&(v=j+1),S&&O&&(x=j-1),!S&&O){_=E;break}w++}return _||m},zj=e=>{var t=Ie(e)?[]:e.toString().split(JE);return[{words:t}]},YU=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Po.isSsr){var l,c,u=ZE({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return zj(n);return GU({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return zj(n)},Lj="#808080",_y=b.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=Lj}=e,d=$j(e,WU),f=b.useMemo(()=>YU({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:m,dy:h,angle:p,className:y,breakAll:g}=d,v=$j(d,KU);if(!Fn(r)||!Fn(n))return null;var x=r+(ce(m)?m:0),w=n+(ce(h)?h:0),_;switch(c){case"start":_=Sm("calc(".concat(i,")"));break;case"middle":_=Sm("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:_=Sm("calc(".concat(f.length-1," * -").concat(s,")"));break}var j=[];if(o){var N=f[0].width,{width:S}=d;j.push("scale(".concat(ce(S)?S/N:1,")"))}return p&&j.push("rotate(".concat(p,", ").concat(x,", ").concat(w,")")),j.length&&(v.transform=j.join(" ")),b.createElement("text",Cg({},Pe(v,!0),{ref:t,x,y:w,className:je("recharts-text",y),textAnchor:l,fill:u.includes("url")?Lj:u}),f.map((E,O)=>{var T=E.words.join(g?"":" ");return b.createElement("tspan",{x,dy:O===0?_:s,key:"".concat(T,"-").concat(O)},T)}))});_y.displayName="Text";var XU=["offset"],JU=["labelRef"];function Rj(e,t){if(e==null)return{};var r,n,s=ZU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qj(Object(r),!0).forEach(function(n){eB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eB(e,t,r){return(t=tB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tB(e){var t=rB(e,"string");return typeof t=="symbol"?t:t+""}function rB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jn(){return Jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jn.apply(null,arguments)}var nB=e=>{var{value:t,formatter:r}=e,n=Ie(e.children)?t:e.children;return typeof r=="function"?r(n):n},Ny=e=>e!=null&&typeof e=="function",sB=(e,t)=>{var r=pr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},iB=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:h}=s,p=(u+d)/2,y=sB(f,m),g=y>=0?1:-1,v,x;n==="insideStart"?(v=f+g*i,x=h):n==="insideEnd"?(v=m-g*i,x=!h):n==="end"&&(v=m+g*i,x=h),x=y<=0?x:!x;var w=$t(l,c,p,v),_=$t(l,c,p,v+(x?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(x?0:1,`,
    `).concat(_.x,",").concat(_.y),N=Ie(e.id)?co("recharts-radial-line-"):e.id;return b.createElement("text",Jn({},r,{dominantBaseline:"central",className:je("recharts-radial-bar-label",o)}),b.createElement("defs",null,b.createElement("path",{id:N,d:j})),b.createElement("textPath",{xlinkHref:"#".concat(N)},t))},aB=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:m}=$t(s,i,l+r,d);return{x:f,y:m,textAnchor:f>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(o+l)/2,{x:p,y}=$t(s,i,h,d);return{x:p,y,textAnchor:"middle",verticalAnchor:"middle"}},oB=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",h=l>=0?1:-1,p=h*n,y=h>0?"end":"start",g=h>0?"start":"end";if(s==="top"){var v={x:i+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return lt(lt({},v),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var x={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:m};return lt(lt({},x),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return lt(lt({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var _={x:i+l+p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return lt(lt({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return s==="insideLeft"?lt({x:i+p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},j):s==="insideRight"?lt({x:i+l-p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},j):s==="insideTop"?lt({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:m},j):s==="insideBottom"?lt({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):s==="insideTopLeft"?lt({x:i+p,y:o+d,textAnchor:g,verticalAnchor:m},j):s==="insideTopRight"?lt({x:i+l-p,y:o+d,textAnchor:y,verticalAnchor:m},j):s==="insideBottomLeft"?lt({x:i+p,y:o+c-d,textAnchor:g,verticalAnchor:f},j):s==="insideBottomRight"?lt({x:i+l-p,y:o+c-d,textAnchor:y,verticalAnchor:f},j):s&&typeof s=="object"&&(ce(s.x)||Ci(s.x))&&(ce(s.y)||Ci(s.y))?lt({x:i+Sn(s.x,l),y:o+Sn(s.y,c),textAnchor:"end",verticalAnchor:"end"},j):lt({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},lB=e=>"cx"in e&&ce(e.cx);function Pr(e){var{offset:t=5}=e,r=Rj(e,XU),n=lt({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,m=kx(),h=s||m;if(!h||Ie(o)&&Ie(l)&&!b.isValidElement(c)&&typeof c!="function")return null;if(b.isValidElement(c)){var p=Rj(n,JU);return b.cloneElement(c,p)}var y;if(typeof c=="function"){if(y=b.createElement(c,n),b.isValidElement(y))return y}else y=nB(n);var g=lB(h),v=Pe(n,!0);if(g&&(i==="insideStart"||i==="insideEnd"||i==="end"))return iB(n,y,v);var x=g?aB(n):oB(n,h);return b.createElement(_y,Jn({ref:f,className:je("recharts-label",u)},v,x,{breakAll:d}),y)}Pr.displayName="Label";var eC=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:m,left:h,width:p,height:y,clockWise:g,labelViewBox:v}=e;if(v)return v;if(ce(p)&&ce(y)){if(ce(d)&&ce(f))return{x:d,y:f,width:p,height:y};if(ce(m)&&ce(h))return{x:m,y:h,width:p,height:y}}if(ce(d)&&ce(f))return{x:d,y:f,width:0,height:0};if(ce(t)&&ce(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:g};if(e.viewBox)return e.viewBox},cB=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?b.createElement(Pr,Jn({key:"label-implicit"},n)):Fn(e)?b.createElement(Pr,Jn({key:"label-implicit",value:e},n)):b.isValidElement(e)?e.type===Pr?b.cloneElement(e,lt({key:"label-implicit"},n)):b.createElement(Pr,Jn({key:"label-implicit",content:e},n)):Ny(e)?b.createElement(Pr,Jn({key:"label-implicit",content:e},n)):e&&typeof e=="object"?b.createElement(Pr,Jn({},e,{key:"label-implicit"},n)):null},uB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=eC(t),l=ix(s,Pr).map((u,d)=>b.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=cB(t.label,r||o,i);return[c,...l]};Pr.parseViewBox=eC;Pr.renderCallByParent=uB;var tC={},rC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(rC);var nC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(nC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rC,r=nC,n=Mf;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(tC);var dB=tC.last;const fB=Qn(dB);var hB=["valueAccessor"],mB=["data","dataKey","clockWise","id","textBreakAll"];function zd(){return zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zd.apply(null,arguments)}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(n){pB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pB(e,t,r){return(t=gB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gB(e){var t=xB(e,"string");return typeof t=="symbol"?t:t+""}function xB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bj(e,t){if(e==null)return{};var r,n,s=yB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vB=e=>Array.isArray(e.value)?fB(e.value):e.value;function ti(e){var{valueAccessor:t=vB}=e,r=Bj(e,hB),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=Bj(r,mB);return!n||!n.length?null:b.createElement(Mr,{className:"recharts-label-list"},n.map((u,d)=>{var f=Ie(s)?t(u,d):Ht(u&&u.payload,s),m=Ie(o)?{}:{id:"".concat(o,"-").concat(d)};return b.createElement(Pr,zd({},Pe(u,!0),c,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Pr.parseViewBox(Ie(i)?u:Uj(Uj({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}ti.displayName="LabelList";function bB(e,t){return e?e===!0?b.createElement(ti,{key:"labelList-implicit",data:t}):b.isValidElement(e)||Ny(e)?b.createElement(ti,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?b.createElement(ti,zd({data:t},e,{key:"labelList-implicit"})):null:null}function wB(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=ix(n,ti).map((o,l)=>b.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=bB(e.label,t);return[i,...s]}ti.renderCallByParent=wB;function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ag.apply(null,arguments)}var sC=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=je("recharts-dot",s);return t===+t&&r===+r&&n===+n?b.createElement("circle",Ag({},Pe(e,!1),nx(e),{className:i,cx:t,cy:r,r:n})):null},jB={radiusAxis:{},angleAxis:{}},_B=on({name:"polarAxis",initialState:jB,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),NB=_B.reducer,SB={countOfBars:0,cartesianItems:[],polarItems:[]},iC=on({name:"graphicalItems",initialState:SB,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=is(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=is(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=is(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:kB,removeBar:PB,addCartesianGraphicalItem:EB,replaceCartesianGraphicalItem:CB,removeCartesianGraphicalItem:AB,addPolarGraphicalItem:MK,removePolarGraphicalItem:IK}=iC.actions,TB=iC.reducer;function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qj(Object(r),!0).forEach(function(n){OB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OB(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IB(e){var t=yt(),r=b.useRef(null);return b.useEffect(()=>{var n=Vj(Vj({},e),{},{stackId:m2(e.stackId)});r.current===null?t(EB(n)):r.current!==n&&t(CB({prev:r.current,next:n})),r.current=n},[t,e]),b.useEffect(()=>()=>{r.current&&(t(AB(r.current)),r.current=null)},[t]),null}var aC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(aC);var $B=aC.isPlainObject;const zB=Qn($B);function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(null,arguments)}var Wj=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},LB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RB=e=>{var t=ws(e,LB),r=b.useRef(),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var g=r.current.getTotalLength();g&&s(g)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isUpdateAnimationActive:p}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var y=je("recharts-trapezoid",d);return p?b.createElement(Zi,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:i,y:o},duration:m,animationEasing:f,isActive:p},g=>{var{upperWidth:v,lowerWidth:x,height:w,x:_,y:j}=g;return b.createElement(Zi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,easing:f},b.createElement("path",Ld({},Pe(t,!0),{className:y,d:Wj(_,j,v,x,w),ref:r})))}):b.createElement("g",null,b.createElement("path",Ld({},Pe(t,!0),{className:y,d:Wj(i,o,l,c,u)})))},qB=["option","shapeType","propTransformer","activeClassName","isActive"];function FB(e,t){if(e==null)return{};var r,n,s=UB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kj(Object(r),!0).forEach(function(n){BB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BB(e,t,r){return(t=QB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QB(e){var t=VB(e,"string");return typeof t=="symbol"?t:t+""}function VB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WB(e,t){return Rd(Rd({},t),e)}function KB(e,t){return e==="symbols"}function Hj(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(A2,r);case"trapezoid":return b.createElement(RB,r);case"sector":return b.createElement(D2,r);case"symbols":if(KB(t))return b.createElement(pk,r);break;default:return null}}function HB(e){return b.isValidElement(e)?e.props:e}function GB(e){var{option:t,shapeType:r,propTransformer:n=WB,activeClassName:s="recharts-active-shape",isActive:i}=e,o=FB(e,qB),l;if(b.isValidElement(t))l=b.cloneElement(t,Rd(Rd({},o),HB(t)));else if(typeof t=="function")l=t(o);else if(zB(t)&&typeof t!="boolean"){var c=n(t,o);l=b.createElement(Hj,{shapeType:r,elementProps:c})}else{var u=o;l=b.createElement(Hj,{shapeType:r,elementProps:u})}return i?b.createElement(Mr,{className:s},l):l}var oC=(e,t)=>{var r=yt();return(n,s)=>i=>{e==null||e(n,s,i),r(wE({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},lC=e=>{var t=yt();return(r,n)=>s=>{e==null||e(r,n,s),t(i8())}},cC=(e,t)=>{var r=yt();return(n,s)=>i=>{e==null||e(n,s,i),r(a8({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function uC(e){var{fn:t,args:r}=e,n=yt(),s=or();return b.useEffect(()=>{if(!s){var i=t(r);return n(r8(i)),()=>{n(n8(i))}}},[t,r,n,s]),null}var YB=()=>{};function dC(e){var{legendPayload:t}=e,r=yt(),n=or();return b.useEffect(()=>n?YB:(r(J5(t)),()=>{r(Z5(t))}),[r,n,t]),null}function fC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(co(t)),n=b.useRef(e);return n.current!==e&&(r.current=co(t),n.current=e),r.current}var XB=K([kt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),JB=K([XB,vs,bs],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),ZB=e=>{var t=or();return fe(r=>Bn(r,"xAxis",e,t))},e9=e=>{var t=or();return fe(r=>Bn(r,"yAxis",e,t))},Sy=()=>fe(JB),t9=()=>fe(Q8);function Gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(r),!0).forEach(function(n){r9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r9(e,t,r){return(t=n9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n9(e){var t=s9(e,"string");return typeof t=="symbol"?t:t+""}function s9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i9=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=Yj(Yj({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Pe(s,!1)),nx(s)),l;return b.isValidElement(s)?l=b.cloneElement(s,o):typeof s=="function"?l=s(o):l=b.createElement(sC,o),b.createElement(Mr,{className:"recharts-active-dot"},l)};function a9(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=fe(ta),o=t9();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Ie(l)?null:i9({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var o9=()=>{var e=yt();return b.useEffect(()=>(e(kB()),()=>{e(PB())})),null},l9=["children"];function c9(e,t){if(e==null)return{};var r,n,s=u9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function u9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xj=()=>{},hC=b.createContext({addErrorBar:Xj,removeErrorBar:Xj}),d9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},mC=b.createContext(d9);function pC(e){var{children:t}=e,r=c9(e,l9);return b.createElement(mC.Provider,{value:r},t)}var f9=()=>b.useContext(mC),gC=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:u,barSize:d}=e,[f,m]=b.useState([]),h=b.useCallback(g=>{m(v=>[...v,g])},[m]),p=b.useCallback(g=>{m(v=>v.filter(x=>x!==g))},[m]),y=or();return b.createElement(hC.Provider,{value:{addErrorBar:h,removeErrorBar:p}},b.createElement(IB,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:f,stackId:l,hide:c,barSize:d,isPanorama:y}),t)};function h9(e){var{addErrorBar:t,removeErrorBar:r}=b.useContext(hC);return b.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var m9=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function xC(e,t,r){return(t=p9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p9(e){var t=g9(e,"string");return typeof t=="symbol"?t:t+""}function g9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}function x9(e,t){if(e==null)return{};var r,n,s=y9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function y9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function v9(e){var{direction:t,width:r,dataKey:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=x9(e,m9),u=Pe(c,!1),{data:d,dataPointFormatter:f,xAxisId:m,yAxisId:h,errorBarOffset:p}=f9(),y=ZB(m),g=e9(h);if((y==null?void 0:y.scale)==null||(g==null?void 0:g.scale)==null||d==null||t==="x"&&y.type!=="number")return null;var v=d.map(x=>{var{x:w,y:_,value:j,errorVal:N}=f(x,n,t);if(!N)return null;var S=[],E,O;if(Array.isArray(N)?[E,O]=N:E=O=N,t==="x"){var{scale:T}=y,$=_+p,P=$+r,z=$-r,I=T(j-E),q=T(j+O);S.push({x1:q,y1:P,x2:q,y2:z}),S.push({x1:I,y1:$,x2:q,y2:$}),S.push({x1:I,y1:P,x2:I,y2:z})}else if(t==="y"){var{scale:Q}=g,D=w+p,k=D-r,C=D+r,A=Q(j-E),R=Q(j+O);S.push({x1:k,y1:R,x2:C,y2:R}),S.push({x1:D,y1:A,x2:D,y2:R}),S.push({x1:k,y1:A,x2:C,y2:A})}var F="".concat(w+p,"px ").concat(_+p,"px");return b.createElement(Mr,oc({className:"recharts-errorBar",key:"bar-".concat(S.map(Z=>"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)))},u),S.map(Z=>{var re=s?{transformOrigin:"".concat(Z.x1-5,"px")}:void 0;return b.createElement(Zi,{from:{transform:"scaleY(0)",transformOrigin:F},to:{transform:"scaleY(1)",transformOrigin:F},begin:i,easing:l,isActive:s,duration:o,key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2),style:{transformOrigin:F}},b.createElement("line",oc({},Z,{style:re})))}))});return b.createElement(Mr,{className:"recharts-errorBars"},v)}var yC=b.createContext(void 0);function b9(e){var t=b.useContext(yC);return e??t??"x"}function vC(e){var{direction:t,children:r}=e;return b.createElement(yC.Provider,{value:t},r)}var bC={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function w9(e){var t=b9(e.direction),{width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o}=ws(e,bC);return b.createElement(b.Fragment,null,b.createElement(h9,{dataKey:e.dataKey,direction:t}),b.createElement(v9,oc({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o})))}class wC extends b.Component{render(){return b.createElement(w9,this.props)}}xC(wC,"defaultProps",bC);xC(wC,"displayName","ErrorBar");var j9="Invariant failed";function _9(e,t){throw new Error(j9)}var N9=["x","y"];function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(null,arguments)}function Jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(r),!0).forEach(function(n){S9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S9(e,t,r){return(t=k9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k9(e){var t=P9(e,"string");return typeof t=="symbol"?t:t+""}function P9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E9(e,t){if(e==null)return{};var r,n,s=C9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function C9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function A9(e,t){var{x:r,y:n}=e,s=E9(e,N9),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),m=parseInt(f,10);return nl(nl(nl(nl(nl({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function jC(e){return b.createElement(GB,Tg({shapeType:"rectangle",propTransformer:A9,activeClassName:"recharts-active-bar"},e))}var T9=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(ce(t))return t;var i=ce(n)||Ie(n);return i?t(n,s):(i||_9(),r)}};function ky(e,t){var r,n,s=fe(u=>_s(u,e)),i=fe(u=>mi(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:_r.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Nr.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function _C(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=Sy(),{needClipX:i,needClipY:o,needClip:l}=ky(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=s;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var O9=["onMouseEnter","onMouseLeave","onClick"],D9=["value","background","tooltipPosition"],M9=["onMouseEnter","onClick","onMouseLeave"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(null,arguments)}function Zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zj(Object(r),!0).forEach(function(n){ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ph(e,t,r){return(t=I9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I9(e){var t=$9(e,"string");return typeof t=="symbol"?t:t+""}function $9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Og(e,t){if(e==null)return{};var r,n,s=z9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function z9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var L9=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function R9(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:Wf(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function q9(e){var t=fe(ta),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=Og(i,O9),d=oC(o,n),f=lC(l),m=cC(c,n);if(!s||r==null)return null;var h=Pe(s,!1);return b.createElement(b.Fragment,null,r.map((p,y)=>{var{value:g,background:v,tooltipPosition:x}=p,w=Og(p,D9);if(!v)return null;var _=d(p,y),j=f(p,y),N=m(p,y),S=Wt(Wt(Wt(Wt(Wt({option:s,isActive:String(y)===t},w),{},{fill:"#eee"},v),h),sx(u,p,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return b.createElement(jC,lc({key:"background-bar-".concat(y)},S))}))}function NC(e){var{data:t,props:r,showLabels:n}=e,s=Pe(r,!1),{shape:i,dataKey:o,activeBar:l}=r,c=fe(ta),u=fe(ME),{onMouseEnter:d,onClick:f,onMouseLeave:m}=r,h=Og(r,M9),p=oC(d,o),y=lC(m),g=cC(f,o);return t?b.createElement(b.Fragment,null,t.map((v,x)=>{var w=l&&String(x)===c&&(u==null||o===u),_=w?l:i,j=Wt(Wt(Wt({},s),v),{},{isActive:w,option:_,index:x,dataKey:o});return b.createElement(Mr,lc({className:"recharts-bar-rectangle"},sx(h,v,x),{onMouseEnter:p(v,x),onMouseLeave:y(v,x),onClick:g(v,x),key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(x)}),b.createElement(jC,j))}),n&&ti.renderCallByParent(r,t)):null}function F9(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,m=fC(t,"recharts-bar-"),[h,p]=b.useState(!1),y=b.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),g=b.useCallback(()=>{typeof d=="function"&&d(),p(!0)},[d]);return b.createElement(Zi,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:g,key:m},v=>{var{t:x}=v,w=x===1?n:n.map((_,j)=>{var N=f&&f[j];if(N){var S=pn(N.x,_.x),E=pn(N.y,_.y),O=pn(N.width,_.width),T=pn(N.height,_.height);return Wt(Wt({},_),{},{x:S(x),y:E(x),width:O(x),height:T(x)})}if(s==="horizontal"){var $=pn(0,_.height),P=$(x);return Wt(Wt({},_),{},{y:_.y+_.height-P,height:P})}var z=pn(0,_.width),I=z(x);return Wt(Wt({},_),{},{width:I})});return x>0&&(r.current=w),b.createElement(Mr,null,b.createElement(NC,{props:t,data:w,showLabels:!h}))})}function U9(e){var{data:t,isAnimationActive:r}=e,n=b.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?b.createElement(F9,{previousRectanglesRef:n,props:e}):b.createElement(NC,{props:e,data:t,showLabels:!0})}var SC=0,B9=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ht(e,t)}};class Q9 extends b.PureComponent{constructor(){super(...arguments),ph(this,"id",co("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u,layout:d}=this.props;if(t)return null;var f=je("recharts-bar",s),m=Ie(u)?this.id:u;return b.createElement(Mr,{className:f},l&&b.createElement("defs",null,b.createElement(_C,{clipPathId:m,xAxisId:i,yAxisId:o})),b.createElement(Mr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(m,")"):null},b.createElement(q9,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),b.createElement(U9,this.props)),b.createElement(vC,{direction:d==="horizontal"?"y":"x"},this.props.children))}}var kC={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Po.isSsr,legendType:"rect",minPointSize:SC,xAxisId:0,yAxisId:0};function V9(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=ws(e,kC),{needClip:f}=ky(t,r),m=Yf(),h=or(),p=b.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:m2(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),y=ix(e.children,GE),g=fe(w=>v7(w,t,r,h,p,y));if(m!=="vertical"&&m!=="horizontal")return null;var v,x=g==null?void 0:g[0];return x==null||x.height==null||x.width==null?v=0:v=m==="vertical"?x.height/2:x.width/2,b.createElement(pC,{xAxisId:t,yAxisId:r,data:g,dataPointFormatter:B9,errorBarOffset:v},b.createElement(Q9,lc({},e,{layout:m,needClip:f,data:g,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function W9(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:m,cells:h}=e,p=t==="horizontal"?l:o,y=d?p.scale.domain():null,g=M5({numericAxis:p});return f.map((v,x)=>{var w,_,j,N,S,E;d?w=C5(d[x],y):(w=Ht(v,r),Array.isArray(w)||(w=[g,w]));var O=T9(n,SC)(w[1],x);if(t==="horizontal"){var T,[$,P]=[l.scale(w[0]),l.scale(w[1])];_=cw({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:v,index:x}),j=(T=P??$)!==null&&T!==void 0?T:void 0,N=s.size;var z=$-P;if(S=Dr(z)?0:z,E={x:_,y:m.top,width:N,height:m.height},Math.abs(O)>0&&Math.abs(S)<Math.abs(O)){var I=pr(S||O)*(Math.abs(O)-Math.abs(S));j-=I,S+=I}}else{var[q,Q]=[o.scale(w[0]),o.scale(w[1])];if(_=q,j=cw({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:v,index:x}),N=Q-q,S=s.size,E={x:m.left,y:j,width:m.width,height:S},Math.abs(O)>0&&Math.abs(N)<Math.abs(O)){var D=pr(N||O)*(Math.abs(O)-Math.abs(N));N+=D}}var k=Wt(Wt({},v),{},{x:_,y:j,width:N,height:S,value:d?w:w[1],payload:v,background:E,tooltipPosition:{x:_+N/2,y:j+S/2}},h&&h[x]&&h[x].props);return k})}class qd extends b.PureComponent{render(){return b.createElement(gC,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},b.createElement(o9,null),b.createElement(dC,{legendPayload:L9(this.props)}),b.createElement(uC,{fn:R9,args:this.props}),b.createElement(V9,this.props))}}ph(qd,"displayName","Bar");ph(qd,"defaultProps",kC);function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(n){K9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K9(e,t,r){return(t=H9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H9(e){var t=G9(e,"string");return typeof t=="symbol"?t:t+""}function G9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y9=(e,t)=>t,X9=(e,t,r)=>r,J9=(e,t,r,n)=>n,Py=(e,t,r,n,s)=>s,Z9=(e,t,r,n,s)=>s.maxBarSize,e7=(e,t,r,n,s,i)=>i,t1=(e,t,r)=>{var n=r??e;if(!Ie(n))return Sn(n,t,0)},t7=K([Te,lh,Y9,X9,J9],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),r7=(e,t,r,n)=>{var s=Te(e);return s==="horizontal"?wg(e,"yAxis",r,n):wg(e,"xAxis",t,n)},n7=(e,t,r)=>{var n=Te(e);return n==="horizontal"?xj(e,"xAxis",t):xj(e,"yAxis",r)};function s7(e){return e.stackId!=null&&e.dataKey!=null}var i7=(e,t,r)=>{var n={},s=e.filter(s7),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,m=f.map(p=>p.dataKey),h=t1(t,r,f[0].barSize);return{stackId:d,dataKeys:m,barSize:h}}),c=i.map(u=>{var d=[u.dataKey].filter(m=>m!=null),f=t1(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},a7=K([t7,eF,n7],i7),o7=(e,t,r,n,s)=>{var i,o,l=Te(e),c=OP(e),{maxBarSize:u}=s,d=Ie(u)?c:u,f,m;return l==="horizontal"?(f=Bn(e,"xAxis",t,n),m=si(e,"xAxis",t,n)):(f=Bn(e,"yAxis",r,n),m=si(e,"yAxis",r,n)),(i=(o=Zl(f,m,!0))!==null&&o!==void 0?o:d)!==null&&i!==void 0?i:0},PC=(e,t,r,n)=>{var s=Te(e),i,o;return s==="horizontal"?(i=Bn(e,"xAxis",t,n),o=si(e,"xAxis",t,n)):(i=Bn(e,"yAxis",r,n),o=si(e,"yAxis",r,n)),Zl(i,o)};function l7(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=Sn(e,r,0,!0),l,c=[];if(zr(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((v,x)=>v+(x.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var m=(r-f)/2>>0,h={offset:m-o,size:0};l=n.reduce((v,x)=>{var w,_={stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(w=x.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return h=j[j.length-1].position,j},c)}else{var p=Sn(t,r,0,!0);r-2*p-(i-1)*o<=0&&(o=0);var y=(r-2*p-(i-1)*o)/i;y>1&&(y>>=0);var g=zr(s)?Math.min(y,s):y;l=n.reduce((v,x,w)=>[...v,{stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:p+(y+o)*w+(y-g)/2,size:g}}],c)}return l}}var c7=(e,t,r,n,s,i,o)=>{var l=Ie(o)?t:o,c=l7(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>mu(mu({},u),{},{position:mu(mu({},u.position),{},{offset:u.position.offset-s/2})}))),c},u7=K([a7,OP,Zq,DP,o7,PC,Z9],c7),d7=(e,t,r,n)=>Bn(e,"xAxis",t,n),f7=(e,t,r,n)=>Bn(e,"yAxis",r,n),h7=(e,t,r,n)=>si(e,"xAxis",t,n),m7=(e,t,r,n)=>si(e,"yAxis",r,n),p7=K([u7,Py],(e,t)=>{if(e!=null){var r=e.find(n=>n.stackId===t.stackId&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),g7=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:s}=n;if(s){var i=s.find(o=>o.key===t.dataKey);return i}}}}},x7=K([lh,Py],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),y7=K([r7,Py],g7),v7=K([kt,d7,f7,h7,m7,p7,Te,Xx,PC,y7,x7,e7],(e,t,r,n,s,i,o,l,c,u,d,f)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=l;if(!(d==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||s==null||c==null)){var{data:y}=d,g;if(y!=null&&y.length>0?g=y:g=m==null?void 0:m.slice(h,p+1),g!=null)return W9({layout:o,barSettings:d,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:u,displayedData:g,offset:e,cells:f})}}),b7=e=>{var{chartData:t}=e,r=yt(),n=or();return b.useEffect(()=>n?()=>{}:(r(kj(t)),()=>{r(kj(void 0))}),[t,r,n]),null},r1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},w7=on({name:"brush",initialState:r1,reducers:{setBrushSettings(e,t){return t.payload==null?r1:t.payload}}}),j7=w7.reducer;function _7(e,t,r){return(t=N7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N7(e){var t=S7(e,"string");return typeof t=="symbol"?t:t+""}function S7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ey{static create(t){return new Ey(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}_7(Ey,"EPS",1e-4);function k7(e){return(e%180+180)%180}var P7=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=k7(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},E7={dots:[],areas:[],lines:[]},C7=on({name:"referenceElements",initialState:E7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=is(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=is(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=is(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),A7=C7.reducer,T7=b.createContext(void 0),O7=e=>{var{children:t}=e,[r]=b.useState("".concat(co("recharts"),"-clip")),n=Sy();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return b.createElement(T7.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function km(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function EC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function D7(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return P7(n,r)}function M7(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Fd(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function I7(e,t){return EC(e,t+1)}function $7(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:EC(n,u)};var y=c,g,v=()=>(g===void 0&&(g=r(p,y)),g),x=p.coordinate,w=c===0||Fd(e,x,v,d,l);w||(c=0,d=o,u+=1),w&&(d=x+e*(v()/2+s),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function n1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n1(Object(r),!0).forEach(function(n){z7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z7(e,t,r){return(t=L7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q7(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(m){var h=i[m],p,y=()=>(p===void 0&&(p=r(h,m)),p);if(m===o-1){var g=e*(h.coordinate+e*y()/2-c);i[m]=h=Qt(Qt({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else i[m]=h=Qt(Qt({},h),{},{tickCoord:h.coordinate});var v=Fd(e,h.tickCoord,y,l,c);v&&(c=h.tickCoord-e*(y()/2+s),i[m]=Qt(Qt({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function F7(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=Qt(Qt({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=Fd(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+s),o[l-1]=Qt(Qt({},d),{},{isShow:!0}))}for(var p=i?l-1:l,y=function(x){var w=o[x],_,j=()=>(_===void 0&&(_=r(w,x)),_);if(x===0){var N=e*(w.coordinate-e*j()/2-c);o[x]=w=Qt(Qt({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[x]=w=Qt(Qt({},w),{},{tickCoord:w.coordinate});var S=Fd(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+s),o[x]=Qt(Qt({},w),{},{isShow:!0}))},g=0;g<p;g++)y(g);return o}function Cy(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(ce(c)||Po.isSsr){var m;return(m=I7(s,ce(c)?c:0))!==null&&m!==void 0?m:[]}var h=[],p=l==="top"||l==="bottom"?"width":"height",y=d&&p==="width"?Pl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return p==="width"?D7(Pl(j,{fontSize:t,letterSpacing:r}),y,f):Pl(j,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?pr(s[1].coordinate-s[0].coordinate):1,x=M7(i,v,p);return c==="equidistantPreserveStart"?$7(v,x,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?h=F7(v,x,g,s,o,c==="preserveStartEnd"):h=q7(v,x,g,s,o),h.filter(w=>w.isShow))}var U7=["viewBox"],B7=["viewBox"];function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$a.apply(null,arguments)}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){Ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i1(e,t){if(e==null)return{};var r,n,s=Q7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Q7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ay(e,t,r){return(t=V7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V7(e){var t=W7(e,"string");return typeof t=="symbol"?t:t+""}function W7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pi extends b.Component{constructor(t){super(t),this.tickRefs=b.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=i1(t,U7),i=this.props,{viewBox:o}=i,l=i1(i,B7);return!km(n,o)||!km(s,l)||!km(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,m,h,p,y,g=c?-1:1,v=t.tickSize||l,x=ce(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,h=n+ +!c*i,m=h-g*v,y=m-g*u,p=x;break;case"left":m=h=t.coordinate,f=r+ +!c*s,d=f-g*v,p=d-g*u,y=x;break;case"right":m=h=t.coordinate,f=r+ +c*s,d=f+g*v,p=d+g*u,y=x;break;default:d=f=t.coordinate,h=n+ +c*i,m=h+g*v,y=m+g*u,p=x;break}return{line:{x1:d,y1:m,x2:f,y2:h},tick:{x:p,y}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=mt(mt(mt({},Pe(this.props,!1)),Pe(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=mt(mt({},c),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=mt(mt({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+s})}return b.createElement("line",$a({},c,{className:je("recharts-cartesian-axis-line",Yi(l,"className"))}))}static renderTickItem(t,r,n){var s,i=je(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))s=b.cloneElement(t,mt(mt({},r),{},{className:i}));else if(typeof t=="function")s=t(mt(mt({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=je(o,t.className)),s=b.createElement(_y,$a({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,u=Cy(mt(mt({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=Pe(this.props,!1),h=Pe(o,!1),p=mt(mt({},m),{},{fill:"none"},Pe(s,!1)),y=u.map((g,v)=>{var{line:x,tick:w}=this.getTickLineCoord(g),_=mt(mt(mt(mt({textAnchor:d,verticalAnchor:f},m),{},{stroke:"none",fill:i},h),w),{},{index:v,payload:g,visibleTicksCount:u.length,tickFormatter:l});return b.createElement(Mr,$a({className:"recharts-cartesian-axis-tick",key:"tick-".concat(g.value,"-").concat(g.coordinate,"-").concat(g.tickCoord)},sx(this.props,g,v)),s&&b.createElement("line",$a({},p,x,{className:je("recharts-cartesian-axis-tick-line",Yi(s,"className"))})),o&&pi.renderTickItem(o,_,"".concat(typeof l=="function"?l(g.value,v):g.value).concat(c||"")))});return y.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},y):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:b.createElement(Mr,{className:je("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Pr.renderCallByParent(this.props))}}Ay(pi,"displayName","CartesianAxis");Ay(pi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var K7=["x1","y1","x2","y2","key"],H7=["offset"],G7=["xAxisId","yAxisId"],Y7=["xAxisId","yAxisId"];function a1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(r),!0).forEach(function(n){X7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X7(e,t,r){return(t=J7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J7(e){var t=Z7(e,"string");return typeof t=="symbol"?t:t+""}function Z7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(null,arguments)}function Ud(e,t){if(e==null)return{};var r,n,s=eQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return b.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function CC(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=Ud(t,K7),u=Pe(c,!1),d=Ud(u,H7);r=b.createElement("line",Di({},d,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function rQ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Ud(e,G7),o=s.map((l,c)=>{var u=Kt(Kt({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return CC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function nQ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Ud(e,Y7),o=s.map((l,c)=>{var u=Kt(Kt({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return CC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function sQ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?s+o-f:u[m+1]-f;if(p<=0)return null;var y=m%t.length;return b.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:p,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function iQ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?s+o-f:u[m+1]-f;if(p<=0)return null;var y=m%r.length;return b.createElement("rect",{key:"react-".concat(m),x:f,y:i,width:p,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var aQ=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return f2(Cy(Kt(Kt(Kt({},pi.defaultProps),r),{},{ticks:h2(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},oQ=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return f2(Cy(Kt(Kt(Kt({},pi.defaultProps),r),{},{ticks:h2(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},lQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Bd(e){var t=y2(),r=v2(),n=x2(),s=Kt(Kt({},ws(e,lQ)),{},{x:ce(e.x)?e.x:n.left,y:ce(e.y)?e.y:n.top,width:ce(e.width)?e.width:n.width,height:ce(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:h}=s,p=or(),y=fe(O=>yj(O,"xAxis",i,p)),g=fe(O=>yj(O,"yAxis",o,p));if(!ce(u)||u<=0||!ce(d)||d<=0||!ce(l)||l!==+l||!ce(c)||c!==+c)return null;var v=s.verticalCoordinatesGenerator||aQ,x=s.horizontalCoordinatesGenerator||oQ,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof x=="function"){var j=m&&m.length,N=x({yAxis:g?Kt(Kt({},g),{},{ticks:j?m:g.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);kl(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var S=h&&h.length,E=v({xAxis:y?Kt(Kt({},y),{},{ticks:S?h:y.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);kl(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(_=E)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(tQ,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),b.createElement(sQ,Di({},s,{horizontalPoints:w})),b.createElement(iQ,Di({},s,{verticalPoints:_})),b.createElement(rQ,Di({},s,{offset:n,horizontalPoints:w,xAxis:y,yAxis:g})),b.createElement(nQ,Di({},s,{offset:n,verticalPoints:_,xAxis:y,yAxis:g})))}Bd.displayName="CartesianGrid";var AC=(e,t,r,n)=>Bn(e,"xAxis",t,n),TC=(e,t,r,n)=>si(e,"xAxis",t,n),OC=(e,t,r,n)=>Bn(e,"yAxis",r,n),DC=(e,t,r,n)=>si(e,"yAxis",r,n),cQ=K([Te,AC,OC,TC,DC],(e,t,r,n,s)=>di(e,"xAxis")?Zl(t,n,!1):Zl(r,s,!1)),uQ=(e,t,r,n,s)=>s,dQ=K([lh,uQ],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),fQ=K([Te,AC,OC,TC,DC,dQ,cQ,Xx],(e,t,r,n,s,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:f,data:m}=i,h;if(m!=null&&m.length>0?h=m:h=c==null?void 0:c.slice(u,d+1),h!=null)return TQ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:o,displayedData:h})}}),hQ=["type","layout","connectNulls","needClip"],mQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function MC(e,t){if(e==null)return{};var r,n,s=pQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function o1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(r),!0).forEach(function(n){gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gh(e,t,r){return(t=gQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQ(e){var t=xQ(e,"string");return typeof t=="symbol"?t:t+""}function xQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}var yQ=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function vQ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Wf(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var IC=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function bQ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var wQ=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return IC(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...bQ(r,s),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function jQ(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=je("recharts-line-dot",typeof e!="boolean"?e.className:"");r=b.createElement(sC,yo({},t,{className:n}))}return r}function _Q(e,t){return e==null?!1:t?!0:e.length===1}function NQ(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!_Q(r,s))return null;var l=YS(s),c=Pe(n,!1),u=Pe(s,!0),d=r.map((m,h)=>{var p=gn(gn(gn({key:"dot-".concat(h),r:3},c),u),{},{index:h,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return jQ(s,p)}),f={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return b.createElement(Mr,yo({className:"recharts-line-dots",key:"dots"},f),d)}function Dg(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=i,f=MC(i,hQ),m=gn(gn({},Pe(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:l,layout:c,connectNulls:u,strokeDasharray:s??i.strokeDasharray});return b.createElement(b.Fragment,null,(n==null?void 0:n.length)>1&&b.createElement(j2,yo({},m,{pathRef:r})),b.createElement(NQ,{points:n,clipPathId:t,props:i}),o&&ti.renderCallByParent(i,n))}function SQ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function kQ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:h,height:p,onAnimationEnd:y,onAnimationStart:g}=r,v=s.current,x=fC(r,"recharts-line-"),[w,_]=b.useState(!1),j=b.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),N=b.useCallback(()=>{typeof g=="function"&&g(),_(!0)},[g]),S=SQ(n.current),E=i.current;return b.createElement(Zi,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:j,onAnimationStart:N,key:x},O=>{var{t:T}=O,$=pn(E,S+E),P=Math.min($(T),S),z;if(l){var I="".concat(l).split(/[,\s]+/gim).map(D=>parseFloat(D));z=wQ(P,S,I)}else z=IC(S,P);if(v){var q=v.length/o.length,Q=T===1?o:o.map((D,k)=>{var C=Math.floor(k*q);if(v[C]){var A=v[C],R=pn(A.x,D.x),F=pn(A.y,D.y);return gn(gn({},D),{},{x:R(T),y:F(T)})}if(m){var Z=pn(h*2,D.x),re=pn(p/2,D.y);return gn(gn({},D),{},{x:Z(T),y:re(T)})}return gn(gn({},D),{},{x:D.x,y:D.y})});return s.current=Q,b.createElement(Dg,{props:r,points:Q,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})}return T>0&&S>0&&(s.current=o,i.current=P),b.createElement(Dg,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})})}function PQ(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=b.useRef(null),o=b.useRef(0),l=b.useRef(null),c=i.current;return s&&n&&n.length&&c!==n?b.createElement(kQ,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):b.createElement(Dg,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var EQ=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ht(e.payload,t)});class CQ extends b.Component{constructor(){super(...arguments),gh(this,"id",co("recharts-line-"))}render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:f,id:m,needClip:h,layout:p}=this.props;if(r)return null;var y=je("recharts-line",i),g=Ie(m)?this.id:m,{r:v=3,strokeWidth:x=2}=(t=Pe(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=YS(n),_=v*2+x;return b.createElement(b.Fragment,null,b.createElement(Mr,{className:y},h&&b.createElement("defs",null,b.createElement(_C,{clipPathId:g,xAxisId:o,yAxisId:l}),!w&&b.createElement("clipPath",{id:"clipPath-dots-".concat(g)},b.createElement("rect",{x:u-_/2,y:c-_/2,width:d+_,height:f+_}))),b.createElement(PQ,{props:this.props,clipPathId:g}),b.createElement(vC,{direction:p==="horizontal"?"y":"x"},b.createElement(pC,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:EQ,errorBarOffset:0},this.props.children))),b.createElement(a9,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var $C={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Po.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function AQ(e){var t=ws(e,$C),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:h,yAxisId:p}=t,y=MC(t,mQ),{needClip:g}=ky(h,p),{height:v,width:x,x:w,y:_}=Sy(),j=Yf(),N=or(),S=b.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),E=fe(O=>fQ(O,h,p,N,S));return j!=="horizontal"&&j!=="vertical"?null:b.createElement(CQ,yo({},y,{connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:h,yAxisId:p,points:E,layout:j,height:v,width:x,left:w,top:_,needClip:g}))}function TQ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=Ht(u,o);return t==="horizontal"?{x:lw({axis:r,ticks:s,bandSize:l,entry:u,index:d}),y:Ie(f)?null:n.scale(f),value:f,payload:u}:{x:Ie(f)?null:r.scale(f),y:lw({axis:n,ticks:i,bandSize:l,entry:u,index:d}),value:f,payload:u}})}class xh extends b.PureComponent{render(){return b.createElement(gC,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},b.createElement(dC,{legendPayload:yQ(this.props)}),b.createElement(uC,{fn:vQ,args:this.props}),b.createElement(AQ,this.props))}}gh(xh,"displayName","Line");gh(xh,"defaultProps",$C);function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){OQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OQ(e,t,r){return(t=DQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DQ(e){var t=MQ(e,"string");return typeof t=="symbol"?t:t+""}function MQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IQ={xAxis:{},yAxis:{},zAxis:{}},zC=on({name:"cartesianAxis",initialState:IQ,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=c1(c1({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:$Q,removeXAxis:zQ,addYAxis:LQ,removeYAxis:RQ,addZAxis:$K,removeZAxis:zK,updateYAxisWidth:qQ}=zC.actions,FQ=zC.reducer,UQ=["children"],BQ=["dangerouslySetInnerHTML","ticks"];function LC(e,t,r){return(t=QQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QQ(e){var t=VQ(e,"string");return typeof t=="symbol"?t:t+""}function VQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mg.apply(null,arguments)}function RC(e,t){if(e==null)return{};var r,n,s=WQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KQ(e){var t=yt(),r=b.useMemo(()=>{var i=RC(e,UQ);return i},[e]),n=fe(i=>_s(i,r.id)),s=r===n;return b.useEffect(()=>(t($Q(r)),()=>{t(zQ(r))}),[r,t]),s?e.children:null}var HQ=e=>{var{xAxisId:t,className:r}=e,n=fe(g2),s=or(),i="xAxis",o=fe(f=>Oo(f,i,t,s)),l=fe(f=>pE(f,i,t,s)),c=fe(f=>dE(f,t)),u=fe(f=>KF(f,t));if(c==null||u==null)return null;var d=RC(e,BQ);return b.createElement(pi,Mg({},d,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:je("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},GQ=e=>{var t,r,n,s,i;return b.createElement(KQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},b.createElement(HQ,e))};class cc extends b.Component{render(){return b.createElement(GQ,this.props)}}LC(cc,"displayName","XAxis");LC(cc,"defaultProps",{allowDataOverflow:_r.allowDataOverflow,allowDecimals:_r.allowDecimals,allowDuplicatedCategory:_r.allowDuplicatedCategory,height:_r.height,hide:!1,mirror:_r.mirror,orientation:_r.orientation,padding:_r.padding,reversed:_r.reversed,scale:_r.scale,tickCount:_r.tickCount,type:_r.type,xAxisId:0});var YQ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},XQ=["dangerouslySetInnerHTML","ticks"];function qC(e,t,r){return(t=JQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JQ(e){var t=ZQ(e,"string");return typeof t=="symbol"?t:t+""}function ZQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ig.apply(null,arguments)}function eV(e,t){if(e==null)return{};var r,n,s=tV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rV(e){var t=yt();return b.useEffect(()=>(t(LQ(e)),()=>{t(RQ(e))}),[e,t]),null}var nV=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=b.useRef(null),l=b.useRef(null),c=fe(g2),u=or(),d=yt(),f="yAxis",m=fe(v=>Oo(v,f,r,u)),h=fe(v=>fE(v,r)),p=fe(v=>HF(v,r)),y=fe(v=>pE(v,f,r,u));if(b.useLayoutEffect(()=>{var v;if(!(s!=="auto"||!h||Ny(i)||b.isValidElement(i))){var x=o.current,w=x==null||(v=x.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:_,tickMargin:j}=x.props,N=YQ({ticks:w,label:l.current,labelGapWithTick:5,tickSize:_,tickMargin:j});Math.round(h.width)!==Math.round(N)&&d(qQ({id:r,width:N}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h==null?void 0:h.width,h,d,i,r,s]),h==null||p==null)return null;var g=eV(e,XQ);return b.createElement(pi,Ig({},g,{ref:o,labelRef:l,scale:m,x:p.x,y:p.y,width:h.width,height:h.height,className:je("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:y}))},sV=e=>{var t,r,n,s,i;return b.createElement(b.Fragment,null,b.createElement(rV,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),b.createElement(nV,e))},iV={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,hide:!1,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tickCount:Nr.tickCount,type:Nr.type,width:Nr.width,yAxisId:0};class uc extends b.Component{render(){return b.createElement(sV,this.props)}}qC(uc,"displayName","YAxis");qC(uc,"defaultProps",iV);var aV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=b;function oV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lV=typeof Object.is=="function"?Object.is:oV,cV=Tc.useSyncExternalStore,uV=Tc.useRef,dV=Tc.useEffect,fV=Tc.useMemo,hV=Tc.useDebugValue;aV.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=uV(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=fV(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return f=p}return f=h}if(p=f,lV(d,h))return p;var y=n(h);return s!==void 0&&s(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=cV(e,i[0],i[1]);return dV(function(){o.hasValue=!0,o.value=l},[l]),hV(l),l};function mV(e){e()}function pV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){mV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var u1={notify(){},get:()=>[]};function gV(e,t){let r,n=u1,s=0,i=!1;function o(y){d();const g=n.subscribe(y);let v=!1;return()=>{v||(v=!0,g(),f())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=pV())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=u1)}function m(){i||(i=!0,d())}function h(){i&&(i=!1,f())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:h,getListeners:()=>n};return p}var xV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yV=xV(),vV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bV=vV(),wV=()=>yV||bV?b.useLayoutEffect:b.useEffect,jV=wV(),Pm=Symbol.for("react-redux-context"),Em=typeof globalThis<"u"?globalThis:{};function _V(){if(!b.createContext)return{};const e=Em[Pm]??(Em[Pm]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var NV=_V();function SV(e){const{children:t,context:r,serverState:n,store:s}=e,i=b.useMemo(()=>{const c=gV(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=b.useMemo(()=>s.getState(),[s]);jV(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||NV;return b.createElement(l.Provider,{value:i},t)}var kV=SV,PV=(e,t)=>t,Ty=K([PV,Te,aF,Ct,AE,Ns,X8,kt],rU),Oy=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},FC=rn("mouseClick"),UC=wc();UC.startListening({actionCreator:FC,effect:(e,t)=>{var r=e.payload,n=Ty(t.getState(),Oy(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(o8({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var $g=rn("mouseMove"),BC=wc();BC.startListening({actionCreator:$g,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=my(n,n.tooltip.settings.shared),i=Ty(n,Oy(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(_E({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(jE()))}});function EV(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var d1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},QC=on({name:"rootProps",initialState:d1,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:d1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),CV=QC.reducer,{updateOptions:AV}=QC.actions,TV=on({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),OV=TV.reducer,VC=rn("keyDown"),WC=rn("focus"),Dy=wc();Dy.startListening({actionCreator:VC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(py(s,da(r))),l=Ns(r);if(i==="Enter"){var c=$d(r,"axis","hover",String(s.index));t.dispatch(_g({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=JF(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=o+f*d;if(!(l==null||m>=l.length||m<0)){var h=$d(r,"axis","hover",String(m));t.dispatch(_g({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});Dy.startListening({actionCreator:WC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=$d(r,"axis","hover",String(i));t.dispatch(_g({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ur=rn("externalEvent"),KC=wc();KC.startListening({actionCreator:Ur,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:F8(r),activeDataKey:ME(r),activeIndex:ta(r),activeLabel:DE(r),activeTooltipIndex:ta(r),isTooltipActive:U8(r)};e.payload.handler(n,e.payload.reactEvent)}}});var DV=K([Do],e=>e.tooltipItemPayloads),MV=K([DV,Ac,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),HC=rn("touchMove"),GC=wc();GC.startListening({actionCreator:HC,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=my(n,n.tooltip.settings.shared);if(s==="axis"){var i=Ty(n,Oy({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(_E({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(U5),d=(o=c.getAttribute(B5))!==null&&o!==void 0?o:void 0,f=MV(t.getState(),u,d);t.dispatch(wE({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var IV=Bk({brush:j7,cartesianAxis:FQ,chartData:xU,graphicalItems:TB,layout:f5,legend:ez,options:fU,polarAxis:NB,polarOptions:OV,referenceElements:A7,rootProps:CV,tooltip:l8}),$V=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return z3({reducer:IV,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([UC.middleware,BC.middleware,Dy.middleware,KC.middleware,GC.middleware]),devTools:{serialize:{replacer:EV},name:"recharts-".concat(r)}})};function zV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=or(),i=b.useRef(null);if(s)return r;i.current==null&&(i.current=$V(t,n));var o=gx;return b.createElement(kV,{context:o,store:i.current},r)}function LV(e){var{layout:t,width:r,height:n,margin:s}=e,i=yt(),o=or();return b.useEffect(()=>{o||(i(c5(t)),i(u5({width:r,height:n})),i(l5(s)))},[i,o,t,r,n,s]),null}function RV(e){var t=yt();return b.useEffect(()=>{t(AV(e))},[t,e]),null}var qV=["children"];function FV(e,t){if(e==null)return{};var r,n,s=UV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qd(){return Qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qd.apply(null,arguments)}var BV={width:"100%",height:"100%"},QV=b.forwardRef((e,t)=>{var r=y2(),n=v2(),s=w2();if(!wd(r)||!wd(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0,b.createElement(XS,Qd({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:BV,ref:t}),i)}),VV=e=>{var{children:t}=e,r=fe(Gf);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return b.createElement(XS,{width:n,height:s,x:o,y:i},t)},f1=b.forwardRef((e,t)=>{var{children:r}=e,n=FV(e,qV),s=or();return s?b.createElement(VV,null,r):b.createElement(QV,Qd({ref:t},n),r)});function WV(){var e=yt(),[t,r]=b.useState(null),n=fe(F5);return b.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;zr(i)&&i!==n&&e(d5(i))}},[t,e,n]),r}function h1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(r),!0).forEach(function(n){HV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HV(e,t,r){return(t=GV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GV(e){var t=YV(e,"string");return typeof t=="symbol"?t:t+""}function YV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XV=b.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:h,onTouchMove:p,onTouchStart:y,style:g,width:v}=e,x=yt(),[w,_]=b.useState(null),[j,N]=b.useState(null);bU();var S=WV(),E=b.useCallback(F=>{S(F),typeof t=="function"&&t(F),_(F),N(F)},[S,t,_,N]),O=b.useCallback(F=>{x(FC(F)),x(Ur({handler:i,reactEvent:F}))},[x,i]),T=b.useCallback(F=>{x($g(F)),x(Ur({handler:u,reactEvent:F}))},[x,u]),$=b.useCallback(F=>{x(jE()),x(Ur({handler:d,reactEvent:F}))},[x,d]),P=b.useCallback(F=>{x($g(F)),x(Ur({handler:f,reactEvent:F}))},[x,f]),z=b.useCallback(()=>{x(WC())},[x]),I=b.useCallback(F=>{x(VC(F.key))},[x]),q=b.useCallback(F=>{x(Ur({handler:o,reactEvent:F}))},[x,o]),Q=b.useCallback(F=>{x(Ur({handler:l,reactEvent:F}))},[x,l]),D=b.useCallback(F=>{x(Ur({handler:c,reactEvent:F}))},[x,c]),k=b.useCallback(F=>{x(Ur({handler:m,reactEvent:F}))},[x,m]),C=b.useCallback(F=>{x(Ur({handler:y,reactEvent:F}))},[x,y]),A=b.useCallback(F=>{x(HC(F)),x(Ur({handler:p,reactEvent:F}))},[x,p]),R=b.useCallback(F=>{x(Ur({handler:h,reactEvent:F}))},[x,h]);return b.createElement(qE.Provider,{value:w},b.createElement(FI.Provider,{value:j},b.createElement("div",{className:je("recharts-wrapper",n),style:KV({position:"relative",cursor:"default",width:v,height:s},g),onClick:O,onContextMenu:q,onDoubleClick:Q,onFocus:z,onKeyDown:I,onMouseDown:D,onMouseEnter:T,onMouseLeave:$,onMouseMove:P,onMouseUp:k,onTouchEnd:R,onTouchMove:A,onTouchStart:C,ref:E},r)))}),JV=["children","className","width","height","style","compact","title","desc"];function ZV(e,t){if(e==null)return{};var r,n,s=eW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tW=b.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:u}=e,d=ZV(e,JV),f=Pe(d,!1);return l?b.createElement(f1,{otherAttributes:f,title:c,desc:u},r):b.createElement(XV,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(f1,{otherAttributes:f,title:c,desc:u,ref:t},b.createElement(O7,null,r)))}),rW=["width","height"];function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(null,arguments)}function nW(e,t){if(e==null)return{};var r,n,s=sW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iW={top:5,right:5,bottom:5,left:5},aW={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:iW,reverseStackOrder:!1,syncMethod:"index"},YC=b.forwardRef(function(t,r){var n,s=ws(t.categoricalChartProps,aW),{width:i,height:o}=s,l=nW(s,rW);if(!wd(i)||!wd(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return b.createElement(zV,{preloadedState:{options:h},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},b.createElement(b7,{chartData:m.data}),b.createElement(LV,{width:i,height:o,layout:s.layout,margin:s.margin}),b.createElement(RV,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),b.createElement(tW,zg({},l,{width:i,height:o,ref:r})))}),oW=["axis"],XC=b.forwardRef((e,t)=>b.createElement(YC,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:oW,tooltipPayloadSearcher:UE,categoricalChartProps:e,ref:t})),lW=["axis","item"],cW=b.forwardRef((e,t)=>b.createElement(YC,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lW,tooltipPayloadSearcher:UE,categoricalChartProps:e,ref:t}));function uW({data:e,loading:t,error:r,showIndividual:n,timeframe:s="weekly",onTimeframeChange:i}){const[o,l]=b.useState("score"),c=x=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const w=e.filter(O=>{switch(x){case"score":return O.totalPossiblePoints>0;case"quizzes":return O.totalQuizzesCompleted>0;case"time":return O.totalTimeSpentMinutes>0;default:return!1}});if(w.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const _=w[w.length-1],j=w[w.length-2];let N,S;switch(x){case"score":N=_.averageScore,S=j.averageScore;break;case"quizzes":N=_.totalQuizzesCompleted,S=j.totalQuizzesCompleted;break;case"time":N=_.totalTimeSpentMinutes,S=j.totalTimeSpentMinutes;break}if(S===0)return{direction:"stable",value:0,color:"text-gray-600"};const E=(N-S)/S*100;return Math.abs(E)<5?{direction:"stable",value:E,color:"text-gray-600"}:E>0?{direction:"up",value:E,color:"text-green-600"}:{direction:"down",value:E,color:"text-red-600"}},u=x=>{switch(x){case"up":return a.jsx(wr,{className:"h-4 w-4"});case"down":return a.jsx(Q0,{className:"h-4 w-4"});default:return a.jsx(wS,{className:"h-4 w-4"})}},d=({active:x,payload:w,label:_})=>{var j;if(x&&w&&w.length){const N=w[0].payload;return a.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900 mb-2",children:_}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(j=N.averageScore)==null?void 0:j.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",N.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Questions: ",N.totalQuestionsAnswered]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Time: ",It(N.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Correct: ",N.correctAnswers," | Incorrect: ",N.incorrectAnswers]})]})]})}return null},m=(()=>{switch(o){case"score":return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:x=>`${x}%`,domain:[0,100]};case"quizzes":return{dataKey:"totalQuizzesCompleted",color:"#10b981",yAxisFormatter:x=>x.toString(),domain:[0,"dataMax"]};case"time":return{dataKey:"totalTimeSpentMinutes",color:"#8b5cf6",yAxisFormatter:x=>It(x),domain:[0,"dataMax"]};default:return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:x=>`${x}%`,domain:[0,100]}}})(),h=e.reduce((x,w)=>x+w.totalQuizzesCompleted,0),p=e.reduce((x,w)=>x+w.totalQuestionsAnswered,0),y=e.reduce((x,w)=>x+w.totalTimeSpentMinutes,0),g=e.reduce((x,w)=>x+w.totalPossiblePoints,0)>0?e.reduce((x,w)=>x+w.totalPointsEarned,0)/e.reduce((x,w)=>x+w.totalPossiblePoints,0)*100:0,v=c(o);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Progression Report"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Progression"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance trends over time":"Team performance trends over time"})]})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>i("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing progression data..."})]}):e.length===0||h===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progression Data"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual needs to complete more quizzes to see progression trends.":"The team needs to complete more quizzes to see progression trends."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[g.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Overall Score"})]}),a.jsx(Nt,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:h}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(at,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(at,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:It(y)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Me,{className:"h-8 w-8 text-orange-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Average Score"}),a.jsx("button",{onClick:()=>l("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>l("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${v.color}`,children:[u(v.direction),a.jsx("span",{className:"font-medium",children:v.direction==="up"?"Improving":v.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[o==="score"&&"Average Score",o==="quizzes"&&"Quiz Activity",o==="time"&&"Study Time",Math.abs(v.value)>0&&a.jsxs("span",{className:v.color,children:[" ","(",v.value>0?"+":"",v.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[o==="score"&&"Average Score Trend",o==="quizzes"&&"Quiz Activity Trend",o==="time"&&"Study Time Trend"]}),e.length===0?a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No Data Available"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Complete more quizzes to see progression trends"})]})}):a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(XC,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280",angle:-45,textAnchor:"end",height:60}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:m.yAxisFormatter,domain:m.domain}),a.jsx(kg,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:m.dataKey,stroke:m.color,strokeWidth:3,dot:{fill:m.color,strokeWidth:2,r:5},activeDot:{r:7,stroke:m.color,strokeWidth:2},connectNulls:!1})]})})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((x,w)=>{const _=x.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${w>0?"border-t border-gray-100":""} ${_?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:x.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[x.periodStart.toLocaleDateString()," - ",x.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:_?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[x.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[x.totalQuizzesCompleted," quiz",x.totalQuizzesCompleted!==1?"es":"",", ",x.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[It(x.totalTimeSpentMinutes)," study time"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No activity"})})]})},x.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(wr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Progression Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:" Track your progress toward the 90% pass rate goal"}),a.jsx("li",{children:" Identify periods of high activity and strong performance"}),a.jsx("li",{children:" Use trends to adjust study schedules and focus areas"}),a.jsx("li",{children:" Consistent practice leads to better retention and scores"})]})]})]})})]})})]})}function m1(){var m,h;const{selectedMemberId:e,progressionTimeframe:t,setProgressionTimeframe:r,analyticsData:n,analyticsLoading:s,analyticsError:i,progressionData:o,progressionLoading:l,progressionError:c}=ui();if(s)return a.jsx(Lt,{text:"Loading overview data...",className:"py-8"});if(i)return a.jsx(Fe,{type:"error",message:i});const u=[{name:"Quizzes Completed",value:((m=n==null?void 0:n.totalQuizzesCompleted)==null?void 0:m.toLocaleString())||"0",icon:ke,iconColor:"text-indigo-600"},{name:"Questions Answered",value:((h=n==null?void 0:n.totalQuestionsAnswered)==null?void 0:h.toLocaleString())||"0",icon:at,iconColor:"text-green-600"},{name:"Average Score",value:n!=null&&n.averageScore?`${n.averageScore.toFixed(1)}%`:"0%",icon:mr,iconColor:"text-blue-600"},{name:"Total Study Time",value:It((n==null?void 0:n.totalTimeSpentMinutes)||0),icon:Me,iconColor:"text-purple-600"},{name:"Study Streak",value:n!=null&&n.studyStreak?`${n.studyStreak} day${n.studyStreak===1?"":"s"}`:"0 days",icon:Nt,iconColor:"text-yellow-600"}],d=({active:p,payload:y,label:g})=>{var v;if(p&&y&&y.length){const x=y[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900",children:g}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(v=x.averageScore)==null?void 0:v.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",x.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Time: ",It(x.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Questions: ",x.totalQuestionsAnswered]})]})]})}return null},f=(p,y)=>{switch(y){case"averageScore":return`${p}%`;case"totalTimeSpentMinutes":return It(p);default:return p.toString()}};return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6",children:u.map(p=>a.jsx(Ke,{title:p.name,value:p.value,icon:p.icon,iconColor:p.iconColor},p.name))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:e===void 0?"Team Performance Trends":"Performance Overview"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(Lt,{text:"Loading chart data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(wr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load chart data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(XC,{data:o,children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:p=>f(p,"averageScore")}),a.jsx(kg,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:"averageScore",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(wr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No progression data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see trends"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quiz Activity Distribution"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(Lt,{text:"Loading activity data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load activity data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(cW,{data:o,children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(kg,{formatter:(p,y)=>[y==="totalQuizzesCompleted"?`${p} quizzes`:`${p} questions`,y==="totalQuizzesCompleted"?"Quizzes Completed":"Questions Answered"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"8px"}}),a.jsx(qd,{dataKey:"totalQuizzesCompleted",fill:"#10b981",name:"Quizzes",radius:[2,2,0,0]}),a.jsx(qd,{dataKey:"totalQuestionsAnswered",fill:"#3b82f6",name:"Questions",radius:[2,2,0,0]})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No activity data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see activity distribution"})]})})]})]}),a.jsx(uW,{data:o,loading:l,error:c,showIndividual:e!==void 0,timeframe:t,onTimeframeChange:r})]})}function kn({isOpen:e,onClose:t,title:r,children:n,footer:s,maxWidth:i="md",themeClasses:o,isFullScreen:l=!1}){var m;if(!e)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"},u=(o==null?void 0:o.card)==="bg-transparent"?(m=o==null?void 0:o.text)!=null&&m.includes("text-white")?"bg-gray-900":"bg-white":(o==null?void 0:o.card)||"bg-white",d=(o==null?void 0:o.text)||"text-gray-900",f=(o==null?void 0:o.border)||"border-gray-200";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`${u} rounded-xl p-6 w-full ${c[i]} max-h-[90vh] overflow-y-auto ${l?"":"border "+f}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:`text-lg font-semibold ${d}`,children:r}),a.jsx("button",{onClick:t,className:`${(o==null?void 0:o.textSecondary)||"text-gray-400"} hover:${(o==null?void 0:o.text)||"text-gray-600"} transition-colors duration-200`,children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:n}),s&&a.jsx("div",{className:"flex items-center justify-end space-x-3",children:s})]})})}function JC({isOpen:e,onClose:t,quizSessionId:r,quizTitle:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState("all");b.useEffect(()=>{e&&r&&m()},[e,r]);const m=async()=>{if(r){l(!0),u(null);try{console.log(" Fetching question details for quiz session:",r);const{data:g,error:v}=await V.from("quiz_question_logs").select(`
          id,
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          answered_at,
          questions!inner (
            book_of_bible,
            chapter,
            question,
            answer,
            points,
            tier
          )
        `).eq("quiz_session_id",r).order("answered_at",{ascending:!0});if(v)throw console.error(" Error fetching question details:",v),v;console.log(" Question details fetched:",(g==null?void 0:g.length)||0,"questions"),i(g||[])}catch(g){console.error(" Error fetching question details:",g),u(g.message||"Failed to load question details")}finally{l(!1)}}},h=s.filter(g=>{switch(d){case"correct":return g.is_correct;case"incorrect":return!g.is_correct;default:return!0}}),p={total:s.length,correct:s.filter(g=>g.is_correct).length,incorrect:s.filter(g=>!g.is_correct).length,totalPoints:s.reduce((g,v)=>g+v.points_earned,0),maxPoints:s.reduce((g,v)=>g+v.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((g,v)=>g+v.time_spent,0)/s.length):0},y=p.total>0?Math.round(p.correct/p.total*100):0;return a.jsx(kn,{isOpen:e,onClose:t,title:`Quiz Details${n?`: ${n}`:""}`,maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:o?a.jsx(Lt,{text:"Loading question details...",className:"py-8"}):c?a.jsx(Fe,{type:"error",message:c}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p.total}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[y,"%"]}),a.jsx("div",{className:"text-sm text-green-700",children:"Accuracy"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p.totalPoints}),a.jsx("div",{className:"text-sm text-purple-700",children:"Points Earned"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_l(p.averageTime)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Avg Time"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(U0,{className:"h-4 w-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",p.total,")"]}),a.jsxs("button",{onClick:()=>f("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",p.correct,")"]}),a.jsxs("button",{onClick:()=>f("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",p.incorrect,")"]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",p.total," questions"]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Questions Found"}),a.jsx("p",{className:"text-gray-600",children:d==="all"?"No question details available for this quiz.":`No ${d} questions found.`})]}):h.map((g,v)=>a.jsxs("div",{className:`border rounded-lg p-4 ${g.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{children:g.question?a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(ke,{className:"h-4 w-4"}),a.jsxs("span",{children:[g.question.book_of_bible," Chapter ",g.question.chapter]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"capitalize",children:[g.question.tier," tier"]})]}):a.jsx("div",{className:"text-sm text-gray-500 italic",children:"Question details not available"})}),a.jsx("div",{children:g.is_correct?a.jsx(Dt,{className:"h-5 w-5 text-green-600"}):a.jsx(zs,{className:"h-5 w-5 text-red-600"})})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(mr,{className:"h-4 w-4 text-purple-600"}),a.jsxs("span",{className:"font-medium",children:[g.points_earned,"/",g.total_points_possible," pts"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{children:_l(g.time_spent)})]})]}),g.question?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Question:"}),a.jsx("div",{className:"text-gray-900",children:g.question.question})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Correct Answer:"}),a.jsx("div",{className:"text-gray-900",children:g.question.answer})]}),!g.is_correct&&a.jsxs("div",{className:"bg-red-100 border border-red-200 rounded p-2",children:[a.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"Result:"}),a.jsxs("div",{className:"text-red-800",children:["Incorrect answer - ",g.points_earned," of ",g.total_points_possible," points earned"]})]})]}):a.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Question details are not available for this entry. This may occur if the question was deleted after the quiz was completed."})})]},g.id))})]})})}function dW({data:e,loading:t,error:r}){const[n,s]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(""),u=f=>{o(f.id),c(f.title),s(!0)},d=[{key:"title",header:"Quiz Title",render:f=>a.jsx("div",{className:"font-medium text-gray-900",children:f.title})},{key:"type",header:"Type",render:f=>a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:kS(f.type)})})},{key:"completed_at",header:"Date",render:f=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(f.completed_at).toLocaleDateString()})},{key:"score",header:"Score",render:f=>{const m=f.max_points>0?f.total_points/f.max_points*100:0,h=m>=90?"text-green-600":m>=70?"text-blue-600":"text-red-600";return a.jsxs("div",{className:`font-bold text-lg ${h}`,children:[m.toFixed(1),"%"]})},className:"text-center",headerClassName:"text-center"},{key:"questions_count",header:"Questions",render:f=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:f.questions_count})]})}),className:"text-center",headerClassName:"text-center"},{key:"estimated_minutes",header:"Time",render:f=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:It(f.estimated_minutes)})]})}),className:"text-center",headerClassName:"text-center"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Quiz History"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Completed Quizzes"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of quizzes completed by this team member."})]})]})}),a.jsx(sn,{columns:d,data:e,loading:t,onRowClick:u,emptyState:{icon:ke,title:"No Quizzes Completed",description:"This team member has not completed any quizzes in the selected date range."}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Showing latest completed quizzes. Click on a row to view detailed results."})}),a.jsx(JC,{isOpen:n,onClose:()=>{s(!1),o(null),c("")},quizSessionId:i,quizTitle:l})]})}function fW(){const{quizHistoryData:e,quizHistoryLoading:t,quizHistoryError:r}=ui();return a.jsx(dW,{data:e,loading:t,error:r})}function hW({data:e,loading:t,error:r}){const[n,s]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(""),u=p=>{p.completed&&p.quiz_session_id&&(o(p.quiz_session_id),c(`Study Assignment - ${ao(p.study_items)}`),s(!0))},d=p=>{const y=m(p)?"bg-orange-50 border-l-4 border-orange-400":"";return p.completed&&p.quiz_session_id?`${y} cursor-pointer hover:bg-gray-50`.trim():y},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",m=p=>{if(!p.completed||!p.completed_at)return!1;const y=new Date(p.date);return y.setHours(23,59,59,999),new Date(p.completed_at)>y},h=[{key:"study_items",header:"Study Items",render:p=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900",children:ao(p.study_items)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[p.study_items.length," item",p.study_items.length!==1?"s":""]})]})},{key:"date",header:"Date",render:p=>a.jsx("div",{className:"text-sm text-gray-900",children:oo(p.date,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),className:"whitespace-nowrap"},{key:"completed_at",header:"Completed",render:p=>a.jsx("div",{className:"text-sm text-gray-600",children:p.completed_at?a.jsxs("div",{className:m(p)?"text-orange-700 font-medium":"",children:[oo(new Date(p.completed_at),{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),m(p)&&a.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"(Late completion)"})]}):a.jsx("span",{className:"text-gray-400",children:""})}),className:"whitespace-nowrap"},{key:"score",header:"Score",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_points_earned!==void 0&&p.max_points_possible!==void 0?a.jsx("div",{className:`font-bold text-lg ${f(p.max_points_possible>0?p.total_points_earned/p.max_points_possible*100:0)}`,children:p.max_points_possible>0?`${Math.round(p.total_points_earned/p.max_points_possible*100)}%`:"0%"}):a.jsx("div",{className:"text-sm text-gray-400",children:""})}),className:"text-center"},{key:"questions",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_questions_answered!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.total_questions_answered})]}):a.jsx("div",{className:"text-sm text-gray-400",children:""})}),className:"text-center"},{key:"time",header:"Time",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_time_spent_minutes!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.total_time_spent_minutes,"m"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:""})}),className:"text-center"},{key:"completed",header:"Status",render:p=>a.jsx("div",{className:"flex items-center space-x-2",children:p.completed?a.jsxs("div",{className:`flex items-center space-x-2 ${m(p)?"text-orange-700":""}`,children:[a.jsx(Dt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:`text-sm font-medium ${m(p)?"text-orange-700":"text-green-700"}`,children:m(p)?"Completed Late":"Completed"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Me,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"})]})}),className:"whitespace-nowrap"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Study Schedule"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Study Schedule Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of study assignments and completion status."})]})]})}),a.jsx(sn,{columns:h,data:e,loading:t,onRowClick:u,getRowClassName:d,emptyState:{icon:Yt,title:"No Study Assignments",description:"No study assignments found for the selected date range. Study assignments are created through the Study Schedule feature."}}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(p=>p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(p=>!p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click on completed assignments to view detailed quiz results."})})]}),a.jsx(JC,{isOpen:n,onClose:()=>{s(!1),o(null),c("")},quizSessionId:i,quizTitle:l})]})}function mW(){const{studyScheduleData:e,studyScheduleLoading:t,studyScheduleError:r}=ui();return a.jsx(hW,{data:e,loading:t,error:r})}function pW({data:e,loading:t,error:r,showIndividual:n}){const s=l=>{switch(l){case"book":return a.jsx(ke,{className:"h-4 w-4 text-blue-600"});case"chapter":return a.jsx(at,{className:"h-4 w-4 text-green-600"});case"tier":return a.jsx(Mp,{className:"h-4 w-4 text-purple-600"});default:return a.jsx(qn,{className:"h-4 w-4 text-gray-600"})}},i=l=>l>=80?"text-yellow-600":l>=70?"text-orange-600":"text-red-600",o=l=>l>=80?"bg-yellow-50 border-yellow-200":l>=70?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200";return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Knowledge Gaps"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Q0,{className:"h-6 w-6 text-red-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Knowledge Gaps Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Topics where this individual struggles most (below 90% accuracy)":"Topics where the team struggles most (below 90% accuracy)"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing knowledge gaps..."})]}):e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(at,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Knowledge Gaps Found"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual is performing well across all topics (90%+ accuracy)!":"The team is performing well across all topics (90%+ accuracy)!"})]}):a.jsxs("div",{className:"space-y-4",children:[e.map((l,c)=>a.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-200 hover:shadow-md ${o(l.averageScore)}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",c+1]}),s(l.type)]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:l.topic}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[l.totalAttempts," attempts"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[l.correctAnswers," correct"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[l.incorrectAnswers," incorrect"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-2xl font-bold ${i(l.averageScore)}`,children:[l.averageScore.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Accuracy"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l.averageScore>=80?"bg-yellow-500":l.averageScore>=70?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.max(l.averageScore,5)}%`}})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0%"}),a.jsx("span",{children:"100%"})]})]}),a.jsxs("div",{className:"mt-3 flex items-start space-x-2",children:[a.jsx(F0,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Recommendation:"})," Focus additional study time on ",l.topic.toLowerCase(),l.type==="chapter"&&l.book&&l.chapter?` by reviewing ${l.book} chapter ${l.chapter} content and practicing more questions from this section.`:l.type==="book"&&l.book?` by reviewing ${l.book} content and practicing more questions from this book.`:l.type==="tier"&&l.tier?` by practicing more ${l.tier} level questions to build confidence.`:" to improve performance in this area."]})]})]},`${l.type}-${l.topic}`)),e.length>0&&a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Mp,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Study Tips:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:" Focus on the topics with the lowest scores first"}),a.jsx("li",{children:" Create custom quizzes targeting these specific areas"}),a.jsx("li",{children:" Review source material for chapters with low performance"}),a.jsx("li",{children:" Practice regularly to improve retention and understanding"})]})]})]})})]})})]})}function gW(){const{selectedMemberId:e,knowledgeGapsData:t,knowledgeGapsLoading:r,knowledgeGapsError:n}=ui();return a.jsx(pW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function xr({type:e,value:t,showIcon:r=!1,size:n="sm"}){const s=()=>{switch(e){case"role":switch(t){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}case"status":switch(t){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}case"tier":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"plan":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"teamRole":switch(t){case"owner":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}default:return"bg-gray-100 text-gray-800"}},i=()=>{if(!r)return null;switch(e){case"role":return t==="admin"?a.jsx(_n,{className:"h-3 w-3"}):a.jsx(He,{className:"h-3 w-3"});case"status":switch(t){case"active":return a.jsx(Dt,{className:"h-3 w-3"});case"pending":return a.jsx(Me,{className:"h-3 w-3"});case"suspended":return a.jsx(zs,{className:"h-3 w-3"});default:return a.jsx(tn,{className:"h-3 w-3"})}case"tier":switch(t){case"enterprise":return a.jsx(ds,{className:"h-3 w-3"});case"pro":return a.jsx(Ki,{className:"h-3 w-3"});default:return null}case"teamRole":switch(t){case"owner":return a.jsx(ds,{className:"h-3 w-3"});case"admin":return a.jsx(_n,{className:"h-3 w-3"});default:return a.jsx(He,{className:"h-3 w-3"})}default:return null}},o=n==="md"?"px-3 py-1 text-sm":"px-2 py-1 text-xs",l=i();return a.jsxs("span",{className:`inline-flex items-center ${o} font-semibold rounded-full ${s()}`,children:[l&&a.jsx("span",{className:"mr-1",children:l}),a.jsx("span",{className:"capitalize",children:t})]})}function xW({isOpen:e,onClose:t,question:r,teamId:n}){const[s,i]=b.useState([]),[o,l]=b.useState("all"),c=async()=>{if(!(!r||!n))try{console.log(" Fetching all attempts for question:",r.question_id,"in team:",n);const{data:y,error:g}=await V.rpc("get_question_attempts_with_user_details",{p_question_id:r.question_id,p_team_id:n});if(g){console.error(" Error fetching all attempts:",g),console.warn(" Team member attempt details not available, continuing without them"),i([]);return}console.log(" All attempts fetched:",(y==null?void 0:y.length)||0,"attempts"),i(y||[])}catch(y){console.error(" Error fetching all attempts:",y),i([])}};if(b.useEffect(()=>{e&&r&&n&&c()},[e,r,n]),!r)return null;const u=y=>y>=90?"text-green-600":y>=50?"text-yellow-600":"text-red-600",d=y=>y>=90?"bg-green-50 border-green-200":y>=50?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200",f=s.filter(y=>{switch(o){case"correct":return y.is_correct;case"incorrect":return!y.is_correct;default:return!0}}),m={total:s.length,correct:s.filter(y=>y.is_correct).length,incorrect:s.filter(y=>!y.is_correct).length,totalPoints:s.reduce((y,g)=>y+g.points_earned,0),maxPoints:s.reduce((y,g)=>y+g.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((y,g)=>y+g.time_spent,0)/s.length):0},h=y=>y>=90?"Easy":y>=70?"Moderate":y>=50?"Challenging":"Difficult",p=r.total_points_possible>0?Math.round(r.total_points_earned/r.total_points_possible*100):0;return a.jsx(kn,{isOpen:e,onClose:t,title:"Question Performance Details",maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:`border rounded-lg p-4 ${d(r.accuracy_rate)}`,children:a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:[r.book_of_bible," Chapter ",r.chapter]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(xr,{type:"tier",value:r.tier,showIcon:!0}),a.jsx("span",{className:"text-sm text-gray-600",children:""}),a.jsxs("span",{className:"text-sm text-gray-600",children:[r.points," points"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-3xl font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h(r.accuracy_rate)})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.total_attempts}),a.jsxs("div",{className:"text-sm text-blue-700 flex items-center justify-center space-x-1",children:[a.jsx(He,{className:"h-4 w-4"}),a.jsx("span",{children:"Total Attempts"})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:r.correct_attempts}),a.jsxs("div",{className:"text-sm text-green-700 flex items-center justify-center space-x-1",children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsx("span",{children:"Correct"})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-900",children:r.incorrect_attempts}),a.jsxs("div",{className:"text-sm text-red-700 flex items-center justify-center space-x-1",children:[a.jsx(zs,{className:"h-4 w-4"}),a.jsx("span",{children:"Incorrect"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_l(r.average_time_spent)}),a.jsxs("div",{className:"text-sm text-purple-700 flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4"}),a.jsx("span",{children:"Avg Time"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(at,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{children:"Question"})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.question_text})})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{children:"Correct Answer"})]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.answer_text})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center space-x-2",children:[a.jsx(sr,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{children:"Performance Analysis"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Success Rate"}),a.jsxs("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Points Efficiency"}),a.jsxs("span",{className:`font-bold ${u(p)}`,children:[p,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Difficulty Level"}),a.jsx("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:h(r.accuracy_rate)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Average Response Time"}),a.jsx("span",{className:"font-bold text-gray-900",children:_l(r.average_time_spent)})]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h5",{className:"font-medium text-blue-900 mb-2 flex items-center space-x-2",children:[a.jsx(wr,{className:"h-4 w-4"}),a.jsx("span",{children:"Recommendations"})]}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[r.accuracy_rate<50&&a.jsx("p",{children:" Consider reviewing this question for clarity or difficulty"}),r.accuracy_rate>=50&&r.accuracy_rate<70&&a.jsx("p",{children:" This question provides good challenge - consider similar difficulty"}),r.accuracy_rate>=90&&a.jsx("p",{children:" This question may be too easy - consider increasing difficulty"}),r.average_time_spent>60&&a.jsx("p",{children:" Users take longer than expected - question may need simplification"}),r.total_attempts<10&&a.jsx("p",{children:" Limited data available - more attempts needed for reliable analysis"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Response Distribution"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:"bg-green-500 h-4 rounded-l-full transition-all duration-300",style:{width:`${r.correct_attempts/r.total_attempts*100}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[a.jsxs("span",{children:[r.correct_attempts," Correct"]}),a.jsxs("span",{children:[r.total_attempts," Total Attempts"]}),a.jsxs("span",{children:[r.incorrect_attempts," Incorrect"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[a.jsx(He,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Team Member Attempts"})]}),s.length>0&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>l("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",m.total,")"]}),a.jsxs("button",{onClick:()=>l("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",m.correct,")"]}),a.jsxs("button",{onClick:()=>l("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",m.incorrect,")"]})]})]}),s.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Attempts Found"}),a.jsx("p",{className:"text-gray-600",children:"No team member attempts available for this question."})]}):f.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["No ",o.charAt(0).toUpperCase()+o.slice(1)," Attempts"]}),a.jsxs("p",{className:"text-gray-600",children:["No ",o," attempts found for this question."]})]}):a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:f.map((y,g)=>a.jsxs("div",{className:`border rounded-lg p-4 ${y.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:y.user_name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:y.user_name}),a.jsx("div",{className:"text-sm text-gray-600",children:Rp(y.answered_at)})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-sm text-orange-600",children:_l(y.time_spent)})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${y.is_correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.is_correct?"Correct":"Incorrect"})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Points: ",y.points_earned," / ",y.total_points_possible]})]},`${y.user_id}-${y.answered_at}`))})]})]})})}function yW({data:e,loading:t,error:r,showIndividual:n,user:s}){const[i,o]=b.useState("accuracy_rate"),[l,c]=b.useState("asc"),[u,d]=b.useState(!1),[f,m]=b.useState(null),h=oe.useMemo(()=>[...e].sort((_,j)=>{const N=_[i],S=j[i];return typeof N=="number"&&typeof S=="number"?l==="desc"?S-N:N-S:typeof N=="string"&&typeof S=="string"?l==="desc"?S.localeCompare(N):N.localeCompare(S):0}),[e,i,l]),p=_=>{i===_?c(l==="desc"?"asc":"desc"):(o(_),c(_==="accuracy_rate"?"asc":"desc"))},y=_=>{m(_),d(!0)},g=_=>_>=90?"text-green-600":_>=70?"text-blue-600":_>=50?"text-yellow-600":"text-red-600",v=_=>{if(_<60)return`${_}s`;const j=Math.floor(_/60),N=_%60;return`${j}:${N.toString().padStart(2,"0")}`},w=[{key:"question_text",header:"Question",render:_=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900 line-clamp-2 mb-1",children:_.question_text}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.points," point",_.points!==1?"s":""]})]})},{key:"book_chapter",header:"Book & Chapter",render:_=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:_.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",_.chapter]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:_=>a.jsx(xr,{type:"tier",value:_.tier,showIcon:!0}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:_=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${g(_.accuracy_rate)}`,children:[_.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.correct_attempts,"/",_.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:_.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:v(_.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:_=>{const j=_.total_points_possible>0?Math.round(_.total_points_earned/_.total_points_possible*100):0;return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${g(j)}`,children:[j,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.total_points_earned,"/",_.total_points_possible]})]})},className:"text-center",headerClassName:"text-center"}].map(_=>({..._,header:_.sortable?a.jsxs("button",{onClick:()=>p(_.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:_.header}),i===_.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${l==="desc"?"rotate-180":""}`})]}):_.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Question Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Question Performance Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual question performance and difficulty analysis":"Team-wide question performance and difficulty analysis"})]})]})}),a.jsx(sn,{columns:w,data:h,loading:t,onRowClick:y,emptyState:{icon:sr,title:"No Question Data",description:"No question performance data available yet. Complete some quizzes to see question analysis!"},getRowClassName:_=>_.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":_.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions Analyzed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(_=>_.accuracy_rate<50).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Difficult (<50%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(_=>_.accuracy_rate>=50&&_.accuracy_rate<70).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Moderate (50-70%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(_=>_.accuracy_rate>=90).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Easy (>90%)"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Questions with low accuracy rates may need review"})})]}),a.jsx(xW,{isOpen:u,onClose:()=>{d(!1),m(null)},question:f,teamId:s==null?void 0:s.teamId})]})}function vW(){const{selectedMemberId:e,user:t,questionPerformanceData:r,questionPerformanceLoading:n,questionPerformanceError:s}=ui();return a.jsx(yW,{data:r,loading:n,error:s,showIndividual:e!==void 0,user:t})}function bW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("date"),[o,l]=b.useState("desc"),c=oe.useMemo(()=>[...e].sort((x,w)=>{const _=x[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:_ instanceof Date&&j instanceof Date?o==="desc"?j.getTime()-_.getTime():_.getTime()-j.getTime():typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=x=>{s===x?l(o==="desc"?"asc":"desc"):(i(x),l("desc"))},d=(x,w)=>x===0?{level:"No Activity",color:"text-gray-500"}:x>=3||w>=50?{level:"High",color:"text-green-600"}:x>=2||w>=20?{level:"Medium",color:"text-blue-600"}:{level:"Low",color:"text-yellow-600"},m=[{key:"date",header:"Date",render:x=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:x.dateObj.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:x.dateObj.toLocaleDateString()})]}),className:"whitespace-nowrap",sortable:!0},{key:"quizzesCompleted",header:"Quizzes",render:x=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(ke,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:x.quizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"questionsAnswered",header:"Questions",render:x=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:x.questionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"timeSpentMinutes",header:"Study Time",render:x=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:It(x.timeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageSessionTime",header:"Avg Session",render:x=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:x.averageSessionTime>0?It(x.averageSessionTime):""})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"activity_level",header:"Activity Level",render:x=>{const{level:w,color:_}=d(x.quizzesCompleted,x.questionsAnswered);return a.jsx("div",{className:"text-center",children:a.jsx("span",{className:`font-medium ${_}`,children:w})})},className:"text-center",headerClassName:"text-center"},{key:"studyStreak",header:"Streak",render:x=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:x.studyStreak>0?`${x.studyStreak}`:""})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(x=>({...x,header:x.sortable?a.jsxs("button",{onClick:()=>u(x.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:x.header}),s===x.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):x.header})),h=e.reduce((x,w)=>x+w.quizzesCompleted,0),p=e.reduce((x,w)=>x+w.questionsAnswered,0),y=e.reduce((x,w)=>x+w.timeSpentMinutes,0),g=e.filter(x=>x.quizzesCompleted>0).length,v=e.length>0?Math.max(...e.map(x=>x.studyStreak)):0;return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Engagement Data"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(no,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Daily Activity & Engagement"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Daily study activity and engagement patterns for this individual":"Daily study activity and engagement patterns for the team"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:h}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Quizzes"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:p}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:It(y)}),a.jsx("div",{className:"text-sm text-purple-700",children:"Total Time"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:g}),a.jsx("div",{className:"text-sm text-orange-700",children:"Active Days"})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:v}),a.jsx("div",{className:"text-sm text-yellow-700",children:"Best Streak"})]})]})}),a.jsx(sn,{columns:m,data:c,loading:t,emptyState:{icon:no,title:"No Activity Data",description:"No daily activity data available for the selected date range. Complete some quizzes to see engagement patterns!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Activity levels: High (3+ quizzes or 50+ questions), Medium (2+ quizzes or 20+ questions), Low (1+ quiz)"})})})]})}function wW(){const{selectedMemberId:e,engagementData:t,engagementLoading:r,engagementError:n}=ui();return a.jsx(bW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function jW({data:e,loading:t,error:r,timeframe:n="weekly",onTimeframeChange:s}){const[i,o]=b.useState("score"),l=y=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const g=e.filter(N=>{switch(y){case"score":return N.totalPossiblePoints>0;case"quizzes":return N.totalQuizzesCompleted>0;case"time":return N.totalTimeSpentMinutes>0;case"members":return N.activeMembers>0;default:return!1}});if(g.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const v=g[g.length-1],x=g[g.length-2];let w,_;switch(y){case"score":w=v.averageScore,_=x.averageScore;break;case"quizzes":w=v.totalQuizzesCompleted,_=x.totalQuizzesCompleted;break;case"time":w=v.totalTimeSpentMinutes,_=x.totalTimeSpentMinutes;break;case"members":w=v.activeMembers,_=x.activeMembers;break}if(_===0)return{direction:"stable",value:0,color:"text-gray-600"};const j=(w-_)/_*100;return Math.abs(j)<5?{direction:"stable",value:j,color:"text-gray-600"}:j>0?{direction:"up",value:j,color:"text-green-600"}:{direction:"down",value:j,color:"text-red-600"}},c=y=>{switch(y){case"up":return a.jsx(wr,{className:"h-4 w-4"});case"down":return a.jsx(Q0,{className:"h-4 w-4"});default:return a.jsx(wS,{className:"h-4 w-4"})}},u=e.reduce((y,g)=>y+g.totalQuizzesCompleted,0),d=e.reduce((y,g)=>y+g.totalQuestionsAnswered,0),f=e.reduce((y,g)=>y+g.totalTimeSpentMinutes,0),m=e.reduce((y,g)=>y+g.totalPossiblePoints,0)>0?e.reduce((y,g)=>y+g.totalPointsEarned,0)/e.reduce((y,g)=>y+g.totalPossiblePoints,0)*100:0,h=e.length>0?Math.max(...e.map(y=>y.activeMembers)):0;e.reduce((y,g)=>y+g.activeDays,0);const p=l(i);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Team Performance Trends"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(He,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Performance Trends"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track your team's collective performance and activity over time"})]})]}),s&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>s("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing team performance trends..."})]}):e.length===0||u===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Performance Data"}),a.jsx("p",{className:"text-gray-600",children:"Your team needs to complete more quizzes to see performance trends over time."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[m.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Team Average Score"})]}),a.jsx(Nt,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:u}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(at,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:d}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(at,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:It(f)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Me,{className:"h-8 w-8 text-orange-600"})]})}),a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:h}),a.jsx("div",{className:"text-sm text-indigo-700",children:"Active Members"})]}),a.jsx(He,{className:"h-8 w-8 text-indigo-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>o("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Team Score"}),a.jsx("button",{onClick:()=>o("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>o("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"}),a.jsx("button",{onClick:()=>o("members"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="members"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Active Members"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${p.color}`,children:[c(p.direction),a.jsx("span",{className:"font-medium",children:p.direction==="up"?"Improving":p.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[i==="score"&&"Team Average Score",i==="quizzes"&&"Quiz Activity",i==="time"&&"Study Time",i==="members"&&"Active Members",Math.abs(p.value)>0&&a.jsxs("span",{className:p.color,children:[" ","(",p.value>0?"+":"",p.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[i==="score"&&"Team Average Score Trend",i==="quizzes"&&"Team Quiz Activity Trend",i==="time"&&"Team Study Time Trend",i==="members"&&"Active Members Trend"]}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Interactive Chart Would Go Here"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Integration with charting library (e.g., Chart.js, Recharts) needed"}),a.jsx("div",{className:"mt-4 text-xs text-gray-400",children:a.jsxs("p",{children:["Data points available: ",e.filter(y=>{switch(i){case"score":return y.totalPossiblePoints>0;case"quizzes":return y.totalQuizzesCompleted>0;case"time":return y.totalTimeSpentMinutes>0;case"members":return y.activeMembers>0;default:return!1}}).length," periods"]})})]})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((y,g)=>{const v=y.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${g>0?"border-t border-gray-100":""} ${v?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:y.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.periodStart.toLocaleDateString()," - ",y.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:v?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[y.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.totalQuizzesCompleted," quiz",y.totalQuizzesCompleted!==1?"es":"",", ",y.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[It(y.totalTimeSpentMinutes)," study time, ",y.activeMembers," active members"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No team activity"})})]})},y.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(wr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Team Performance Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:" Monitor team engagement and collective learning progress"}),a.jsx("li",{children:" Identify periods of high activity and strong team performance"}),a.jsx("li",{children:" Use trends to motivate team members and celebrate achievements"}),a.jsx("li",{children:" Track how many team members are actively participating"})]})]})]})})]})})]})}function _W(){const{progressionTimeframe:e,setProgressionTimeframe:t,teamTrendsData:r,teamTrendsLoading:n,teamTrendsError:s}=ui();return a.jsx(jW,{data:r,loading:n,error:s,timeframe:e,onTimeframeChange:t})}function NW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("accuracy_rate"),[o,l]=b.useState("asc"),c=oe.useMemo(()=>[...e].sort((x,w)=>{const _=x[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=x=>{s===x?l(o==="desc"?"asc":"desc"):(i(x),l(x==="accuracy_rate"?"asc":"desc"))},d=x=>x>=90?"text-green-600":x>=70?"text-blue-600":x>=50?"text-yellow-600":"text-red-600",f=x=>{if(x<60)return`${x}s`;const w=Math.floor(x/60),_=x%60;return`${w}:${_.toString().padStart(2,"0")}`},h=[{key:"book_of_bible",header:"Book",render:x=>a.jsx("div",{className:"font-medium text-gray-900",children:x.book_of_bible}),sortable:!0},{key:"chapter",header:"Chapter",render:x=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:x.chapter})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:x=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${d(x.accuracy_rate)}`,children:[x.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[x.correct_attempts,"/",x.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:x=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:x.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:x=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:f(x.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:x=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${d(x.points_efficiency)}`,children:[x.points_efficiency,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[x.total_points_earned,"/",x.total_points_possible]})]}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(x=>({...x,header:x.sortable?a.jsxs("button",{onClick:()=>u(x.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:x.header}),s===x.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):x.header})),p=new Set(e.map(x=>x.book_of_bible)).size,y=e.length,g=e.length>0?Math.round(e.reduce((x,w)=>x+w.accuracy_rate,0)/e.length):0,v=e.reduce((x,w)=>x+w.total_attempts,0);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Book/Chapter Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Book & Chapter Performance"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance breakdown by Bible book and chapter":"Team performance breakdown by Bible book and chapter"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p}),a.jsx("div",{className:"text-sm text-blue-700",children:"Books Analyzed"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:y}),a.jsx("div",{className:"text-sm text-green-700",children:"Chapters Analyzed"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[g,"%"]}),a.jsx("div",{className:"text-sm text-purple-700",children:"Overall Accuracy"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:v}),a.jsx("div",{className:"text-sm text-orange-700",children:"Total Attempts"})]})]})}),a.jsx(sn,{columns:h,data:c,loading:t,emptyState:{icon:ke,title:"No Book/Chapter Data",description:"No book and chapter performance data available yet. Complete some quizzes to see detailed analysis!"},getRowClassName:x=>x.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":x.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(x=>x.accuracy_rate<50).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Struggling (","<50%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(x=>x.accuracy_rate>=50&&x.accuracy_rate<70).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Needs Work (","50-70%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.filter(x=>x.accuracy_rate>=70&&x.accuracy_rate<90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Good (","70-90%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(x=>x.accuracy_rate>=90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Excellent (",">90%",")"]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Focus study time on chapters with low accuracy rates"})})]})]})}function SW(){const{selectedMemberId:e,bookChapterData:t,bookChapterLoading:r,bookChapterError:n}=ui();return a.jsx(NW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}const kW=3,p1=[{id:"overview",name:"Overview",icon:sr},{id:"quiz-history",name:"Quiz History",icon:ke,requiresIndividualView:!0},{id:"study-schedule",name:"Study Schedule",icon:Yt,requiresIndividualView:!0},{id:"knowledge-gaps",name:"Knowledge Gaps",icon:Mp},{id:"question-performance",name:"Question Performance",icon:at},{id:"activity",name:"Daily Activity",icon:no},{id:"book-chapter-performance",name:"Book/Chapter",icon:ke},{id:"team-trends",name:"Team Trends",icon:wr,requiresTeamView:!0}];function PW(){var U;const{user:e,refreshUser:t,developerLog:r}=xe(),n=St(),s=b.useRef(!1),[i,o]=b.useState(void 0),[l,c]=b.useState("weekly"),[u,d]=b.useState("overview"),[f,m]=b.useState(()=>{const W=new Date;return W.setMonth(W.getMonth()-kW),W}),[h,p]=b.useState(new Date),{teamMembers:y,loading:g,error:v}=RS(),{data:x,loading:w,error:_}=hI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:j,loading:N,error:S}=mI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:E,loading:O,error:T}=pI({teamId:e==null?void 0:e.teamId,userId:i,timeframe:l,startDate:f,endDate:h}),{data:$,loading:P,error:z}=gI({userId:i,startDate:f,endDate:h}),{data:I,loading:q,error:Q}=xI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:D,loading:k,error:C}=yI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:A,loading:R,error:F}=vI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:Z,loading:re,error:ne}=_I({teamId:i===void 0?e==null?void 0:e.teamId:void 0,timeframe:l,startDate:f,endDate:h}),{data:J,loading:he,error:rt}=NI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),B=b.useCallback(W=>{const H=new Date(W.target.value);H<=h&&m(H)},[h]),ee=b.useCallback(W=>{const H=new Date(W.target.value);H>=f&&p(H)},[f]),le=b.useCallback(W=>W.toISOString().split("T")[0],[]),G=b.useCallback(async()=>{try{await t()}catch(W){console.error("Failed to refresh data:",W)}},[t]),et=b.useCallback(W=>{const H=i===void 0,Y=p1.find(de=>de.id===W);Y&&(Y.requiresIndividualView&&H||Y.requiresTeamView&&!H||d(W))},[i]),ge=b.useMemo(()=>i?y.find(W=>W.userId===i):void 0,[i,y]),Ee=b.useMemo(()=>{const W=i===void 0;return p1.filter(H=>!(H.requiresIndividualView&&W||H.requiresTeamView&&!W))},[i]),ze=b.useMemo(()=>Math.ceil((h.getTime()-f.getTime())/(1e3*60*60*24)),[f,h]),ot=b.useMemo(()=>({user:e,selectedMemberId:i,setSelectedMemberId:o,teamMembers:y,canSelectIndividuals:(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",startDate:f,setStartDate:m,endDate:h,setEndDate:p,progressionTimeframe:l,setProgressionTimeframe:c,analyticsData:x,analyticsLoading:w,analyticsError:_,knowledgeGapsData:j,knowledgeGapsLoading:N,knowledgeGapsError:S,progressionData:E,progressionLoading:O,progressionError:T,quizHistoryData:$,quizHistoryLoading:P,quizHistoryError:z,studyScheduleData:I,studyScheduleLoading:q,studyScheduleError:Q,questionPerformanceData:D,questionPerformanceLoading:k,questionPerformanceError:C,engagementData:A,engagementLoading:R,engagementError:F,teamTrendsData:Z,teamTrendsLoading:re,teamTrendsError:ne,bookChapterData:J,bookChapterLoading:he,bookChapterError:rt,selectedMemberInfo:ge}),[e,i,y,f,h,l,x,w,_,j,N,S,E,O,T,$,P,z,I,q,Q,D,k,C,A,R,F,Z,re,ne,J,he,rt,ge]);b.useEffect(()=>{e&&y.length>0&&!s.current&&(e.teamRole==="member"?o(e.id):o(void 0),s.current=!0)},[e,y]),b.useEffect(()=>{Ee.find(H=>H.id===u)||d("overview")},[Ee,u]);const Ye=((U=e==null?void 0:e.planSettings)==null?void 0:U.allow_analytics_access)??!1,se=w||N||O||P||q||k||R||re||he,M=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",L=b.useCallback(()=>{try{switch(u){case"overview":return a.jsx(m1,{});case"quiz-history":return a.jsx(fW,{});case"study-schedule":return a.jsx(mW,{});case"knowledge-gaps":return a.jsx(gW,{});case"question-performance":return a.jsx(vW,{});case"activity":return a.jsx(wW,{});case"team-trends":return a.jsx(_W,{});case"book-chapter-performance":return a.jsx(SW,{});default:return a.jsx(m1,{})}}catch(W){return console.error("Error rendering tab content:",W),a.jsx("div",{className:"text-center py-8",children:a.jsx(Fe,{type:"error",message:"Failed to load tab content. Please try refreshing the page."})})}},[u]);return g?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading analytics data..."})}):v?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"error",message:v||"Failed to load data."})})}):Ye?a.jsx(pe,{children:a.jsx(SI,{value:ot,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Track performance and progress insights."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:G,disabled:se,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:se?"Loading...":"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xS,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter analytics data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:le(f),onChange:B,max:le(h),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:le(h),onChange:ee,min:le(f),max:le(new Date),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[ze," days"]})]})]})}),a.jsx(Up,{teamMembers:y,selectedMemberId:i,onSelectMember:o,selectedMemberInfo:ge,disabled:!M,includeAllTeamOption:!0}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6 overflow-x-auto",role:"tablist",children:Ee.map(W=>{const H=W.icon,Y=u===W.id;return a.jsxs("button",{onClick:()=>et(W.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${Y?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,role:"tab","aria-selected":Y,"aria-controls":`${W.id}-panel`,children:[a.jsx(H,{className:"h-4 w-4"}),a.jsx("span",{children:W.name})]},W.id)})})}),a.jsx("div",{className:"p-6",role:"tabpanel",id:`${u}-panel`,"aria-labelledby":`${u}-tab`,children:L()})]})]})})}):a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(sr,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Analytics"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your current plan does not include access to Analytics. Upgrade your subscription to unlock this feature and gain valuable insights."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade Your Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Access detailed performance metrics, user engagement data, and more by upgrading to a higher tier."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>n("/billing"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>n("/dashboard"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Dashboard"})]})]})})})}function EW(){const[e,t]=b.useState(!1),[r,n]=b.useState(null);return{createCheckoutSession:async i=>{t(!0),n(null);try{const{priceId:o,mode:l,successUrl:c,cancelUrl:u}=i,d=`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,f=`${window.location.origin}/billing`,{data:m,error:h}=await V.functions.invoke("stripe-checkout",{body:{price_id:o,mode:l,success_url:c||`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:u||f}});return h?(console.error("Checkout error:",h),n(h.message||"Failed to create checkout session"),{error:h.message||"Failed to create checkout session"}):m!=null&&m.url?(console.log(" Checkout session created, redirecting to:",m.url),window.location.href=m.url,{sessionId:m.sessionId,url:m.url}):(n("No checkout URL received"),{error:"No checkout URL received"})}catch(o){console.error("Checkout error:",o);const l=o.message||"An unexpected error occurred";return n(l),{error:l}}finally{t(!1)}},loading:e,error:r}}function CW(){const{user:e,developerLog:t}=xe(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{var f,m;if(!e){l(!1);return}l(!0),u(null);try{t(" Fetching billing data for user:",e.id);const{data:h,error:p}=await V.functions.invoke("fetch-payment-methods",{headers:{Authorization:`Bearer ${(f=(await V.auth.getSession()).data.session)==null?void 0:f.access_token}`}});p?(console.error(" Error fetching payment methods:",p),console.warn(" Payment methods not available, continuing without them"),n([])):(t(" Payment methods fetched:",(h==null?void 0:h.length)||0),n(h||[]));const{data:y,error:g}=await V.functions.invoke("fetch-invoices",{headers:{Authorization:`Bearer ${(m=(await V.auth.getSession()).data.session)==null?void 0:m.access_token}`}});g?(console.error(" Error fetching invoices:",g),console.warn(" Invoices not available, continuing without them"),i([])):(t(" Invoices fetched:",(y==null?void 0:y.length)||0),i(y||[]))}catch(h){console.error(" Failed to fetch billing data:",h),u("Billing data temporarily unavailable"),n([]),i([])}finally{l(!1)}},[e,t]);return b.useEffect(()=>{d()},[d]),{paymentMethods:r,invoices:s,loading:o,error:c,refreshBillingData:d}}function AW(){var Q;const{user:e}=xe(),{createCheckoutSession:t,loading:r}=EW(),{subscription:n,orders:s,loading:i,error:o,cancelCurrentSubscription:l}=G0(),{invoices:c,paymentMethods:u,loading:d,error:f}=CW(),[m,h]=b.useState(null),[p,y]=b.useState(!1),[g,v]=b.useState(!1),[x,w]=b.useState(null),[_,j]=b.useState("month"),N=n!=null&&n.subscription_id?n:null,S=N==null?void 0:N.price_id,E=Lp.find(D=>D.priceId===S);console.log(" Billing Debug - Current subscription data:",{hasCurrentSubscription:!!N,subscriptionStatus:N==null?void 0:N.subscription_status,cancelAtPeriodEnd:N==null?void 0:N.cancel_at_period_end,subscriptionId:N==null?void 0:N.subscription_id,priceId:S,foundProduct:!!E}),console.log(" Billing Debug - Billing data:",{invoicesCount:c.length,ordersCount:s.length,billingLoading:d,billingError:f,invoices:c.slice(0,2),paymentMethods:u.slice(0,1)});const O=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end);console.log(" Billing Debug - Cancel button condition:",{statusIsActive:(N==null?void 0:N.status)==="active",notCancelAtPeriodEnd:!(N!=null&&N.cancel_at_period_end),shouldShowCancelButton:O});const T=Lp.filter(D=>D.interval===_),$=!N||((Q=e==null?void 0:e.subscription)==null?void 0:Q.plan)==="free",P=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end),z=async D=>{h(D);try{await t({priceId:D,mode:"subscription"})}catch(k){console.error("Checkout error:",k)}finally{h(null)}},I=async()=>{v(!0),w(null);try{const D=await l();D.success?y(!1):w(D.error||"Failed to cancel subscription")}catch(D){w(D.message||"An unexpected error occurred")}finally{v(!1)}},q=[{key:"id",header:"Invoice",render:D=>a.jsxs("div",{className:"font-medium text-gray-900",children:["#",D.id.substring(0,8),"..."]})},{key:"created",header:"Date",render:D=>a.jsx("span",{className:"text-sm text-gray-900",children:xa(D.created)})},{key:"amount_due",header:"Amount",render:D=>a.jsx("span",{className:"font-medium text-gray-900",children:Ko(D.amount_due/100,D.currency)})},{key:"status",header:"Status",render:D=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.status==="paid"?"bg-green-100 text-green-800":D.status==="open"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})},{key:"actions",header:"",render:D=>a.jsx("div",{className:"flex justify-end",children:D.invoice_pdf&&a.jsx("a",{href:D.invoice_pdf,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Download Invoice",children:a.jsx(gb,{className:"h-4 w-4"})})}),className:"text-right"}];return i?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading billing information..."})}):o&&o.includes("does not exist")?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"warning",title:"Billing Setup Required",message:"Billing features are being set up. Please contact support if this persists.",className:"mb-6"})})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),a.jsx("p",{className:"text-gray-600",children:"Manage your subscription and view billing history."})]}),o&&a.jsx(Fe,{type:"error",message:o,className:"mb-6"}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Subscription"}),N&&E?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:E.name}),E.interval==="year"?a.jsx(ds,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Ki,{className:"h-5 w-5 text-blue-500"})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:E.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[Ko(E.price,E.currency),a.jsxs("span",{className:"text-lg font-normal text-gray-600",children:["/",E.interval]})]}),N.current_period_end&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:N.cancel_at_period_end?`Ends on: ${xa(N.current_period_end)}`:`Next billing: ${xa(N.current_period_end)}`})]})]}),N.payment_method_last4&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 mt-2",children:[a.jsx(sd,{className:"h-4 w-4"}),a.jsxs("span",{children:[N.payment_method_brand,"  ",N.payment_method_last4]})]})]}),a.jsxs("div",{className:"text-right",children:[N.subscription_status==="active"&&N.cancel_at_period_end?a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Me,{className:"h-4 w-4 text-orange-500"}),a.jsxs("span",{className:"text-sm font-medium text-orange-600",children:["Ending ",xa(N.current_period_end)]})]}):a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${N.subscription_status==="active"?"bg-green-500":"bg-yellow-500"}`}),a.jsx("span",{className:`text-sm font-medium capitalize ${N.subscription_status==="active"?"text-green-600":"text-yellow-600"}`,children:N.subscription_status})]}),N.subscription_status==="active"&&!N.cancel_at_period_end&&a.jsx("button",{onClick:()=>y(!0),className:"text-sm text-red-600 hover:text-red-700 transition-colors duration-200 mt-2",children:"Downgrade to Free"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Pn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Subscription"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You're currently on the free plan. Upgrade to unlock premium features."})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pricing"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Start for free. Upgrade as you go."}),a.jsxs("div",{className:"flex items-center justify-center space-x-1 bg-gray-100 rounded-lg p-1 w-fit mx-auto mb-4",children:[a.jsx("button",{onClick:()=>j("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="month"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),a.jsx("button",{onClick:()=>j("year"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="year"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Yearly"})]}),_==="year"&&a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Save 17% on a yearly subscription"})]}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-6 max-w-5xl mx-auto",children:[a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${$?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[$&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Free"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:"0"}),a.jsx("span",{className:"text-gray-600",children:"/month"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Perfect for getting started"})]}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic quiz features"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Limited question access"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic progress tracking"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Up to 5 team members"})]})]}),a.jsx("button",{onClick:()=>P?y(!0):void 0,disabled:$||!P,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${$?"bg-gray-100 text-gray-500 cursor-not-allowed":P?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:$?a.jsx("span",{children:"Current Plan"}):P?a.jsx("span",{children:"Downgrade to Free"}):a.jsx("span",{children:"Already Downgrading"})})]}),T.map(D=>{const k=S===D.priceId,C=m===D.priceId,A=_==="year";return a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${k?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[A&&!k&&_==="year"&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-indigo-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Best Value"})}),k&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_==="year"?"Pro Yearly":"Pro"}),D.interval==="year"?a.jsx(ds,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Ki,{className:"h-5 w-5 text-blue-500"}),A&&a.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-1 rounded-full",children:"POPULAR"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:Ko(D.price,D.currency)}),a.jsxs("span",{className:"text-gray-600",children:["/",_==="year"?"year":"month"]}),_==="year"&&a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[Ko(D.price/12,D.currency)," per month"]})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.description})]}),a.jsx("ul",{className:"space-y-2 mb-6",children:D.features.map(R=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:R})]},R))}),a.jsx("button",{onClick:()=>z(D.priceId),disabled:k||C||r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${k?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50"}`,children:C?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):k?a.jsx("span",{children:"Current Plan"}):a.jsxs("span",{children:["Upgrade to ",D.name]})})]},D.id)})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Billing History"}),f&&a.jsx(Fe,{type:"warning",message:`${f}. Stripe billing functions may not be deployed yet.`,className:"mb-4"}),!1,c.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Invoices"}),a.jsx(sn,{columns:q,data:c,loading:d,emptyState:{title:"No Invoices",description:"No invoices found for your account."}})]}):s.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Orders"}),a.jsx("div",{className:"space-y-3",children:s.map(D=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["Order #",D.order_id]}),a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${D.payment_status==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.payment_status})]}),a.jsx("div",{className:"text-sm text-gray-600",children:new Date(D.order_date).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"font-medium text-gray-900",children:Ko(D.amount_total/100,D.currency)}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-700",children:a.jsx(gb,{className:"h-4 w-4"})})]})]},D.order_id))})]}):d?a.jsx(Lt,{text:"Loading billing history...",className:"py-8"}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(sd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Billing History"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your invoices and billing history will appear here once you make a purchase."}),N&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," You have an active subscription, but billing history may take a few minutes to appear. If you don't see invoices after 10 minutes, please contact support."]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-8",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-800",children:"Billing Information"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"All subscriptions are managed through Stripe. You can cancel or modify your subscription at any time. Changes will take effect at the end of your current billing period."})]})]})}),a.jsxs(kn,{isOpen:p,onClose:()=>{y(!1),w(null)},title:"Downgrade to Free Plan",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{y(!1),w(null)},disabled:g,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Keep Subscription"}),a.jsx("button",{onClick:I,disabled:g,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Downgrade to Free"})]})})]}),children:[x&&a.jsx(Fe,{type:"error",message:x,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Are you sure you want to downgrade to the free plan?"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Your subscription will remain active until the end of your current billing period (",N!=null&&N.current_period_end?xa(N.current_period_end):"end of period","), after which you'll be moved to the free plan."]})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"You will lose access to:"}),a.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:E==null?void 0:E.features.map(D=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Ln,{className:"h-3 w-3 text-red-600"}),a.jsx("span",{children:D})]},D))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" Your subscription will continue until ",N!=null&&N.current_period_end?xa(N.current_period_end):"the end of your billing period"]}),a.jsx("li",{children:" You'll keep all premium features until then"}),a.jsx("li",{children:" After that, you'll be automatically moved to the free plan"}),a.jsx("li",{children:" You can resubscribe at any time to regain premium features"})]})]})]})]})]})})}class g1 extends oe.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("BillingSuccess Error:",t,r)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Dt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Completed!"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Your payment was processed successfully. Please check your dashboard for updated subscription details."}),a.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"w-full bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]})})}):this.props.children}}function TW({sessionId:e,onDashboardClick:t,onBillingClick:r,processingState:n}){return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:`h-16 w-16 rounded-full flex items-center justify-center mx-auto mb-6 ${n==="error"?"bg-yellow-100":"bg-green-100"}`,children:n==="error"?a.jsx(tn,{className:"h-8 w-8 text-yellow-600"}):a.jsx(Dt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:n==="error"?"Payment Received!":"Payment Successful!"}),a.jsxs("p",{className:"text-gray-600 mb-8",children:[n==="processing"&&"Your payment is being processed. Subscription details will be available shortly.",n==="complete"&&"Thank you for your purchase! Your subscription has been activated and you now have access to all the premium features.",n==="error"&&"Your payment was successful, but subscription details are still being processed. If you don't see your subscription in a few minutes, please contact support."]}),e&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Session ID:"})," ",e.substring(0,20),"..."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center space-x-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(oM,{className:"h-4 w-4"}),a.jsx("span",{children:"Go to Dashboard"})]}),a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("span",{children:"View Billing"}),a.jsx(gS,{className:"h-4 w-4"})]})]})]})})})}function OW(){return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing your payment..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your subscription."})]})})}function DW(){const[e]=UN(),t=St(),{refreshUser:r,user:n}=xe(),{forceRefresh:s}=G0(),[i,o]=b.useState(!0),[l,c]=b.useState("processing"),u=e.get("session_id");b.useEffect(()=>{let m=0;const h=3;let p=!1;const y=async()=>{if(!p){m++;try{console.log(` Attempt ${m}/${h}: Refreshing user data after payment`);const[v]=await Promise.all([r(),s()]);if(v){p=!0,c("complete"),o(!1),console.log(" User and subscription data refreshed successfully after payment");return}else console.warn(" User refresh returned null, but continuing...")}catch(v){console.error(` Attempt ${m} failed:`,v)}if(m>=h)console.error(" Max attempts reached, subscription may still be processing"),p=!0,c("error"),o(!1);else{const v=Math.pow(2,m)*1e3;console.log(` Retrying in ${v}ms...`),setTimeout(y,v)}}},g=setTimeout(y,2e3);return()=>{clearTimeout(g),p=!0}},[]),b.useEffect(()=>{u&&console.log(" Payment completed successfully, session ID:",u)},[u]);const d=()=>{console.log(" Navigating to dashboard"),t("/dashboard")},f=()=>{console.log(" Navigating to billing"),t("/billing")};return i?a.jsx(g1,{children:a.jsx(OW,{})}):a.jsx(g1,{children:a.jsx(TW,{sessionId:u,onDashboardClick:d,onBillingClick:f,processingState:l})})}function MW(){xe();const{user:e}=xe(),{teamMembers:t,teamInvitations:r,teamStats:n,loading:s,error:i,setError:o,inviteMember:l,suspendMember:c,reinstateMember:u,resendInvitation:d,cancelInvitation:f,generateInvitationLink:m,getRoleIcon:h}=RS(),[p,y]=b.useState(""),[g,v]=b.useState(!1),[x,w]=b.useState(!1),[_,j]=b.useState(""),[N,S]=b.useState("member"),[E,O]=b.useState(""),[T,$]=b.useState(null),[P,z]=b.useState("members"),[I,q]=b.useState(null),[Q,D]=b.useState(null),k=oe.useMemo(()=>t.filter(B=>{const ee=B.user.name.toLowerCase().includes(p.toLowerCase()),le=B.user.email!=="Email restricted"&&B.user.email.toLowerCase().includes(p.toLowerCase());return ee||le}),[t,p]),C=oe.useMemo(()=>oI(e),[e]),A=oe.useMemo(()=>lI(e),[e]),R=oe.useCallback(async()=>{const B=await l(_,N);B.success&&B.invitationLink?(O(B.invitationLink),w(!0),j(""),S("member"),v(!1),o(null)):o(B.error||"Failed to send invitation")},[l,_,N,O,w,j,S,v,o]),F=oe.useCallback(async(B,ee)=>{if(!confirm(`Are you sure you want to suspend ${ee}? They will be logged out and unable to access the team.`))return;q(B);const le=await c(B);le.success||o(le.error||"Failed to suspend member"),q(null)},[c,o]),Z=oe.useCallback(async(B,ee)=>{if(!confirm(`Are you sure you want to reinstate ${ee}? They will regain access to the team.`))return;D(B);const le=await u(B);le.success||o(le.error||"Failed to reinstate member"),D(null)},[u,o]),re=oe.useCallback(async(B,ee)=>{try{await navigator.clipboard.writeText(B),$(ee),setTimeout(()=>$(null),2e3)}catch(le){console.error("Failed to copy link:",le);const G=document.createElement("textarea");G.value=B,document.body.appendChild(G),G.select(),document.execCommand("copy"),document.body.removeChild(G),$(ee),setTimeout(()=>$(null),2e3)}},[]),ne=oe.useCallback(async()=>{try{await navigator.clipboard.writeText(E),$("modal"),setTimeout(()=>$(null),2e3)}catch(B){console.error("Failed to copy link:",B);const ee=document.createElement("textarea");ee.value=E,document.body.appendChild(ee),ee.select(),document.execCommand("copy"),document.body.removeChild(ee),$("modal"),setTimeout(()=>$(null),2e3)}},[E]),J=oe.useCallback(async B=>{const ee=await d(B);ee.success||o(ee.error||"Failed to resend invitation")},[d,o]),he=oe.useCallback(async B=>{const ee=await f(B);ee.success||o(ee.error||"Failed to cancel invitation")},[f,o]),rt=(e==null?void 0:e.maxTeamMembers)||5;return e!=null&&e.teamId?a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your team members and invitations."})]}),C&&a.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(_M,{className:"h-4 w-4"}),a.jsx("span",{children:"Invite Member"})]})]}),i&&a.jsx(Fe,{type:"error",message:i,className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(Ke,{title:"Total Members",value:n.totalMembers,icon:He,iconColor:"text-indigo-600",subtitle:`of ${rt} max`}),a.jsx(Ke,{title:"Admins",value:n.admins,icon:_n,iconColor:"text-blue-600"}),a.jsx(Ke,{title:"Pending Invites",value:n.pendingInvites,icon:Me,iconColor:"text-yellow-600"}),a.jsx(Ke,{title:"Active Members",value:n.activeMembers,icon:Mt,iconColor:"text-green-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex space-x-8 px-6",children:[a.jsxs("button",{onClick:()=>z("members"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${P==="members"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Team Members (",t.length,")"]}),A&&a.jsxs("button",{onClick:()=>z("invitations"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${P==="invitations"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Invitations (",r.length,")"]})]})}),a.jsxs("div",{className:"p-6",children:[P==="members"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:p,onChange:B=>y(B.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})}),C?a.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(ds,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("p",{className:"font-medium",children:"Enhanced Access"}),a.jsxs("p",{children:["As a team ",e==null?void 0:e.teamRole,", you can view and manage all team member details including names and email addresses."]})]})]})}):a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(_n,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Limited View"}),a.jsx("p",{children:"As a team member, you can only see your own contact details. Team owners and admins can view all member information."})]})]})}),s?a.jsx(Lt,{text:"Loading team members...",className:"py-12"}):k.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Members"}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Your team doesn't have any members yet.":"No members match your search criteria."}),C&&t.length===0&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Invite Your First Member"})]}):a.jsx("div",{className:"space-y-4",children:k.map(B=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:B.user.name.split(" ").map(ee=>ee[0]).join("")})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:B.user.name}),B.role==="owner"&&a.jsx(ds,{className:"h-4 w-4 text-yellow-500",title:"Team Owner"})]}),a.jsx("p",{className:`text-sm truncate ${B.user.email==="Email restricted"?"text-gray-400 italic":"text-gray-600"}`,children:B.user.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(B.joinedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end",children:[a.jsx(xr,{type:"teamRole",value:B.role,showIcon:!0}),a.jsx(xr,{type:"status",value:B.status}),C&&B.role!=="owner"&&B.userId!==(e==null?void 0:e.id)&&B.status==="active"&&a.jsxs("button",{onClick:()=>F(B.id,B.user.name),disabled:I===B.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Suspend member",children:[I===B.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-red-600"}):a.jsx(_S,{className:"h-3 w-3"}),a.jsx("span",{children:"Suspend"})]}),C&&B.role!=="owner"&&B.userId!==(e==null?void 0:e.id)&&B.status==="suspended"&&a.jsxs("button",{onClick:()=>Z(B.id,B.user.name),disabled:Q===B.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Reinstate member",children:[Q===B.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-green-600"}):a.jsx(jS,{className:"h-3 w-3"}),a.jsx("span",{children:"Reinstate"})]}),C&&B.role!=="owner"&&B.userId!==(e==null?void 0:e.id)&&a.jsx("div",{className:"relative",children:a.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(gM,{className:"h-5 w-5"})})})]})]},B.id))})]}),P==="invitations"&&A&&a.jsx("div",{className:"space-y-4",children:s?a.jsx(Lt,{text:"Loading invitations...",className:"py-12"}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"There are no pending invitations for your team."}),C&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Send an Invitation"})]}):r.map(B=>{const ee=m(B.token),le=T===B.id;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(Yl,{className:"h-6 w-6 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:B.email}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Invited ",new Date(B.createdAt).toLocaleDateString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expires ",new Date(B.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xr,{type:"teamRole",value:B.role,showIcon:!0}),a.jsx(xr,{type:"status",value:"pending"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[a.jsx(cM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invitation Link"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:ee,readOnly:!0,className:"flex-1 px-3 py-2 text-sm font-mono bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),a.jsx("button",{onClick:()=>re(ee,B.id),className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${le?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:le?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(pb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with the invited team member. The link will expire in 7 days."})]}),C&&a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsxs("button",{onClick:()=>J(B.id),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-indigo-50",disabled:s,children:[a.jsx(yM,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Extend"})]}),a.jsxs("button",{onClick:()=>he(B.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-red-50",disabled:s,children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]},B.id)})})]})]}),a.jsxs(kn,{isOpen:g,onClose:()=>{v(!1),o(null),j(""),S("member")},title:"Invite Team Member",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{v(!1),o(null),j(""),S("member")},className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",disabled:s,children:"Cancel"}),a.jsxs("button",{onClick:R,disabled:!_.trim()||s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[s&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Send Invitation"})]})]}),children:[i&&a.jsx(Fe,{type:"error",message:i,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:_,onChange:B=>j(B.target.value),placeholder:"colleague@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:N,onChange:B=>S(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N==="admin"?"Can manage team members and settings":"Can access team resources and collaborate"})]})]})]}),a.jsxs(kn,{isOpen:x,onClose:()=>{w(!1),O(""),$(null)},title:"Invitation Sent Successfully",maxWidth:"lg",footer:a.jsx("button",{onClick:()=>{w(!1),O(""),$(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-3",children:[a.jsx(Mt,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Invitation created successfully!"})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"You can share this invitation link with the team member. The link will expire in 7 days."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invitation Link"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:E,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),a.jsx("button",{onClick:ne,className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${T==="modal"?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:T==="modal"?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(pb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(aM,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Share this link"}),a.jsx("p",{children:"Send this link to the invited team member via email, chat, or any other communication method."})]})]})})]})]})]})}):a.jsx(pe,{children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You are not currently a member of any team."})]})})})}function IW(){const{user:e}=xe(),t=St(),[r,n]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(null);b.useEffect(()=>{e&&d()},[e]);const d=async()=>{if(e)try{i(!0),l(null);const{data:h,error:p}=await V.from("team_invitations").select(`
          id,
          team_id,
          email,
          role,
          invited_by,
          status,
          expires_at,
          created_at,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("email",e.email).eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(p){console.error("Error loading invitations:",p),l("Failed to load invitations");return}const y=[...new Set((h||[]).map(_=>_.invited_by))],{data:g,error:v}=await V.from("user_profiles").select("id, name").in("id",y);v&&console.error("Error loading inviter profiles:",v);const x=new Map((g||[]).map(_=>[_.id,_])),w=(h||[]).map(_=>{var j;return{id:_.id,teamId:_.team_id,email:_.email,role:_.role,invitedBy:_.invited_by,status:_.status,expiresAt:_.expires_at,createdAt:_.created_at,team:{id:_.teams.id,name:_.teams.name,description:_.teams.description},inviter:{name:((j=x.get(_.invited_by))==null?void 0:j.name)||"Unknown User"}}});n(w)}catch(h){console.error("Error loading invitations:",h),l("An unexpected error occurred")}finally{i(!1)}},f=async(h,p)=>{if(e)try{if(u(h),l(null),!r.find(g=>g.id===h)){l("Invitation not found");return}if(p==="accept"){const{data:g,error:v}=await V.rpc("accept_team_invitation",{p_invitation_id:h});if(v){console.error("Error accepting invitation:",v),l("Failed to accept invitation. Please try again.");return}if(!g.success){l(g.error||"Failed to accept invitation");return}alert("Successfully joined the team!"),window.location.reload()}else{const{error:g}=await V.from("team_invitations").update({status:"declined"}).eq("id",h);if(g){console.error("Error declining invitation:",g),l("Failed to decline invitation. Please try again.");return}n(v=>v.filter(x=>x.id!==h))}}catch(y){console.error("Error processing invitation:",y),l("An unexpected error occurred")}finally{u(null)}},m=h=>{const p=new Date,g=new Date(h).getTime()-p.getTime(),v=Math.ceil(g/(1e3*60*60*24));return v<=0?"Expired":v===1?"1 day remaining":`${v} days remaining`};return s?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitations..."})]})})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Invitations"}),a.jsx("p",{className:"text-gray-600",children:"Manage your pending team invitations."})]}),o&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:"text-red-700",children:o})]})}),r.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any pending team invitations at the moment."}),a.jsx("button",{onClick:()=>t("/dashboard"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]}):a.jsx("div",{className:"space-y-6",children:r.map(h=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.team.name}),a.jsx(xr,{type:"plan",value:h.team.plan})]}),a.jsxs("p",{className:"text-gray-600 mb-3",children:[a.jsx("strong",{children:h.inviter.name})," invited you to join their team as ",a.jsx(xr,{type:"teamRole",value:h.role}),"."]}),h.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:h.team.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[oe.createElement(fI(h.role),{className:"h-4 w-4 text-gray-500"}),a.jsx(xr,{type:"teamRole",value:h.role})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsxs("span",{children:["Invited ",new Date(h.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4"}),a.jsx("span",{className:m(h.expiresAt).includes("Expired")?"text-red-600":"",children:m(h.expiresAt)})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>f(h.id,"decline"),disabled:c===h.id,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Decline"})]}),a.jsx("button",{onClick:()=>f(h.id,"accept"),disabled:c===h.id,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:c===h.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{children:"Accept"})]})})]})]})},h.id))})]})})}function $W(){const[e]=UN(),t=St(),{user:r,login:n,signup:s,signupForInvitation:i,refreshUser:o,loading:l,developerLog:c}=xe(),[u,d]=b.useState(null),[f,m]=b.useState(!0),[h,p]=b.useState(null),[y,g]=b.useState("signup"),[v,x]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(!1),[S,E]=b.useState(!1),[O,T]=b.useState(!1),$=e.get("token"),P=Gi(),z=Gi(),I=P.watch("password");b.useEffect(()=>{if(c(" InvitationAccept: Component mounted with token:",$),!$){c(" InvitationAccept: No token provided in URL"),p("Invalid invitation link"),m(!1);return}q()},[$]),b.useEffect(()=>{c(" InvitationAccept: State change detected"),c(" User state:",r?{id:r.id,email:r.email,name:r.name}:"null"),c(" Invitation state:",u?{id:u.id,email:u.email,teamName:u.team.name}:"null"),c(" Processing state:",j),c(" Auth loading state:",l),r&&u&&!j&&!l&&!S?(c(" InvitationAccept: Conditions met for auto-acceptance - calling handleAcceptInvitation"),E(!0),Q()):c(" InvitationAccept: Auto-acceptance conditions not met:",{hasUser:!!r,hasInvitation:!!u,isProcessing:j,isAuthLoading:l,acceptanceAttempted:S})},[r,u,j,l,S]);const q=async()=>{if($)try{c(" InvitationAccept: Loading invitation with token:",$),m(!0),p(null);const{data:C,error:A}=await V.from("team_invitations").select(`
          id,
          email,
          role,
          status,
          expires_at,
          invited_by,
          team_id,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("token",$).eq("status","pending").gt("expires_at",new Date().toISOString()).maybeSingle();if(A){c(" InvitationAccept: Error loading invitation:",A),p("Failed to load invitation details");return}if(!C){c(" InvitationAccept: No invitation found for token:",$),p("Invitation not found or has expired");return}c(" InvitationAccept: Invitation data loaded:",C),c(" InvitationAccept: Raw team data from join:",C.teams),c(" InvitationAccept: Raw team_id:",C.team_id);let R=C.teams;if(!R&&C.team_id){c(" InvitationAccept: Loading team data separately for:",C.team_id);const{data:re,error:ne}=await V.from("teams").select("id, name, description").eq("id",C.team_id).single();!ne&&re?(R=re,c(" InvitationAccept: Team data loaded separately:",R)):c(" InvitationAccept: Failed to load team data:",ne)}if(!R){c(" InvitationAccept: Team data missing from invitation"),p("The team associated with this invitation no longer exists");return}let F="Unknown User";if(C.invited_by){c(" InvitationAccept: Loading inviter profile for:",C.invited_by);const{data:re,error:ne}=await V.rpc("get_user_name_by_id",{p_user_id:C.invited_by});!ne&&re?(F=re,c(" InvitationAccept: Inviter profile loaded:",F)):c(" InvitationAccept: Could not load inviter name:",ne)}const Z={id:C.id,email:C.email,role:C.role,status:C.status,expiresAt:C.expires_at,team:{id:R.id,name:R.name,description:R.description},inviter:{name:F}};c(" InvitationAccept: Complete invitation data prepared:",Z),d(Z),g("signup")}catch(C){c(" InvitationAccept: Unexpected error loading invitation:",C),p("An unexpected error occurred")}finally{m(!1)}},Q=async()=>{if(c(" InvitationAccept: handleAcceptInvitation called"),c(" Current user:",r?{id:r.id,email:r.email}:"null"),c(" Current invitation:",u?{id:u.id,email:u.email}:"null"),!u||!r){c(" InvitationAccept: Cannot accept invitation - missing data:",{hasInvitation:!!u,hasUser:!!r});return}try{if(c(" InvitationAccept: Starting invitation acceptance process"),N(!0),p(null),c(" InvitationAccept: Verifying email match"),c(" Invitation email:",u.email.toLowerCase()),c(" User email:",r.email.toLowerCase()),u.email.toLowerCase()!==r.email.toLowerCase()){c(" InvitationAccept: Email mismatch"),p("This invitation is for a different email address. Please log in with the correct account or contact the team administrator.");return}c(" InvitationAccept: Email verification passed"),c(" InvitationAccept: Skipping client-side team capacity check - will be handled by database function"),c(" InvitationAccept: Calling accept_team_invitation function with ID:",u.id);const{data:C,error:A}=await V.rpc("accept_team_invitation",{p_invitation_id:u.id});if(A){c(" InvitationAccept: Database function error:",A),p("Failed to accept invitation. Please try again.");return}if(c(" InvitationAccept: Database function response:",C),!C.success){c(" InvitationAccept: Database function returned failure:",C.error),C.error&&C.error.includes("maximum capacity")?(T(!0),p("This team has reached its maximum capacity. Please contact the team owner to increase the team size or remove inactive members.")):p(C.error||"Failed to accept invitation");return}c(" InvitationAccept: Invitation accepted successfully!"),c(" InvitationAccept: Refreshing user profile to get updated team info");try{await o(),c(" InvitationAccept: User profile refreshed after invitation acceptance")}catch(R){c(" Could not refresh user profile after invitation acceptance:",R)}g("processing"),c(" InvitationAccept: Setting redirect timer"),setTimeout(()=>{c(" InvitationAccept: Redirecting to dashboard"),t("/dashboard",{replace:!0})},2e3)}catch(C){c(" InvitationAccept: Unexpected error accepting invitation:",C),p("An unexpected error occurred")}finally{N(!1)}},D=async C=>{if(u){if(c(" InvitationAccept: Signup form submitted"),c(" Signup email:",u.email),c(" Signup name:",C.name),O){p("Cannot create account - the team has reached maximum capacity. Please contact the team owner.");return}try{p(null),c(" InvitationAccept: Calling signupForInvitation function"),await i(u.email,C.password,C.name),c(" InvitationAccept: Signup completed successfully")}catch(A){c(" InvitationAccept: Signup error:",A),A.message&&A.message.toLowerCase().includes("user already registered")?(c(" InvitationAccept: User already exists, switching to login mode"),p("An account with this email already exists. Please sign in instead."),g("login")):p(A.message||"Failed to create account")}}},k=async C=>{if(u){c(" InvitationAccept: Login form submitted"),c(" Login email:",u.email);try{p(null),c(" InvitationAccept: Calling login function"),await n(u.email,C.password),c(" InvitationAccept: Login completed successfully")}catch(A){c(" InvitationAccept: Login error:",A),A.message&&(A.message.toLowerCase().includes("invalid")||A.message.toLowerCase().includes("not found"))?(c(" InvitationAccept: Invalid credentials, switching to signup mode"),p("Invalid credentials. If you don't have an account, please create one."),g("signup")):p(A.message||"Invalid password")}}};return f?(c(" InvitationAccept: Rendering loading state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitation..."})]})})):h&&!u?(c(" InvitationAccept: Rendering error state (no invitation)"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(tn,{className:"h-7 w-7 text-red-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Invalid Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:h})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>t("/"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Home"})})]})})):y==="processing"?(c(" InvitationAccept: Rendering success/processing state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Dt,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome to the Team!"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["You have successfully joined ",a.jsx("strong",{children:u==null?void 0:u.team.name}),". Redirecting you to the dashboard..."]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})})]})})):u?(c(" InvitationAccept: Rendering main form in mode:",y),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Team Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"You've been invited to join a team"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-1",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.team.name})}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:u.inviter.name})," invited you to join as"," ",a.jsx(xr,{type:"teamRole",value:u.role,showIcon:!0})]})]})]}),u.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:u.team.description}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Invitation expires: ",new Date(u.expiresAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:[h&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{children:h}),O&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:()=>{p(null),T(!1),E(!1),r&&u&&Q()},className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm font-medium transition-colors",children:"Try Again"})})]})]})}),y==="signup"&&!O?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Your Account"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Complete your account setup to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:P.handleSubmit(D),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full name"}),a.jsx("input",{id:"name",type:"text",autoComplete:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...P.register("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),P.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:P.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...P.register("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),P.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:P.formState.errors.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:w?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...P.register("confirmPassword",{required:"Please confirm your password",validate:C=>C===I||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>_(!w),children:w?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),P.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:P.formState.errors.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Creating account..."})]}):"Create Account & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx("button",{onClick:()=>g("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Sign in instead"})]})})]}):O?a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800 mb-4",children:[a.jsx(He,{className:"h-6 w-6"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Team at Capacity"})]}),a.jsxs("p",{className:"text-yellow-700 mb-4",children:["The team ",a.jsx("strong",{children:u.team.name})," has reached its maximum member limit."]}),a.jsx("p",{className:"text-sm text-yellow-600",children:'Please contact the team owner to increase the team capacity or remove inactive members, then use the "Try Again" button above.'})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign In to Join"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Sign in to your account to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:z.handleSubmit(k),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...z.register("password",{required:"Password is required"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),z.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.formState.errors.password.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Signing in..."})]}):"Sign In & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>g("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Create one now"})]})})]})]})]})})):(c(" InvitationAccept: No invitation data available"),null)}function zW({userId:e,startDate:t,endDate:r}){const{developerLog:n}=xe(),[s,i]=b.useState(null),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){n(" useUserAnalytics: No userId provided, skipping data fetch"),l(!1),i(null);return}n(" useUserAnalytics: Starting user analytics fetch for user:",e,"with date range:",t,r),l(!0),u(null);try{n(" useUserAnalytics: Using secure function to fetch user analytics data");const{data:f,error:m}=await V.rpc("get_user_analytics_data",{p_user_id:e,p_start_date:t==null?void 0:t.toISOString(),p_end_date:r==null?void 0:r.toISOString()});if(m)throw console.error(" Error fetching user analytics data:",m),m;n(" useUserAnalytics: Raw RPC response:",f),n(" useUserAnalytics: RPC response type:",typeof f),n(" useUserAnalytics: RPC response keys:",f?Object.keys(f):"null");let h=null;Array.isArray(f)&&f.length>0?(h=f[0],n(" useUserAnalytics: Extracted data from array:",h)):f&&!Array.isArray(f)?(h=f,n(" useUserAnalytics: Using data directly (not array):",h)):n(" useUserAnalytics: No valid data found in RPC response");const p={totalQuizzesCompleted:Number((h==null?void 0:h.total_quizzes_completed)||0),totalQuestionsAnswered:Number((h==null?void 0:h.total_questions_answered)||0),averageScore:Number((h==null?void 0:h.average_score)||0),totalTimeSpentMinutes:Number((h==null?void 0:h.total_time_spent_minutes)||0),studyStreak:Number((h==null?void 0:h.study_streak)||0),totalPointsEarned:Number((h==null?void 0:h.total_points_earned)||0),totalPossiblePoints:Number((h==null?void 0:h.total_possible_points)||0)};n(" useUserAnalytics: Transformed analytics data:",p),n(" useUserAnalytics: Individual field transformations:",{totalQuizzesCompleted:`${h==null?void 0:h.total_quizzes_completed} -> ${p.totalQuizzesCompleted}`,averageScore:`${h==null?void 0:h.average_score} -> ${p.averageScore}`,totalTimeSpentMinutes:`${h==null?void 0:h.total_time_spent_minutes} -> ${p.totalTimeSpentMinutes}`,studyStreak:`${h==null?void 0:h.study_streak} -> ${p.studyStreak}`}),i(p)}catch(f){console.error(" useUserAnalytics: Error fetching user analytics data:",f),n(" useUserAnalytics: Error details:",{message:f.message,code:f.code,details:f.details,hint:f.hint}),u(f.message||"Failed to load user analytics data"),i(null)}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{const f=setTimeout(()=>{d()},100);return()=>clearTimeout(f)},[d]),{data:s,loading:o,error:c,refreshData:d}}function LW(){var z,I,q,Q,D,k,C;const{developerLog:e}=xe(),t=St(),{user:r}=xe(),{questions:n}=ia(),{getActiveSessionsForUser:s,deleteQuizSession:i}=aa(),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),[m,h]=b.useState(!1),[p,y]=b.useState(null),g=r?s(r.id):[],v=b.useMemo(()=>({startDate:new Date(Date.now()-30*24*60*60*1e3),endDate:new Date}),[]),{data:x,loading:w,error:_}=zW({userId:r==null?void 0:r.id,startDate:v.startDate,endDate:v.endDate});oe.useEffect(()=>{e(" Quiz Center: Analytics data received:",{userAnalytics:x,analyticsLoading:w,analyticsError:_,userId:r==null?void 0:r.id,dateRange:v})},[x,w,_,r==null?void 0:r.id,v,e]);const j=oe.useCallback((A,R)=>R===0?0:Math.round(A/R*100),[]),N=oe.useCallback((A,R)=>R===0?0:Math.round(A/R*100),[]),S=oe.useCallback(A=>{y(A),h(!0)},[]),E=async()=>{if(r)try{u(!0),f(null),e(" Loading recent quiz activities for user:",r.id);const{data:A,error:R}=await V.from("quiz_sessions").select("id, title, total_points, max_points, completed_at, estimated_minutes, type").eq("user_id",r.id).eq("status","completed").not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(10);if(R)throw console.error(" Error loading recent activities:",R),R;e(" Recent activities loaded:",(A==null?void 0:A.length)||0,"activities"),e(" Quiz Center: Recent activities data:",A),l(A||[])}catch(A){console.error(" Error loading recent activities:",A),f("Failed to load recent quiz activities")}finally{u(!1)}},O=oe.useCallback(async()=>{if(p)try{await i(p),await E(),h(!1),y(null)}catch(A){console.error("Error deleting quiz session:",A)}},[p,i,E]),T=oe.useCallback(A=>{t(`/quiz/runner/${A}`)},[t]);b.useEffect(()=>{r?E():u(!1)},[r]);const $=[{id:"quick-start",title:"Quick Start",description:"Jump into a random quiz with questions from your subscription tier. Perfect for quick practice sessions.",icon:Pn,color:"bg-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",hoverColor:"hover:bg-green-100",features:["Random questions from your tier","90 questions per session","Instant feedback","Mock PBE test experience"],action:"Start Quiz",onClick:()=>t("/quiz/quick-start"),disabled:!((z=r==null?void 0:r.planSettings)!=null&&z.allow_quick_start_quiz),tooltip:(I=r==null?void 0:r.planSettings)!=null&&I.allow_quick_start_quiz?"":"Not available on your current plan"},{id:"create-your-own",title:"Create Your Own",description:"Build custom quizzes by selecting specific books, chapters, and difficulty levels. Tailor your study experience.",icon:ko,color:"bg-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200",hoverColor:"hover:bg-blue-100",features:["Choose specific Bible books","Select chapter ranges","Set difficulty level","Customize question count"],action:"Create Quiz",onClick:()=>t("/quiz/create-own"),disabled:!((q=r==null?void 0:r.planSettings)!=null&&q.allow_create_own_quiz),tooltip:(Q=r==null?void 0:r.planSettings)!=null&&Q.allow_create_own_quiz?"":"Not available on your current plan"},{id:"study-schedule",title:"Study Schedule",description:"Follow a structured study plan with progressive difficulty and comprehensive coverage of the material.",icon:Yt,color:"bg-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200",hoverColor:"hover:bg-purple-100",features:["Structured learning path","Progressive difficulty","Track your progress","Daily study goals"],action:"View Schedule",onClick:()=>t("/schedule"),disabled:!((D=r==null?void 0:r.planSettings)!=null&&D.allow_study_schedule_quiz),tooltip:(k=r==null?void 0:r.planSettings)!=null&&k.allow_study_schedule_quiz?"":"Upgrade to Pro plan to access Study Schedule"}],P=b.useMemo(()=>{const A=n.length,R=(x==null?void 0:x.averageScore)||0,F=(x==null?void 0:x.studyStreak)||0,Z=(x==null?void 0:x.totalTimeSpentMinutes)||0;let re=0;if(o.length>0){const rt=o.reduce((ee,le)=>ee+le.total_points,0),B=o.reduce((ee,le)=>ee+le.max_points,0);re=B>0?Math.round(rt/B*100):0}const ne=xf(o),J=o.reduce((rt,B)=>rt+(B.estimated_minutes||0),0),he=_||!x;return e(" Quiz Center: Stats calculation debug:",{userAnalytics:x,analyticsError:_,useFallback:he,recentActivitiesCount:o.length,fallbackAverageScore:re,fallbackStudyStreak:ne,fallbackTimeMinutes:J,finalValues:{averageScore:he?re:R,studyStreak:he?ne:F,totalStudyTime:he?J:Z}}),[{label:"Questions Available",value:A>0?`${A}`:"0",icon:ke},{label:"Average Score",value:`${he?re:R}%`,icon:at},{label:"Study Streak",value:(he?ne:F)>0?`${he?ne:F} day${(he?ne:F)!==1?"s":""}`:"0 days",icon:Nt},{label:"Study Time",value:he?It(J)||"0m":It(Z)||"0m",icon:Me}]},[n.length,o,x,_,e]);return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Quiz Center"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Practice your Pathfinder Bible Experience knowledge with interactive quizzes."}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Stats show your performance over the last 30 days"})]}),a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:P.map(A=>a.jsx(Ke,{title:A.label,value:w&&A.label==="Study Time"&&!_?"Loading...":A.value,icon:A.icon,iconColor:"text-indigo-600"},A.label))}),g.length>0&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[a.jsx(Wi,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Resume Quiz Sessions"})]}),a.jsx("div",{className:"space-y-4",children:g.map(A=>{const R=N(A.current_question_index,A.questions.length),F=A.results.length,Z=A.questions.length;return g.find(re=>re.id===p),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:oe.createElement(vb(A.type),{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:A.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:kS(A.type)}),a.jsx("span",{children:""}),A.type==="study-assignment"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:ao(A.study_items||[])}),a.jsx("span",{children:""})]}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Question ",A.current_question_index+1," of ",Z]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[A.total_points," points earned"]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"w-full sm:w-48 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[R,"% complete (",F,"/",Z," answered)"]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end flex-shrink-0",children:[a.jsxs("div",{className:"text-right text-sm text-gray-600 flex-shrink-0",children:[a.jsx("div",{children:"Started"}),a.jsx("div",{children:Rp(A.created_at)})]}),a.jsx("button",{onClick:()=>S(A.id),className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(Hi,{className:"h-4 w-4"})}),a.jsxs("button",{onClick:()=>T(A.id),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(Wi,{className:"h-4 w-4"}),a.jsx("span",{children:"Resume"})]})]})]},A.id)})})]}),a.jsx(kn,{isOpen:m,onClose:()=>{h(!1),y(null)},title:"Delete Quiz Session",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{h(!1),y(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Delete Session"})]}),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(qn,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 mb-2",children:"Are you sure you want to delete this quiz session?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. All progress and results for this session will be permanently lost."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:$.map(A=>a.jsxs("div",{className:`relative bg-white rounded-xl shadow-sm border-2 ${A.borderColor} transition-all duration-200 group ${A.disabled?"opacity-60 cursor-not-allowed":`${A.hoverColor} hover:shadow-md cursor-pointer`}`,children:[A.disabled&&A.tooltip&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-xl z-10",children:a.jsx("span",{className:"text-white text-center p-4 font-semibold text-sm",children:A.tooltip})}),a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:`h-12 w-12 ${A.color} rounded-lg flex items-center justify-center`,children:a.jsx(A.icon,{className:"h-6 w-6 text-white"})}),a.jsx("div",{className:"ml-4",children:a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:A.title})})]}),a.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:A.description}),a.jsx("div",{className:"space-y-2 mb-6",children:A.features.map((R,F)=>a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full mr-3 flex-shrink-0"}),a.jsx("span",{children:R})]},F))}),a.jsxs("button",{onClick:A.onClick,disabled:A.disabled,className:`w-full flex items-center justify-center space-x-2 py-3 px-4 ${A.color} text-white rounded-lg transition-all duration-200 ${A.disabled?"opacity-50 cursor-not-allowed":"hover:opacity-90 group-hover:shadow-lg"}`,children:[a.jsx(io,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:A.action}),a.jsx(gS,{className:"h-4 w-4"})]})]})]},A.id))}),a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Quiz Activity"}),c&&a.jsx(Lt,{text:"Loading recent activities...",className:"py-8"}),d&&a.jsx(Fe,{type:"error",message:d,className:"mb-4"}),!c&&!d&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Nt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Recent Activity"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't completed any quizzes yet. Start your first quiz to see your activity here!"}),((C=r==null?void 0:r.planSettings)==null?void 0:C.allow_quick_start_quiz)&&a.jsx("button",{onClick:()=>t("/quiz/quick-start"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]}):o.map(A=>{const R=j(A.total_points,A.max_points),F=Rp(A.completed_at),Z=vb(A.type);return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(Z,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:A.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Completed with ",R,"% accuracy"]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[A.total_points,"/",A.max_points," points"]}),A.estimated_minutes>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["~",A.estimated_minutes," min"]})]})]})]})]}),a.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap flex-shrink-0",children:F})]},A.id)})})]})]})})}function RW({initialTime:e,onTimeExpired:t,onTimeUpdate:r}){const[n,s]=b.useState(e),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(!1);b.useEffect(()=>{let g;return i&&n>0?g=setInterval(()=>{const v=n-1;s(v),r(v)},1e3):n===0&&i&&(o(!1),d(!0),t()),()=>{g&&clearInterval(g)}},[i,n,t,r]);const f=b.useCallback(()=>{!l&&!u&&(o(!0),c(!0))},[l,u]),m=b.useCallback(g=>{s(g),o(!1),c(!1),d(!1)},[]),h=b.useCallback(()=>{o(!1)},[]),p=b.useCallback(g=>{o(g)},[]),y=b.useCallback(g=>{c(g)},[]);return{timeLeft:n,timerActive:i,timerStarted:l,hasTimeExpired:u,startTimer:f,resetTimer:m,stopTimer:h,setHasTimeExpired:d,setTimerActiveState:p,setTimerStartedState:y}}function qW(e){const[t,r]=b.useState(!0),n=b.useMemo(()=>e?t?{background:"bg-gradient-to-b from-[#1a255b] to-[#0e132f]",card:"bg-transparent",text:"text-white",textSecondary:"text-white/80",border:"border-white/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm",progressBar:"bg-white"}:{background:"bg-[#FAFAFA]",card:"bg-transparent",text:"text-[#1a255b]",textSecondary:"text-[#1a255b]/80",border:"border-[#1a255b]/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-[#1a255b]/20 hover:bg-[#1a255b]/30 text-[#1a255b] backdrop-blur-sm",progressBar:"bg-[#1a255b]"}:{background:"bg-gray-50",card:"bg-white",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-200",button:"bg-indigo-600 hover:bg-indigo-700",timerButton:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700",progressBar:"bg-green-600"},[e,t]);return{isDarkMode:t,themeClasses:n,toggleDarkMode:()=>{r(!t)}}}function FW({isFullScreen:e,isDarkMode:t,currentQuestionIndex:r,totalQuestions:n,progressPercentage:s,timeLeft:i,timerStarted:o,showAnswer:l,themeClasses:c,onBack:u,onToggleFullScreen:d,onToggleDarkMode:f,onStartTimer:m,formatTime:h}){return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:a.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"/PBE-logo_600px.png",alt:"Pathfinder Bible Experience",className:"h-24 sm:h-32 md:h-40 w-auto"})}),a.jsxs("div",{className:`text-center ${c.text} hidden sm:block`,children:[a.jsxs("div",{className:"text-sm sm:text-lg font-semibold",children:["Question ",r+1," of ",n]}),a.jsxs("div",{className:"text-xs sm:text-sm opacity-75",children:[s,"% correct so far"]}),a.jsx("div",{className:`w-32 sm:w-64 ${c.timerButton} rounded-full h-2 mt-2 mx-auto`,children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("button",{onClick:m,disabled:o||l,className:`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Me,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:`font-mono text-sm sm:text-lg ${i<=10?"text-red-300":""}`,children:h(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:`p-2 ${c.text} hover:bg-white/10 rounded-lg transition-all duration-200 backdrop-blur-sm`,title:"Exit full screen",children:a.jsx(mM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}),a.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-4 sm:left-6 z-30",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:f,className:`p-2 sm:p-3 rounded-full ${t?"bg-gray-700 text-yellow-400":"bg-gray-600 text-white"} backdrop-blur-sm transition-all duration-200 hover:scale-110`,title:t?"Switch to light mode":"Switch to dark mode",children:t?a.jsx(wM,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(pM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})})})]}):a.jsxs("div",{className:`${c.card} rounded-xl shadow-sm p-6 mb-6`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{children:a.jsxs("h1",{className:`text-lg font-semibold ${c.text}`,children:["Question ",r+1," of ",n]})})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:m,disabled:o||l,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Me,{className:"h-4 w-4"}),a.jsx("span",{className:`font-mono text-lg ${i<=10?"text-red-600":""}`,children:h(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",title:"Enter full screen",children:a.jsx(dM,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})}),a.jsx("div",{className:"text-center mt-4",children:a.jsxs("div",{className:`text-sm ${c.textSecondary}`,children:[s,"% correct so far"]})})]})}function UW({question:e,hasTimeExpired:t,isFullScreen:r,isDarkMode:n,themeClasses:s}){return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 sm:mb-4 ${r?n?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${r?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("h2",{className:`font-semibold ${s.text} leading-relaxed ${r?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.question})]}),t&&a.jsxs("div",{className:`mb-6 p-4 border-2 ${r?"border-red-300 bg-red-500/20":"border-red-200 bg-red-50"} rounded-lg`,children:[a.jsxs("div",{className:`flex items-center justify-center space-x-2 ${r?"text-red-300":"text-red-700"}`,children:[a.jsx(qn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold text-lg",children:"Time's Up!"})]}),a.jsx("p",{className:`${r?"text-red-200":"text-red-600"} text-sm mt-1`,children:'Click "Show Answer" to reveal the answer and mark your response'})]})]})}const BW=b.memo(UW);function QW({question:e,isFullScreen:t,isDarkMode:r,themeClasses:n}){return a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 ${t?r?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${t?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("div",{className:`text-sm ${n.textSecondary} mb-2`,children:"Answer:"}),a.jsx("div",{className:`font-semibold p-4 rounded-lg ${n.text} ${t?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.answer})]})})}const VW=b.memo(QW);function WW({isFullScreen:e,showAnswer:t,hasTimeExpired:r,themeClasses:n,onShowAnswer:s,onShowQuestion:i,onCorrect:o,onIncorrect:l}){return e?a.jsx("div",{className:"fixed bottom-4 sm:bottom-6 left-0 right-0 z-20 px-4 sm:px-6",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sm:hidden flex flex-col items-center space-y-3",children:[a.jsxs("button",{onClick:i,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Yr,{className:"h-5 w-5"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex space-x-3 w-full max-w-xs",children:[a.jsx("button",{onClick:o,className:"bg-[#58c16c] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Mt,{className:"h-5 w-5"})}),a.jsx("button",{onClick:l,className:"bg-[#F93F54] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Ln,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-8",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Mt,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Correct"})]}),a.jsxs("button",{onClick:i,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Yr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Ln,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Incorrect"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"sm:hidden flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Xr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})}),a.jsx("div",{className:"hidden sm:flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Xr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})]})}):a.jsx("div",{className:"flex justify-center mt-6",children:t?a.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[a.jsxs("button",{onClick:i,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2 mx-auto mb-6",children:[a.jsx(Yr,{className:"h-4 w-4"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Mt,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Correct"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Ln,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Incorrect"})]})]})]}):a.jsxs("button",{onClick:s,className:"bg-indigo-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx(Xr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})}function KW({title:e,stats:t,bonusXp:r,isFullScreen:n,themeClasses:s,onRestart:i,onBack:o,formatTime:l}){const c=t.totalPointsEarned+r;return a.jsx("div",{className:`min-h-screen ${s.background}`,children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:`${s.card} rounded-xl shadow-sm p-8 text-center border ${s.border}`,children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Nt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:`text-2xl font-bold ${s.text} mb-4`,children:"Quiz Completed!"}),a.jsxs("p",{className:`${s.textSecondary} mb-8`,children:["Great job! Here's how you performed on your ",e.toLowerCase(),"."]}),a.jsxs("div",{className:`mb-8 p-6 rounded-lg ${n?"bg-white/10":"bg-gradient-to-r from-blue-50 to-indigo-50"} border-2 border-indigo-200`,children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(Nt,{className:"h-6 w-6 text-indigo-600"}),a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-indigo-900"}`,children:"Experience Points Earned"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-white/80":"text-indigo-700"}`,children:"Quiz Points:"}),a.jsxs("span",{className:`font-bold text-lg ${n?"text-white":"text-indigo-900"}`,children:["+",t.totalPointsEarned," XP"]})]}),r>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-white/80":"text-green-700"}`,children:"On-Time Bonus:"}),a.jsxs("span",{className:`font-bold text-lg ${n?"text-white":"text-green-700"}`,children:["+",r," XP"]})]}),a.jsx("div",{className:`border-t pt-3 ${n?"border-white/20":"border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`font-semibold ${n?"text-white":"text-indigo-900"}`,children:"Total XP Earned:"}),a.jsxs("span",{className:`font-bold text-2xl ${n?"text-white":"text-indigo-900"}`,children:["+",c," XP"]})]})})]}),r>0&&a.jsx("div",{className:`mt-4 p-3 rounded-lg ${n?"bg-white/10":"bg-green-100"} border ${n?"border-white/20":"border-green-200"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:`text-sm font-medium ${n?"text-white":"text-green-800"}`,children:"Congratulations! You completed your study assignment on time!"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[t.accuracy,"%"]}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Accuracy"}),a.jsxs("div",{className:`text-xs ${s.textSecondary} mt-1`,children:[t.correctAnswers," of ",t.totalQuestions," correct"]})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.totalPointsEarned}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Points Earned"}),a.jsxs("div",{className:`text-xs ${s.textSecondary} mt-1`,children:["of ",t.totalPossiblePoints," possible"]})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:l(t.averageTime)}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Avg Time"}),a.jsx("div",{className:`text-xs ${s.textSecondary} mt-1`,children:"per question"})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[Math.round(t.totalPointsEarned/t.totalPossiblePoints*100),"%"]}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Score"}),a.jsx("div",{className:`text-xs ${s.textSecondary} mt-1`,children:"overall performance"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:i,className:"flex items-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:[a.jsx(Wi,{className:"h-4 w-4"}),a.jsx("span",{children:"Take Another Quiz"})]}),a.jsxs("button",{onClick:o,className:"flex items-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})]})]})})})})}function HW({isOpen:e,questionPoints:t,selectedPoints:r,onPointsChange:n,onConfirm:s,onCancel:i,themeClasses:o,isFullScreen:l}){return a.jsxs(kn,{isOpen:e,onClose:i,title:"Partial Credit",themeClasses:o,isFullScreen:l,footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:i,className:`flex-1 px-4 py-2 border ${o.border} ${l&&window.innerWidth<640?"text-gray-900":o.text} rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200`,children:"Cancel"}),a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Confirm"})]}),children:[a.jsxs("p",{className:`${o.textSecondary||"text-gray-600"} mb-6`,children:["This question is worth ",t," points. How many points did you earn?"]}),a.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:t},(c,u)=>a.jsx("button",{onClick:()=>n(u),className:`p-2 rounded-lg border-2 transition-colors duration-200 ${r===u?"border-indigo-500 bg-indigo-50 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-200":"border-gray-200 hover:border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray dark:hover:border-gray-500"}`,children:u},u))})]})}function yh({quizSessionId:e,backUrl:t,onSessionDeleted:r}){const n=St(),s=LN(),{user:i,developerLog:o}=xe(),{loadQuizSession:l,updateQuizSession:c,deleteQuizSession:u}=aa(),d=b.useRef(null),f=s.quizSessionId||e,m=t||"/quiz",[h,p]=b.useState(null),[y,g]=b.useState(!0),[v,x]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(0),[S,E]=b.useState(!1),[O,T]=b.useState(!1);b.useState(!1);const{isDarkMode:$,themeClasses:P,toggleDarkMode:z}=qW(O),{timeLeft:I,timerActive:q,timerStarted:Q,hasTimeExpired:D,startTimer:k,resetTimer:C,stopTimer:A,setHasTimeExpired:R,setTimerActiveState:F,setTimerStartedState:Z}=RW({initialTime:30,onTimeExpired:()=>{re({timer_active:!1,has_time_expired:!0})},onTimeUpdate:se=>{f&&c(f,{time_left:se})}});b.useEffect(()=>{if(!f){console.error("No quiz session ID provided"),n("/quiz");return}try{const se=l(f);if(!se){console.error("Quiz session not found"),setTimeout(()=>{n(m)},2e3);return}p(se),se.status==="completed"?x(!0):(_(se.show_answer),C(se.time_left),R(se.has_time_expired),F(se.timer_active),Z(se.timer_started),se.show_answer||(d.current=Date.now()))}catch(se){console.error("Error loading quiz session:",se),setTimeout(()=>{n(m)},2e3)}finally{g(!1)}},[f,l,n,m,C,R,F,Z]);const re=se=>{if(!h)return;const M={...h,...se};p(M),c(f,se)},ne=async(se,M,L,U,W)=>{if(!(!i||!h))try{o(" Logging question result to database:",{quiz_session_id:h.id,user_id:i.id,question_id:se,points_earned:M,total_points_possible:L,time_spent:U,is_correct:W});const{error:H}=await V.from("quiz_question_logs").insert([{quiz_session_id:h.id,user_id:i.id,question_id:se,points_earned:M,total_points_possible:L,time_spent:U,answered_at:new Date().toISOString(),is_correct:W}]);H?o(" Error logging question result:",H):o(" Question result logged successfully")}catch(H){o(" Unexpected error logging question result:",H)}},J=()=>{_(!0),A(),R(!1),re({show_answer:!0,timer_active:!1,has_time_expired:!1})},he=()=>{if(!h)return;const se=h.questions[h.current_question_index];_(!1);const M=(se==null?void 0:se.time_to_answer)||30;C(M),R(!1),re({show_answer:!1,time_left:M,timer_active:!1,timer_started:!1,has_time_expired:!1})},rt=async()=>{if(!h)return;const se=h.questions[h.current_question_index],M=d.current?Math.floor((Date.now()-d.current)/1e3):0,L=Number(se.points)||0,U={questionId:se.id,pointsEarned:L,totalPoints:L,timeSpent:M,answeredAt:new Date().toISOString()};o(" QuizRunner: Correct answer - creating result:",{questionId:se.id,questionPoints:se.points,actualPoints:L,pointsEarned:U.pointsEarned,totalPoints:U.totalPoints,timeSpent:U.timeSpent});const W=[...h.results,U];await ne(se.id,L,L,M,!0),o(" QuizRunner: Updated results array:",{previousResultsLength:h.results.length,newResultsLength:W.length,newResult:U,allResults:W}),re({results:W}),le()},B=async()=>{if(!h)return;const se=h.questions[h.current_question_index],M=d.current?Math.floor((Date.now()-d.current)/1e3):0,L=Number(se.points)||0;if(L>1)E(!0);else{const U={questionId:se.id,pointsEarned:0,totalPoints:L,timeSpent:M,answeredAt:new Date().toISOString()};o(" QuizRunner: Incorrect answer - creating result:",{questionId:se.id,questionPoints:se.points,actualPoints:L,pointsEarned:U.pointsEarned,totalPoints:U.totalPoints,timeSpent:U.timeSpent}),await ne(se.id,0,L,M,!1);const W=[...h.results,U];o(" QuizRunner: Updated results array (incorrect):",{previousResultsLength:h.results.length,newResultsLength:W.length,newResult:U,allResults:W}),re({results:W}),le()}},ee=async()=>{if(!h)return;const se=h.questions[h.current_question_index],M=d.current?Math.floor((Date.now()-d.current)/1e3):0,L=Number(se.points)||0,U=Number(j)||0,W={questionId:se.id,pointsEarned:U,totalPoints:L,timeSpent:M,answeredAt:new Date().toISOString()};o(" QuizRunner: Partial points - creating result:",{questionId:se.id,questionPoints:se.points,actualPoints:L,partialPoints:j,actualPartialPoints:U,pointsEarned:W.pointsEarned,totalPoints:W.totalPoints,timeSpent:W.timeSpent}),await ne(se.id,U,L,M,!1);const H=[...h.results,W];o(" QuizRunner: Updated results array (partial):",{previousResultsLength:h.results.length,newResultsLength:H.length,newResult:W,allResults:H}),re({results:H}),E(!1),N(0),le()},le=()=>{if(h)if(h.current_question_index<h.questions.length-1){const se=h.current_question_index+1,M=h.questions[se],L=(M==null?void 0:M.time_to_answer)||30;_(!1),R(!1),C(L),d.current=Date.now(),re({current_question_index:se,show_answer:!1,has_time_expired:!1,time_left:L,timer_active:!1,timer_started:!1})}else{const se=h.results,M=se.reduce((L,U)=>L+(Number(U.pointsEarned)||0),0);o(" QuizRunner: Quiz completion - final calculations:",{finalResultsLength:se.length,finalResults:se,finalTotalPoints:M,sessionTotalPoints:h.total_points}),x(!0),A(),re({status:"completed",completed_at:new Date().toISOString(),timer_active:!1,total_points:M})}},G=()=>{if(!h)return{totalPointsEarned:0,totalPossiblePoints:0,accuracy:0,correctAnswers:0,totalQuestions:0,averageTime:0};const se=h.results.reduce((H,Y)=>H+Y.pointsEarned,0),M=h.results.reduce((H,Y)=>H+Y.totalPoints,0),L=h.results.filter(H=>H.pointsEarned===H.totalPoints).length,U=h.results.length>0?Math.round(L/h.results.length*100):0,W=h.results.length>0?Math.round(h.results.reduce((H,Y)=>H+Y.timeSpent,0)/h.results.length):0;return{totalPointsEarned:se,totalPossiblePoints:M,accuracy:U,correctAnswers:L,totalQuestions:h.results.length,averageTime:W}},et=()=>{r?(u(f),r()):n(m)},ge=()=>{window.innerWidth<640||T(!O)},Ee=se=>{const M=Math.floor(se/60),L=se%60;return`${M}:${L.toString().padStart(2,"0")}`};if(y)return a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading quiz session..."})]})})});if(!h)return a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(qn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quiz Session Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The quiz session could not be loaded. You will be redirected shortly."}),a.jsx("button",{onClick:()=>n(m),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go Back Now"})]})})});const ze=h.questions[h.current_question_index],ot=G(),Ye=h.results.length>0?Math.round(ot.correctAnswers/h.results.length*100):0;return v?a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsx(KW,{title:h.title,stats:ot,bonusXp:h.bonus_xp||0,isFullScreen:O,themeClasses:P,onRestart:et,onBack:()=>n(m),formatTime:Ee})}):a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsxs("div",{className:`min-h-screen ${P.background} relative overflow-x-hidden`,children:[a.jsx(FW,{isFullScreen:O,isDarkMode:$,currentQuestionIndex:h.current_question_index,totalQuestions:h.questions.length,progressPercentage:Ye,timeLeft:I,timerStarted:Q,showAnswer:w,themeClasses:P,onBack:()=>n(m),onToggleFullScreen:ge,onToggleDarkMode:z,onStartTimer:k,formatTime:Ee}),a.jsx("div",{className:`${O?"pt-28 sm:pt-40 px-4 sm:px-6 pb-32 sm:pb-32":"p-4 sm:p-6"}`,children:a.jsx("div",{className:`${O?"w-full max-w-none":"max-w-4xl mx-auto"}`,children:a.jsx("div",{className:`${P.card} rounded-xl shadow-sm p-4 sm:p-8 ${O?"w-full":"mx-auto max-w-3xl"} ${O?"":"border "+P.border}`,children:w?a.jsx(VW,{question:ze,isFullScreen:O,isDarkMode:$,themeClasses:P}):a.jsx(BW,{question:ze,hasTimeExpired:D,isFullScreen:O,isDarkMode:$,themeClasses:P})})})}),a.jsx(WW,{isFullScreen:O,showAnswer:w,hasTimeExpired:D,themeClasses:P,onShowAnswer:J,onShowQuestion:he,onCorrect:rt,onIncorrect:B}),a.jsx(HW,{isOpen:S,questionPoints:(ze==null?void 0:ze.points)||0,selectedPoints:j,onPointsChange:N,onConfirm:ee,onCancel:()=>E(!1),themeClasses:P,isFullScreen:O})]})})}function GW(){const e=St(),{user:t,developerLog:r}=xe(),{questions:n,fetchQuestions:s}=ia(),{createQuizSession:i,getActiveSessionsForUser:o}=aa(),[l,c]=b.useState(null),[u,d]=b.useState(!0),[f,m]=b.useState(null),h=b.useRef(!1);b.useEffect(()=>{s()},[s]),b.useEffect(()=>{if(h.current){d(!1);return}if(!t){m("User not authenticated"),d(!1);return}if(l){d(!1);return}if(n.length===0)return;(async()=>{var g,v;h.current=!0,d(!0);try{r(" Checking for existing active quick-start sessions...");const w=o(t.id).find($=>$.type==="quick-start"&&($.status==="active"||$.status==="paused"));if(w){r(" Found existing quick-start session, resuming:",w.id),e(`/quiz/runner/${w.id}`);return}r(" No existing quick-start session found, creating new one..."),r(" Initializing quiz session with",n.length,"total questions");const _=((g=t==null?void 0:t.planSettings)==null?void 0:g.question_tier_access)||["free"];r(" User accessible tiers:",_);const j=n.filter($=>_.includes($.tier));if(r(" Accessible questions:",j.length),j.length===0){m("No questions available for your subscription tier"),d(!1);return}const N=[...j].sort(()=>.5-Math.random()),S=N.slice(0,Math.min(90,N.length));r(" Selected questions for quiz:",S.length);const E=S.reduce(($,P)=>$+P.points,0),O=Math.round(S.reduce(($,P)=>$+P.time_to_answer,0)/60);r(" Quiz metadata - Points:",E,"Minutes:",O);const T=await i({type:"quick-start",title:"Quick Start Quiz",description:"Test your Pathfinder Bible Experience knowledge with random questions. Each question has a time limit and point value based on difficulty.",user_id:t.id,team_id:t.teamId,questions:S,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((v=S[0])==null?void 0:v.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:E,estimated_minutes:O});r(" Quiz session created with ID:",T),c(T),e(`/quiz/runner/${T}`)}catch(x){r(" Error initializing quiz session:",x),m(x instanceof Error?x.message:"Failed to create quiz session"),h.current=!1,d(!1)}})()},[t,n,i,o,e]);const p=()=>{c(null),window.location.href="/quiz"};return u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Preparing your quiz..."})]})}):f?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-red-600 text-xl",children:""})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Start Quiz"}),a.jsx("p",{className:"text-gray-600 mb-4",children:f}),a.jsx("button",{onClick:()=>window.location.href="/quiz",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Back to Quiz Center"})]})}):l?a.jsx(yh,{quizSessionId:l,backUrl:"/quiz",onSessionDeleted:p}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Starting quiz session..."})]})})}function YW(){var q,Q,D;const e=St(),{user:t}=xe(),{questions:r,loading:n,fetchQuestions:s}=ia(),{createQuizSession:i}=aa(),[o,l]=b.useState(null);b.useEffect(()=>{t&&t.planSettings&&!t.planSettings.allow_create_own_quiz&&e("/quiz",{replace:!0})},[t,e]);const[c,u]=b.useState([]),[d,f]=b.useState({}),[m,h]=b.useState(20);b.useEffect(()=>{s()},[s]);const p=oe.useMemo(()=>SS(r),[r]),y=oe.useCallback(()=>{var A;if(c.length===0)return[];let k=[];return c.forEach(R=>{const F=d[R]||[];if(F.length>0){const Z=r.filter(re=>re.book_of_bible===R&&F.includes(re.chapter));k=[...k,...Z]}}),k=Ma(k,((A=t==null?void 0:t.subscription)==null?void 0:A.plan)||"free"),[...k].sort(()=>.5-Math.random()).slice(0,Math.min(m,k.length))},[c,d,r,(q=t==null?void 0:t.subscription)==null?void 0:q.plan,m]),g=oe.useCallback(()=>{if(c.length===0)return 0;let k=0;return c.forEach(C=>{var R;const A=d[C]||[];if(A.length>0){const F=r.filter(Z=>Z.book_of_bible===C&&A.includes(Z.chapter));k+=Ma(F,((R=t==null?void 0:t.subscription)==null?void 0:R.plan)||"free").length}}),k},[c,d,r,(Q=t==null?void 0:t.subscription)==null?void 0:Q.plan]),v=oe.useCallback(()=>c.length===0?"Custom Quiz":c.length===1?`${c[0]} Quiz`:c.length===2?`${c[0]} & ${c[1]} Quiz`:`Multi-Book Quiz (${c.length} books)`,[c]),x=y(),w=oe.useCallback(()=>{if(c.length===0)return"Custom quiz";const k=Object.values(d).reduce((A,R)=>A+R.length,0);return`Custom quiz covering ${c.length<=2?c.join(" & "):`${c.slice(0,2).join(", ")} and ${c.length-2} more`} with ${k} chapters and ${x.length} questions.`},[c,d,x.length]),j=(()=>{var k;return((k=t==null?void 0:t.planSettings)==null?void 0:k.max_questions_custom_quiz)||20})(),N=((D=t==null?void 0:t.subscription)==null?void 0:D.plan)||"free",S=oe.useCallback(k=>{u(C=>{const A=C.includes(k)?C.filter(R=>R!==k):[...C,k];return A.includes(k)||f(R=>{const F={...R};return delete F[k],F}),A})},[]),E=oe.useCallback((k,C)=>{f(A=>{const R=A[k]||[],F=R.includes(C)?R.filter(Z=>Z!==C):[...R,C];return{...A,[k]:F}})},[]),O=oe.useCallback(k=>{const C=Va(k,r),R=(d[k]||[]).length===C.length;f(F=>({...F,[k]:R?[]:C}))},[r,d]),T=g(),$=oe.useCallback(async()=>{var F;if(x.length===0||!t)return;const k=x.reduce((Z,re)=>Z+re.points,0),C=Math.round(x.reduce((Z,re)=>Z+re.time_to_answer,0)/60),A=v(),R=w();try{const Z=await i({type:"custom",title:A,description:R,user_id:t.id,team_id:t.teamId,questions:x,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((F=x[0])==null?void 0:F.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:k,estimated_minutes:C});l(Z)}catch(Z){console.error("Error creating quiz session:",Z)}},[x,t,v,w,i]),P=Math.round(x.reduce((k,C)=>k+C.time_to_answer,0)/60),z=x.reduce((k,C)=>k+C.points,0),I=()=>{l(null)};return o?a.jsx(yh,{quizSessionId:o,backUrl:"/quiz",onSessionDeleted:I}):n?a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-6",children:a.jsx(uM,{className:"h-6 w-6 text-blue-600 animate-spin"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading Questions..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the available questions."})]})]})})})}):a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Qa,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Your Own Quiz"}),a.jsx("p",{className:"text-gray-600",children:"Customize your study experience by selecting specific books and chapters."})]})]}),r.length===0&&!n&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-900",children:"No Questions Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"No questions were found in the database. Please check if questions have been added to the system."})]})]})}),p.length===0&&r.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Loading Books"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Analyzing available Bible books from the question database..."})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[N==="enterprise"?a.jsx(ds,{className:"h-5 w-5 text-purple-600"}):N==="pro"?a.jsx(Ki,{className:"h-5 w-5 text-blue-600"}):a.jsx(ke,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900 capitalize",children:[N," Plan"]}),a.jsx("div",{className:"text-sm text-gray-600",children:N==="enterprise"?"Unlimited questions per quiz":`Up to ${j} questions per quiz`})]})]}),N==="free"&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Upgrade Plan"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Bible Books"}),p.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No books available"}),a.jsx("p",{className:"text-sm",children:"Questions need to be added to the system"})]}):a.jsx("div",{className:"grid grid-cols-1 gap-2",children:p.map(k=>{var A;const C=Ma(r.filter(R=>R.book_of_bible===k),((A=t==null?void 0:t.subscription)==null?void 0:A.plan)||"free").length;return a.jsx("button",{onClick:()=>S(k),className:`p-4 rounded-lg border-2 text-left transition-all duration-200 ${c.includes(k)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:k}),a.jsxs("div",{className:"text-sm text-gray-500",children:[C," questions available"]})]}),c.includes(k)&&a.jsx(Mt,{className:"h-5 w-5 text-blue-600"})]})},k)})}),c.length>0&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[c.length," book",c.length!==1?"s":""," selected"]})]}),c.map(k=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[k," Chapters"]}),a.jsx("button",{onClick:()=>O(k),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:(d[k]||[]).length===Va(k,r).length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 mb-4",children:Va(k,r).map(C=>{var F;const A=Ma(r.filter(Z=>Z.book_of_bible===k&&Z.chapter===C),((F=t==null?void 0:t.subscription)==null?void 0:F.plan)||"free").length,R=(d[k]||[]).includes(C);return a.jsxs("button",{onClick:()=>E(k,C),className:`p-3 rounded-lg border-2 text-center transition-all duration-200 ${R?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,title:`${k} Chapter ${C} - ${A} questions`,children:[a.jsx("div",{className:"font-medium",children:C}),a.jsxs("div",{className:"text-xs text-gray-500",children:[A,"q"]})]},`${k}-${C}`)})})]},k)),T>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Maximum Questions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"range",min:"1",max:Math.min(j,T),value:Math.min(m,T),onChange:k=>h(parseInt(k.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[Math.min(m,T)," question",Math.min(m,T)!==1?"s":""]}),a.jsxs("span",{className:"text-gray-500",children:[T," available"]})]}),m>T&&a.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 text-sm",children:[a.jsx(tn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Not enough questions available. Maximum: ",T]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quiz Preview"}),x.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["~",P]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:z}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Book",c.length!==1?"s":""]})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Coverage"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Books:"})," ",c.join(", ")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Total Chapters:"})," ",Object.values(d).reduce((k,C)=>k+C.length,0)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Difficulty:"})," Mixed levels"]})]})]}),a.jsxs("button",{onClick:$,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Custom Quiz"})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Select books and chapters to see your quiz preview"})]})]})]})]})]})})})})}function XW(){var Q;const{assignmentId:e}=LN(),t=ys(),r=St(),{user:n}=xe(),{questions:s}=ia(),{getAssignmentById:i}=X0(),{createQuizSession:o,loadQuizSession:l,getSessionForAssignment:c,updateQuizSession:u}=aa(),[d,f]=b.useState(null),[m,h]=b.useState(null),[p,y]=b.useState(!0),[g,v]=b.useState(null),[x,w]=b.useState("random"),_=t.state,j=oe.useCallback(()=>{var C;if(!d)return[];const D=(_==null?void 0:_.selectedStudyItems)||d.study_items;let k=NS(s,D);return k=Ma(k,((C=n==null?void 0:n.subscription)==null?void 0:C.plan)||"free"),x==="verse"?[...k].sort((A,R)=>{if(A.book_of_bible!==R.book_of_bible)return A.book_of_bible.localeCompare(R.book_of_bible);if(A.chapter!==R.chapter)return A.chapter-R.chapter;const F=A.verse||1,Z=R.verse||1;return F-Z}):[...k].sort(()=>.5-Math.random())},[d,_==null?void 0:_.selectedStudyItems,s,(Q=n==null?void 0:n.subscription)==null?void 0:Q.plan,x]),N=oe.useCallback(D=>!D||D.length===0?"":D.map(k=>{if(k.verses&&k.verses.length>0){const C=S(k.verses);return k.chapters.length===1?`${k.book} ${k.chapters[0]}:${C}`:`${k.book} (Ch. ${k.chapters.join(", ")}, Verses: ${C})`}else return k.chapters.length===1?`${k.book} Chapter ${k.chapters[0]}`:`${k.book} (Ch. ${k.chapters.join(", ")})`}).join(", "),[]),S=oe.useCallback(D=>{if(!D||D.length===0)return"";const k=[...D].sort((F,Z)=>F-Z),C=[];let A=k[0],R=k[0];for(let F=1;F<k.length;F++)k[F]===R+1?R=k[F]:(C.push(A===R?`${A}`:`${A}-${R}`),A=R=k[F]);return C.push(A===R?`${A}`:`${A}-${R}`),C.join(", ")},[]),E=oe.useCallback(async()=>{var Z;if(!d||!n)return;const D=j();if(D.length===0){v("No questions available for this assignment");return}const k=D.reduce((re,ne)=>re+ne.points,0),C=Math.round(D.reduce((re,ne)=>re+ne.time_to_answer,0)/60),A=(_==null?void 0:_.selectedStudyItems)||d.study_items,R=A.length===1?`${A[0].book} Study Quiz`:"Multi-Book Study Quiz",F=`Study quiz for assignment: ${d.description||"Study assignment"}`;try{const re=await o({type:"study-assignment",title:R,description:F,user_id:n.id,team_id:n.teamId,assignment_id:d.id,questions:D,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((Z=D[0])==null?void 0:Z.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:k,estimated_minutes:C});h(re)}catch(re){console.error("Error creating quiz session:",re),v("Failed to create quiz session")}},[d,n,j,_==null?void 0:_.selectedStudyItems,o]),O=oe.useCallback(()=>{const D=c(e,n.id);D&&h(D.id)},[e,n,c]),T=oe.useCallback(()=>{h(null)},[]);if(oe.useCallback(D=>{if(D.length===0)return"";if(D.length===1){const k=D[0];return`${k.book} (Ch. ${k.chapters.join(", ")})`}return`${D.length} books`},[]),b.useEffect(()=>{n&&n.planSettings&&!n.planSettings.allow_study_schedule_quiz&&r("/quiz",{replace:!0})},[n,r]),b.useEffect(()=>{if(!e||!n){v("Assignment not found"),y(!1);return}(async()=>{try{console.log(" Loading assignment:",e);const k=await i(e);if(!k){v("Assignment not found"),y(!1);return}if(!(k.user_id===n.id||n.teamRole&&["owner","admin"].includes(n.teamRole))){v("You do not have access to this assignment"),y(!1);return}console.log(" Assignment loaded successfully:",k),f(k);const A=c(e,n.id);A&&h(A.id),y(!1)}catch(k){console.error(" Error loading assignment:",k),v("Failed to load assignment"),y(!1)}})()},[e,n,c,i]),p)return a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading assignment..."})]})})});if(g)return a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(tn,{className:"h-8 w-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),a.jsx("p",{className:"text-gray-600 mb-6",children:g}),a.jsx("button",{onClick:()=>r("/schedule"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Return to Schedule"})]})]})})})});if(m)return a.jsx(yh,{quizSessionId:m,backUrl:"/schedule",onSessionDeleted:T});if(!d)return null;const $=(_==null?void 0:_.selectedStudyItems)||d.study_items,P=j(),z=c(e,n.id),I=P.reduce((D,k)=>D+k.points,0),q=Math.round(P.reduce((D,k)=>D+k.time_to_answer,0)/60);return a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Study Assignment Quiz"}),a.jsx("p",{className:"text-gray-600",children:d.description||"Complete your study assignment"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Assignment Details"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(d.date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Study Items:"})," ",N($)]}),(_==null?void 0:_.selectedStudyItems)&&a.jsx("div",{className:"text-blue-600 text-xs mt-2",children:" Custom selection applied"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-purple-900 mb-3",children:"Question Order"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"verse",checked:x==="verse",onChange:D=>w(D.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"By Verse Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in biblical sequence)"})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"random",checked:x==="random",onChange:D=>w(D.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Random Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in mixed order)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["~",q]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:I}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]})]}),P.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No questions available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"There are no questions available for the selected study items with your current subscription tier."})]}):a.jsx("div",{className:"space-y-4",children:z?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[a.jsx(Me,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Quiz in Progress"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"You have an active quiz session for this assignment. You can resume where you left off."}),a.jsxs("div",{className:"mt-3 text-sm text-yellow-700",children:[a.jsxs("div",{children:["Progress: ",z.results.length," of ",z.questions.length," questions"]}),a.jsxs("div",{children:["Current Score: ",z.total_points," points"]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:O,className:"flex items-center justify-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200 flex-1",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Resume Quiz"})]}),a.jsxs("button",{onClick:E,className:"flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex-1",children:[a.jsx(Wi,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Over"})]})]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:E,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Study Quiz"})]})})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Study Items"}),a.jsx("div",{className:"space-y-3",children:$.map((D,k)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:D.book}),a.jsx("div",{className:"text-sm text-gray-600",children:D.verses&&D.verses.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Chapters: ",D.chapters.join(", ")]}),a.jsxs("div",{className:"text-purple-600 font-medium",children:["Verses: ",S(D.verses)]})]}):a.jsxs("div",{children:["Chapters: ",D.chapters.join(", ")," (All verses)"]})})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[(()=>{let C=s.filter(A=>A.book_of_bible===D.book&&D.chapters.includes(A.chapter));return D.verses&&D.verses.length>0&&(C=C.filter(A=>{const R=A.verse||1;return D.verses.includes(R)})),C.length})()," question",(()=>{let C=s.filter(R=>R.book_of_bible===D.book&&D.chapters.includes(R.chapter));return D.verses&&D.verses.length>0&&(C=C.filter(R=>{const F=R.verse||1;return D.verses.includes(F)})),C.length!==1?"s":""})()]})]},k))})]})]})})})})}function JW(){const{userAchievements:e,achievements:t,loading:r,error:n}=Y0();if(r)return a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading achievements..."})});if(n)return a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"error",message:n,className:"mb-6"})})});const s=new Map(e.map(i=>[i.achievement_id,i]));return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Achievements"}),a.jsx("p",{className:"text-gray-600",children:"Track your progress and unlock new milestones!"})]}),t.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(Nt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Achievements Defined"}),a.jsx("p",{className:"text-gray-600",children:"It looks like there are no achievements configured in the system yet."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>{var c;const o=s.has(i.id),l=o?(c=s.get(i.id))==null?void 0:c.unlocked_at:null;return a.jsxs("div",{className:je("bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",o?"border-2 border-green-200":"opacity-70 grayscale"),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:je("h-16 w-16 rounded-full flex items-center justify-center",o?"bg-green-100":"bg-gray-100"),children:i.badge_icon_url?a.jsx("img",{src:i.badge_icon_url,alt:i.name,className:"h-10 w-10"}):a.jsx(Nt,{className:je("h-8 w-8",o?"text-green-600":"text-gray-400")})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:je("text-lg font-semibold",o?"text-gray-900":"text-gray-600"),children:i.name}),a.jsx("p",{className:je("text-sm",o?"text-gray-600":"text-gray-500"),children:i.description}),o?a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600 mt-1",children:[a.jsx(Dt,{className:"h-3 w-3"}),a.jsxs("span",{children:["Unlocked on ",new Date(l).toLocaleDateString()]})]}):a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 mt-1",children:[a.jsx(bS,{className:"h-3 w-3"}),a.jsx("span",{children:"Locked"})]})]})]},i.id)})})]})})}function ZW(e){const[t,r]=b.useState(new Date),n=b.useMemo(()=>{const l=t.getFullYear(),c=t.getMonth(),u=Wr(new Date),d=Wr(new Date(l,c,1));Wr(new Date(l,c+1,0));const f=Wr(new Date(d));f.setDate(f.getDate()-d.getDay());const m=[],h=Wr(new Date(f));for(let p=0;p<42;p++){const y=e.find(g=>zp(g.date,h));m.push({date:new Date(h),isCurrentMonth:h.getMonth()===c,isToday:zp(h,u),assignment:y}),h.setDate(h.getDate()+1)}return m},[t,e]);return{currentDate:t,setCurrentDate:r,calendarDays:n,navigateMonth:l=>{const c=new Date(t);c.setMonth(c.getMonth()+(l==="next"?1:-1)),r(c)},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}function eK(e){const[t,r]=b.useState([]),[n,s]=b.useState(""),[i,o]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState(""),[f,m]=b.useState(""),[h,p]=b.useState(""),y=b.useCallback(I=>{const q=e.filter(D=>D.book_of_bible===I);return q.length===0?1:Math.max(...q.map(D=>D.chapter))},[e]),g=b.useCallback((I,q)=>tm(I,q,e),[e]),v=b.useCallback(I=>{o(q=>q.includes(I)?q.filter(Q=>Q!==I):[...q,I].sort((Q,D)=>Q-D)),c([])},[]),x=b.useCallback(()=>{if(!n)return;const I=Va(n,e);o(I),c([])},[n,e]),w=b.useCallback(()=>{o([]),c([])},[]),_=b.useCallback(I=>{c(q=>q.includes(I)?q.filter(Q=>Q!==I):[...q,I].sort((Q,D)=>Q-D))},[]),j=b.useCallback(()=>{if(!n||i.length!==1)return;const I=tm(n,i[0],e);c(I)},[n,i,e]),N=b.useCallback(()=>{c([]),d(""),m("")},[]),S=b.useCallback(()=>{if(!n||i.length!==1)return;const I=parseInt(u),q=parseInt(f);if(isNaN(I)||isNaN(q)||I>q||I<1)return;const Q=tm(n,i[0],e),D=Math.max(...Q);if(q>D)return;const k=[];for(let C=I;C<=q;C++)Q.includes(C)&&k.push(C);c(k)},[n,i,u,f,e]),E=b.useCallback(I=>{d(I)},[]),O=b.useCallback(I=>{m(I)},[]),T=b.useCallback(()=>{if(!n||i.length===0)return;const I={book:n,chapters:[...i],verses:l.length>0?[...l]:void 0};r(q=>[...q,I]),s(""),o([]),c([]),d(""),m("")},[n,i,l]),$=b.useCallback(I=>{r(q=>q.filter((Q,D)=>D!==I))},[]),P=b.useCallback(()=>{r([]),s(""),o([]),c([]),d(""),m(""),p("")},[]),z=b.useCallback((I,q="")=>{r(I),p(q),s(""),o([]),c([]),d(""),m("")},[]);return{studyItems:t,currentBook:n,currentChapters:i,currentVerses:l,startVerseInput:u,endVerseInput:f,description:h,setCurrentBook:s,setDescription:p,toggleChapter:v,selectAllChapters:x,clearChapters:w,toggleVerse:_,selectAllVerses:j,clearVerses:N,selectVerseRange:S,updateStartVerseInput:E,updateEndVerseInput:O,addStudyItem:T,removeStudyItem:$,resetForm:P,initializeForm:z,getMaxChapters:y,getVersesForBookChapter:g}}function tK({currentDate:e,calendarDays:t,dayNames:r,monthNames:n,onNavigateMonth:s,onDateClick:i,onToday:o,formatStudyItems:l,normalizeAssignment:c,getSessionForAssignment:u,onStartQuiz:d,onResumeQuiz:f,user:m,canManageSchedules:h=!1,questions:p=[]}){const{developerLog:y}=xe();return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:[n[e.getMonth()]," ",e.getFullYear()]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>s("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(yS,{className:"h-5 w-5 text-gray-600"})}),a.jsx("button",{onClick:o,className:"px-3 py-2 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200",children:"Today"}),a.jsx("button",{onClick:()=>s("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(F0,{className:"h-5 w-5 text-gray-600"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[r.map(g=>a.jsx("div",{className:"p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:g},g)),t.map((g,v)=>{var _,j,N,S;const x=g.assignment&&m&&u&&u(g.assignment.id,m.id);g.assignment&&y(" Calendar Day Debug:",{date:g.date.toDateString(),assignmentId:(_=g.assignment)==null?void 0:_.id,assignmentUserId:(j=g.assignment)==null?void 0:j.user_id,currentUserId:m==null?void 0:m.id,hasActiveSession:!!x,activeSessionId:x==null?void 0:x.id,assignmentCompleted:(N=g.assignment)==null?void 0:N.completed,isUserAssignment:((S=g.assignment)==null?void 0:S.user_id)===(m==null?void 0:m.id),onStartQuizExists:!!d,onResumeQuizExists:!!f});const w=g.isCurrentMonth&&(h||g.assignment&&g.assignment.user_id===(m==null?void 0:m.id));return a.jsxs("button",{onClick:()=>w?i(g):void 0,onClick:E=>{const O=E.target,T=O.closest(".quiz-action-button");y(" Calendar day clicked:",{date:g.date.toDateString(),isClickable:w,isQuizButtonClick:!!T,targetElement:O.tagName,targetClasses:O.className}),!T&&w&&i(g)},className:`
                relative p-2 sm:p-3 h-20 sm:h-24 text-left rounded-lg transition-all duration-200
                ${g.isCurrentMonth?w?"hover:bg-gray-50 cursor-pointer":"cursor-default":"text-gray-300 cursor-default"}
                ${g.isToday?"bg-indigo-50 border-2 border-indigo-200":"border border-gray-100"}
                ${g.assignment?g.assignment.completed?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200":""}
              `,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium ${g.isToday?"text-indigo-600":g.isCurrentMonth?"text-gray-900":"text-gray-300"}`,children:g.date.getDate()}),g.assignment&&a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:`text-xs font-medium truncate hidden sm:block ${g.assignment.completed?"text-green-700":"text-yellow-700"}`,children:l(c(g.assignment).study_items)}),a.jsx("div",{className:"flex items-center justify-between mt-1",children:g.assignment.completed?a.jsx("span",{className:"text-xs text-green-600 hidden sm:inline",children:" Completed"}):g.assignment.user_id===(m==null?void 0:m.id)&&d&&f?a.jsxs("button",{className:"quiz-action-button flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-all duration-200 bg-green-600 text-white hover:bg-green-700",onClick:E=>{E.stopPropagation(),y(" Calendar Quiz Button Clicked:",{date:g.date.toDateString(),assignmentId:g.assignment.id,hasActiveSession:!!x,activeSessionId:x==null?void 0:x.id,action:x?"resume":"start"}),x?(f(g.assignment),y(" Calling onResumeQuiz with assignment:",g.assignment.id)):(d(g.assignment),y(" Calling onStartQuiz with assignment:",g.assignment.id))},title:x?"Resume Quiz":"Start Quiz",children:[x?a.jsx(Wi,{className:"h-3 w-3 sm:h-4 sm:w-4"}):a.jsx(io,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:x?"Resume":"Start"})]}):x?a.jsx("span",{className:"text-xs text-blue-600 hidden sm:inline",children:"Active"}):a.jsx("span",{className:"text-xs text-yellow-600 hidden sm:inline",children:"Pending"})})]})]},v)})]})]})}function rK({stats:e}){return a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Assignments"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.totalAssignments})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(at,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"This Month"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.thisMonth})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Completed"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.completed})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ke,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Books Scheduled"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.booksScheduled})]})]})})]})}function nK({isOpen:e,onClose:t,selectedDate:r,teamMembers:n,isNewAssignment:s,initialSelectedMembers:i,editingAssignment:o,studyItems:l,currentBook:c,currentChapters:u,currentVerses:d,description:f,onBookChange:m,onDescriptionChange:h,onToggleChapter:p,onSelectAllChapters:y,onClearChapters:g,onToggleVerse:v,onSelectAllVerses:x,onClearVerses:w,selectVerseRange:_,startVerseInput:j,endVerseInput:N,updateStartVerseInput:S,updateEndVerseInput:E,onAddStudyItem:O,onRemoveStudyItem:T,onSave:$,onDelete:P,getMaxChapters:z,getVersesForBookChapter:I,questions:q,currentUserId:Q}){const[D,k]=oe.useState(i);if(oe.useEffect(()=>{k(i)},[i]),!r)return null;const C=J=>{k(he=>he.includes(J)?he.filter(rt=>rt!==J):[...he,J])},A=()=>{k(n.map(J=>J.userId))},R=()=>{k([])},F=()=>{if(D.length===0)return"No members selected";if(D.length===1){const J=n.find(he=>he.userId===D[0]);return(J==null?void 0:J.user.name)||"Unknown member"}return`${D.length} members selected`},Z=oe.useMemo(()=>SS(q),[q]),re=c&&u.length===1,ne=re?I(c,u[0]):[];return a.jsxs(kn,{isOpen:e,onClose:t,title:o?"Edit Assignment":"Add Study Assignment",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{children:o&&a.jsxs("button",{onClick:P,className:"flex items-center space-x-2 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Hi,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete"})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>$(D,l,f),disabled:l.length===0||D.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(B0,{className:"h-4 w-4"}),a.jsxs("span",{children:[o?"Update":"Save"," Assignment"]})]})]})]}),children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium text-blue-900",children:["Assignment for: ",F()]}),a.jsx("div",{className:"text-sm text-blue-700",children:oo(r,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s&&a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(He,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{children:"Select Team Members"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:A,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Select All"}),a.jsx("button",{type:"button",onClick:R,className:"text-xs text-gray-600 hover:text-gray-700 font-medium",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-48 overflow-y-auto",children:n.map(J=>a.jsxs("button",{type:"button",onClick:()=>C(J.userId),className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-all duration-200 text-left ${D.includes(J.userId)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:J.user.name.split(" ").map(he=>he[0]).join("")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:J.user.name}),a.jsxs("div",{className:"text-sm text-gray-500 capitalize",children:[J.role,Q&&J.userId===Q&&a.jsx("span",{className:"text-indigo-600 font-medium",children:" (You)"})]})]}),D.includes(J.userId)&&a.jsx(Mt,{className:"h-5 w-5 text-indigo-600 flex-shrink-0"})]},J.userId))}),D.length>0&&a.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[D.length," member",D.length!==1?"s":""," selected"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Add Study Item"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bible Book"}),a.jsxs("select",{value:c,onChange:J=>m(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"",children:"Select a book"}),Z.map(J=>a.jsx("option",{value:J,children:J},J))]}),Z.length===0&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No books available. Questions need to be added to the system."})]}),c&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chapters"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:y,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:g,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-6 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:Va(c,q).map(J=>a.jsx("button",{type:"button",onClick:()=>p(J),className:`p-2 text-sm rounded transition-colors duration-200 ${u.includes(J)?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:J},J))}),Va(c,q).length===0&&a.jsxs("p",{className:"text-sm text-gray-500",children:["No chapters available for ",c,". Questions need to be added for this book."]}),u.length>0&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",u.join(", ")," (",u.length," chapter",u.length!==1?"s":"",")"]})]}),re&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verses (Optional)"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:x,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:w,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),ne.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-purple-900 mb-2",children:"Quick Range Selection"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"number",min:"1",max:Math.max(...ne),value:j,onChange:J=>S(J.target.value),placeholder:"Start",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("span",{className:"text-purple-700 font-medium",children:"to"}),a.jsx("input",{type:"number",min:"1",max:Math.max(...ne),value:N,onChange:J=>E(J.target.value),placeholder:"End",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("button",{type:"button",onClick:_,disabled:!j||!N,className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Select Range"})]}),a.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Example: Enter 1 to 15 to select verses 1-15"})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:ne.map(J=>a.jsx("button",{type:"button",onClick:()=>v(J),className:`p-1 text-xs rounded transition-colors duration-200 ${d.includes(J)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:J},J))}),d.length>0&&a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Selected verses: ",d.join(", ")," (",d.length," verse",d.length!==1?"s":"",")"]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to include all verses in ",c," Chapter ",u[0]]}),a.jsxs("div",{className:"text-xs text-purple-600 mt-2 p-2 bg-purple-50 rounded",children:[" ",a.jsx("strong",{children:"Tip:"})," Use the range selector above for consecutive verses (e.g., 1-15), or click individual verses below for specific selections"]})]}):a.jsxs("div",{className:"text-sm text-gray-500 p-3 bg-gray-50 rounded-lg",children:["No verses available for ",c," Chapter ",u[0],". Questions need to be added for this chapter."]})]}),c&&u.length>1&&a.jsx("div",{className:"text-xs text-gray-500 p-2 bg-blue-50 rounded-lg",children:" Select exactly one chapter to enable verse-specific selection"}),a.jsxs("button",{type:"button",onClick:O,disabled:!c||u.length===0||Z.length===0,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:"Add to Assignment"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Assignment Items"}),l.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No study items added yet"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map((J,he)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:J.book}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Chapters: ",J.chapters.join(", ")," (",J.chapters.length," chapter",J.chapters.length!==1?"s":"",")",J.verses&&J.verses.length>0&&a.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Verses: ",J.verses.join(", ")," (",J.verses.length," verse",J.verses.length!==1?"s":"",")"]})]})]}),a.jsx("button",{type:"button",onClick:()=>T(he),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(Hi,{className:"h-4 w-4"})})]},he))}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Notes (Optional)"}),a.jsx("textarea",{value:f,onChange:J=>h(J.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Add study focus, themes, or special instructions..."})]})]})]})]})}function sK({memberAssignments:e,selectedMember:t,user:r,getSessionForAssignment:n,onResumeQuiz:s,onStartQuiz:i,onEditAssignment:o,normalizeAssignment:l,canManageSchedules:c=!1,onDeleteQuizSession:u,questions:d}){const f=Wr(new Date),m=e.filter(h=>h.date.getTime()>=f.getTime()).sort((h,p)=>h.date.getTime()-p.date.getTime()).slice(0,5);return a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Upcoming Assignments ",t?`for ${t.user.name}`:""]}),a.jsxs("div",{className:"space-y-3",children:[m.map(h=>{const p=l(h),y=r&&n&&n(h.id,r.id),g=h.user_id===(r==null?void 0:r.id);return a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${h.completed?"bg-green-100":y?"bg-blue-100":"bg-yellow-100"}`,children:h.completed?a.jsx(Mt,{className:"h-5 w-5 text-green-600"}):y?a.jsx(Wi,{className:"h-5 w-5 text-blue-600"}):a.jsx(ke,{className:"h-5 w-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:ao(p.study_items)}),a.jsxs("div",{className:"text-sm text-gray-600",children:[oo(h.date,{weekday:"long",month:"short",day:"numeric"}),h.completed&&a.jsx("span",{className:"ml-2 text-green-600 font-medium",children:" Completed"}),y&&!h.completed&&a.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:" Quiz Active"})]}),h.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:h.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[!h.completed&&g&&a.jsxs("div",{className:"flex items-center space-x-2",children:[y&&u&&a.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this quiz session? All progress will be lost.")&&u(y.id)},className:"flex items-center space-x-1 px-2 py-1 rounded-lg text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(Hi,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>{y?s(h):i(h)},className:`flex items-center space-x-1 px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${y?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:y?a.jsxs(a.Fragment,{children:[a.jsx(Wi,{className:"h-3 w-3"}),a.jsx("span",{children:"Resume"})]}):a.jsxs(a.Fragment,{children:[a.jsx(io,{className:"h-3 w-3"}),a.jsx("span",{children:"Quiz"})]})})]}),c&&a.jsx("button",{onClick:()=>o(h),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})})]})]},h.id)}),m.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No upcoming assignments ",t?`for ${t.user.name}`:""]}),a.jsx("p",{className:"text-sm text-gray-400",children:c?"Click on a calendar date to add an assignment":"Your team admin will assign study schedules"})]})]})]})}function iK(){var Oc,zo;const{user:e,refreshUser:t}=xe(),{developerLog:r}=xe(),{questions:n,fetchQuestions:s}=ia(),{getSessionForAssignment:i,deleteQuizSession:o}=aa(),l=St(),{assignments:c,teamMembers:u,loading:d,error:f,normalizeAssignment:m,saveAssignment:h,deleteAssignment:p}=X0(),[y,g]=b.useState(""),[v,x]=b.useState([]);b.useEffect(()=>{u.length>0&&!y&&e&&g(e.id)},[u,y,e]);const w=c.filter(ye=>ye.user_id===y),{currentDate:_,setCurrentDate:j,calendarDays:N,navigateMonth:S,monthNames:E,dayNames:O}=ZW(w),{studyItems:T,currentBook:$,currentChapters:P,currentVerses:z,startVerseInput:I,endVerseInput:q,description:Q,setCurrentBook:D,setDescription:k,toggleChapter:C,selectAllChapters:A,clearChapters:R,toggleVerse:F,selectAllVerses:Z,clearVerses:re,selectVerseRange:ne,updateStartVerseInput:J,updateEndVerseInput:he,addStudyItem:rt,removeStudyItem:B,resetForm:ee,initializeForm:le,getMaxChapters:G,getVersesForBookChapter:et}=eK(n);b.useEffect(()=>{s()},[s]);const[ge,Ee]=b.useState(null),[ze,ot]=b.useState(!1),[Ye,se]=b.useState(null),[M,L]=b.useState(!1),U=u.find(ye=>ye.userId===y),W=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin";if(r(" Schedule: Current user:",e),r(" Schedule: User team info:",{teamId:e==null?void 0:e.teamId,teamRole:e==null?void 0:e.teamRole}),r(" Schedule: Plan settings:",e==null?void 0:e.planSettings),r(" Schedule: Schedule access:",(Oc=e==null?void 0:e.planSettings)==null?void 0:Oc.allow_study_schedule_quiz),!(((zo=e==null?void 0:e.planSettings)==null?void 0:zo.allow_study_schedule_quiz)??!1))return a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Yt,{className:"h-8 w-8 text-purple-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Study Schedule"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Study Schedule is a premium feature that helps you organize and track your Bible study progress with structured assignments."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade to Pro Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Get access to Study Schedule and other premium features by upgrading your subscription."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{r(" Schedule: Manually refreshing user profile..."),await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>l("/billing"),className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>l("/quiz"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Quiz Center"})]})]})})});r("Schedule: All assignments:",c),r("Schedule: Selected viewing member ID:",y),r("Schedule: Filtered member assignments:",w);const Y={totalAssignments:w.length,thisMonth:w.filter(ye=>ye.date.getMonth()===_.getMonth()&&ye.date.getFullYear()===_.getFullYear()).length,completed:w.filter(ye=>ye.completed).length,booksScheduled:new Set(w.flatMap(ye=>m(ye).study_items.map(Ss=>Ss.book))).size},de=ye=>{if(!(!ye.isCurrentMonth||!y||!W)){if(Ee(ye.date),ye.assignment){const Jt=m(ye.assignment);se(Jt),le(Jt.study_items,Jt.description||""),x([Jt.user_id]),L(!1)}else se(null),ee(),x(y?[y]:[]),L(!0);ot(!0)}},Ne=async(ye,Jt,Ss)=>{if(!(!ge||Jt.length===0||ye.length===0||!e))try{for(const bh of ye){const ZC={id:(Ye==null?void 0:Ye.id)||crypto.randomUUID(),user_id:bh,team_id:e.teamId||"",date:ge,study_items:[...Jt],description:Ss.trim()||void 0,created_by:e.id,created_at:(Ye==null?void 0:Ye.created_at)||new Date().toISOString(),completed:(Ye==null?void 0:Ye.completed)||!1,completed_at:Ye==null?void 0:Ye.completed_at};await h(ZC)}ot(!1),ee(),Ee(null),se(null),x([]),L(!1)}catch(bh){console.error("Error saving assignment:",bh)}},Oe=async()=>{if(Ye)try{await p(Ye.id),ot(!1),ee(),Ee(null),se(null),x([]),L(!1)}catch(ye){console.error("Error deleting assignment:",ye)}},Xt=ye=>{l(`/quiz/study-assignment/${ye.id}`,{state:{selectedStudyItems:ye.study_items}})},gi=ye=>{l(`/quiz/study-assignment/${ye.id}`)},Cn=ye=>{if(!W)return;const Jt=new Date(ye.date);Ee(Jt);const Ss=m(ye);se(Ss),le(Ss.study_items,Ss.description||""),x([Ss.user_id]),L(!1),ot(!0)},vh=async ye=>{try{await o(ye)}catch(Jt){console.error("Error deleting quiz session:",Jt)}},Io=ye=>{D(ye),R()},$o=ye=>{W&&g(ye)};return e!=null&&e.teamId?a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Study Schedule"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:W?"Plan and manage individual study assignments for your team members.":"View your personal study assignments and start quizzes."})]}),a.jsx(Up,{teamMembers:u,selectedMemberId:y,onSelectMember:$o,selectedMemberInfo:U,disabled:!W}),a.jsx(rK,{stats:Y}),a.jsx("div",{className:"mb-8",children:a.jsx(LS,{allAssignments:w,loading:d,user:e,questions:n,getSessionForAssignment:i,developerLog:r})}),a.jsx(tK,{currentDate:_,calendarDays:N,dayNames:O,monthNames:E,onNavigateMonth:S,onDateClick:de,onToday:()=>j(new Date),formatStudyItems:ye=>ao(ye),normalizeAssignment:m,getSessionForAssignment:i,onStartQuiz:Xt,onResumeQuiz:gi,user:e,canManageSchedules:W}),a.jsx(sK,{memberAssignments:w,selectedMember:U,user:e,getSessionForAssignment:i,onResumeQuiz:gi,onStartQuiz:Xt,onEditAssignment:Cn,normalizeAssignment:m,canManageSchedules:W,onDeleteQuizSession:vh,questions:n}),ze&&W&&a.jsx(nK,{isOpen:ze,onClose:()=>{ot(!1),ee(),Ee(null),se(null),x([]),L(!1)},selectedDate:ge,teamMembers:u,isNewAssignment:M,initialSelectedMembers:v,editingAssignment:Ye,studyItems:T,currentBook:$,currentChapters:P,currentVerses:z,description:Q,onBookChange:Io,onDescriptionChange:k,onToggleChapter:C,onSelectAllChapters:A,onClearChapters:R,onToggleVerse:F,onSelectAllVerses:Z,onClearVerses:re,selectVerseRange:ne,startVerseInput:I,endVerseInput:q,updateStartVerseInput:J,updateEndVerseInput:he,onAddStudyItem:rt,onRemoveStudyItem:B,onSave:Ne,onDelete:Oe,getMaxChapters:G,getVersesForBookChapter:et,questions:n,currentUserId:e==null?void 0:e.id})]})}):a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Up,{teamMembers:[],selectedMemberId:"",onSelectMember:()=>{},disabled:!0})})})}function aK({teamId:e,startDate:t,endDate:r}){const{developerLog:n}=xe(),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){n(" useTeamLeaderboardData: No teamId provided, skipping data fetch"),l(!1),i([]);return}n(" useTeamLeaderboardData: Starting team leaderboard data fetch for team:",e,"with date range:",t,r),l(!0),u(null);try{n(" useTeamLeaderboardData: Using secure function to fetch team leaderboard data");const{data:f,error:m}=await V.rpc("get_team_leaderboard_data",{p_team_id:e});if(m)throw console.error(" Error fetching team leaderboard data:",m),m;n(" useTeamLeaderboardData: Fetched leaderboard data:",(f==null?void 0:f.length)||0,"members");const h=(f||[]).map(p=>({userId:p.user_id,userName:p.user_name,role:p.role,totalQuizzesCompleted:Number(p.total_quizzes_completed),totalQuestionsAnswered:Number(p.total_questions_answered),averageScore:Number(p.average_score),totalTimeSpentMinutes:Number(p.total_quizzes_completed)===0?0:Number(p.total_time_spent_minutes),studyStreak:Number(p.study_streak),totalPointsEarned:Number(p.total_points_earned),totalPossiblePoints:Number(p.total_possible_points)}));n(" useTeamLeaderboardData: Transformed leaderboard data:",h),i(h)}catch(f){console.error(" useTeamLeaderboardData: Error fetching team leaderboard data:",f),u(f.message||"Failed to load team leaderboard data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function oK({data:e,loading:t,error:r}){const[n,s]=b.useState("totalPointsEarned"),[i,o]=b.useState("desc"),l=e.filter(p=>p.role==="member"),c=oe.useMemo(()=>[...l].sort((p,y)=>{const g=p[n],v=y[n];return typeof g=="number"&&typeof v=="number"?i==="desc"?v-g:g-v:typeof g=="string"&&typeof v=="string"?i==="desc"?v.localeCompare(g):g.localeCompare(v):0}),[l,n,i]),u=p=>{n===p?o(i==="desc"?"asc":"desc"):(s(p),o("desc"))},d=p=>{switch(p){case 0:return a.jsx(Nt,{className:"h-5 w-5 text-yellow-500"});case 1:return a.jsx(fM,{className:"h-5 w-5 text-gray-400"});case 2:return a.jsx(mr,{className:"h-5 w-5 text-amber-600"});default:return a.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",p+1]})}},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",h=[{key:"rank",header:a.jsx("div",{className:"text-center",children:"Rank"}),render:(p,y)=>a.jsx("div",{className:"flex items-center justify-center",children:d(y)}),className:"text-center w-16",headerClassName:"text-center"},{key:"userName",header:"Team Member",render:p=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:p.userName.split(" ").map(y=>y[0]).join("")})}),a.jsx("div",{children:a.jsx("div",{className:"font-medium text-gray-900",children:p.userName})})]})},{key:"totalPointsEarned",header:"XP",render:p=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[p.totalPointsEarned.toLocaleString()," XP"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["of ",p.totalPossiblePoints.toLocaleString()]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageScore",header:"Average Score",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:`font-bold text-lg ${f(p.averageScore)}`,children:[p.averageScore.toFixed(1),"%"]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalQuizzesCompleted",header:"Quizzes",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(ke,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.totalQuizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalQuestionsAnswered",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(at,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.totalQuestionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalTimeSpentMinutes",header:"Study Time",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Me,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:It(p.totalTimeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"studyStreak",header:"Streak",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.studyStreak," day",p.studyStreak!==1?"s":""]})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(p=>({...p,header:p.sortable?a.jsxs("button",{onClick:()=>u(p.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:p.header}),n===p.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${i==="desc"?"rotate-180":""}`})]}):p.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(wr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Leaderboard"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Nt,{className:"h-6 w-6 text-yellow-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Leaderboard"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Team performance ranked by total points earned"})]})]})}),a.jsx(sn,{columns:h,data:c,loading:t,emptyState:{icon:Nt,title:"No Team Data",description:"No team member analytics data available yet. Complete some quizzes to see the leaderboard!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Rankings based on total points earned"})})]})}function lK(){const{user:e}=xe(),[t,r]=b.useState(()=>{const h=new Date;return h.setDate(h.getDate()-30),h}),[n,s]=b.useState(new Date),{data:i,loading:o,error:l,refreshData:c}=aK({teamId:e==null?void 0:e.teamId,startDate:t,endDate:n}),u=h=>{const p=new Date(h.target.value);r(p)},d=h=>{const p=new Date(h.target.value);s(p)},f=h=>h.toISOString().split("T")[0],m=oe.useMemo(()=>{const h=i.filter(j=>j.role==="member");if(!h||h.length===0)return{totalMembers:0,totalQuizzes:0,totalQuestions:0,totalTime:0,averageScore:0,topPerformer:null};const p=h.reduce((j,N)=>j+N.totalQuizzesCompleted,0),y=h.reduce((j,N)=>j+N.totalQuestionsAnswered,0),g=h.reduce((j,N)=>j+N.totalTimeSpentMinutes,0),v=h.reduce((j,N)=>j+N.totalPointsEarned,0),x=h.reduce((j,N)=>j+N.totalPossiblePoints,0),w=x>0?v/x*100:0,_=h.length>0?h[0]:null;return{totalMembers:h.length,totalQuizzes:p,totalQuestions:y,totalTime:g,averageScore:w,topPerformer:_}},[i]);return e!=null&&e.teamId?a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Leaderboard"}),a.jsx("p",{className:"text-gray-600",children:"Track your team's performance and see how members rank against each other."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(wr,{className:"h-4 w-4"}),a.jsx("span",{children:"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xS,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter leaderboard data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:f(t),onChange:u,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:f(n),onChange:d,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Math.ceil((n.getTime()-t.getTime())/(1e3*60*60*24))," days"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[a.jsx(Ke,{title:"Team Members",value:m.totalMembers,icon:He,iconColor:"text-indigo-600"}),a.jsx(Ke,{title:"Total Quizzes",value:m.totalQuizzes.toLocaleString(),icon:at,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Team Average",value:`${m.averageScore.toFixed(1)}%`,icon:mr,iconColor:"text-blue-600"}),a.jsx(Ke,{title:"Total Study Time",value:It(m.totalTime),icon:Me,iconColor:"text-purple-600"})]}),m.topPerformer&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-16 w-16 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx(Nt,{className:"h-8 w-8 text-yellow-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:[" Top Performer: ",m.topPerformer.userName]}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[a.jsxs("span",{children:[m.topPerformer.totalPointsEarned.toLocaleString()," points"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[m.topPerformer.averageScore.toFixed(1),"% average score"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[m.topPerformer.totalQuizzesCompleted," quizzes completed"]})]})]})]})}),l&&a.jsx(Fe,{type:"error",message:l,className:"mb-6"}),o&&a.jsx(Lt,{text:"Loading team leaderboard...",className:"py-8"}),!o&&a.jsx(oK,{data:i,loading:o,error:l})]})}):a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to view the leaderboard."})]})})})}function cK(){const{developerLog:e}=xe(),[t,r]=b.useState({totalUsers:0,freeUsers:0,proUsers:0,enterpriseUsers:0,totalTeams:0,newUsersLast30Days:0,newUsersPrev30Days:0,subscriptionsCancelledLast30Days:0,activeUsers:0,activeTeams:0}),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e(" Loading admin statistics...");const d=new Date,f=new Date(d.getTime()-30*24*60*60*1e3),m=new Date(d.getTime()-60*24*60*60*1e3),{data:h,error:p}=await V.from("user_profiles").select("id, created_at");if(p)throw console.error(" Error loading user profiles:",p),p;const{data:y,error:g}=await V.from("subscriptions").select("user_id, plan, status, cancelled_at, created_at").order("created_at",{ascending:!1});if(g)throw console.error(" Error loading subscriptions:",g),g;const{data:v,error:x}=await V.from("teams").select("id, created_at");if(x)throw console.error(" Error loading teams:",x),x;const{data:w,error:_}=await V.from("team_members").select("team_id, status, joined_at").eq("status","active");if(_)throw console.error(" Error loading team members:",_),_;const j=new Map,N=new Map;(y||[]).forEach(A=>{N.has(A.user_id)||N.set(A.user_id,[]),N.get(A.user_id).push(A),A.status==="active"&&!j.has(A.user_id)&&j.set(A.user_id,A)});const S=Array.from(j.values()),E=(h==null?void 0:h.length)||0,O=S.filter(A=>A.plan==="free").length,T=S.filter(A=>A.plan==="pro").length,$=S.filter(A=>A.plan==="enterprise").length,P=(h==null?void 0:h.filter(A=>new Date(A.created_at)>=f).length)||0,z=(h==null?void 0:h.filter(A=>{const R=new Date(A.created_at);return R>=m&&R<f}).length)||0,I=(y||[]).filter(A=>A.cancelled_at&&new Date(A.cancelled_at)>=f).length,q=S.length,D=new Set((w==null?void 0:w.map(A=>A.team_id))||[]).size,k={totalUsers:E,freeUsers:O,proUsers:T,enterpriseUsers:$,totalTeams:(v==null?void 0:v.length)||0,newUsersLast30Days:P,newUsersPrev30Days:z,subscriptionsCancelledLast30Days:I,activeUsers:q,activeTeams:D};e(" Admin statistics calculated:",k),r(k);const C=[{id:1,type:"user_signup",message:`${P} new users registered in the last 30 days`,timestamp:"2 hours ago",severity:"info"},{id:2,type:"subscription",message:`${T+$} users have active paid subscriptions`,timestamp:"4 hours ago",severity:"success"},{id:3,type:"teams",message:`${D} teams are currently active`,timestamp:"6 hours ago",severity:"info"},{id:4,type:"cancellation",message:`${I} subscription cancellations in the last 30 days`,timestamp:"8 hours ago",severity:I>5?"warning":"info"}];s(C)}catch(d){console.error(" Error loading admin statistics:",d),c("Failed to load admin statistics")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{stats:t,recentActivities:n,loading:i,error:l,refreshStats:u}}function uK(){const{stats:e,recentActivities:t,loading:r,error:n}=cK(),s=e.proUsers+e.enterpriseUsers,i=e.totalUsers>0?Math.round(e.freeUsers/e.totalUsers*100):0,o=e.totalUsers>0?Math.round(s/e.totalUsers*100):0,l=e.totalTeams>0?Math.round(e.totalUsers/e.totalTeams):0,c=e.newUsersPrev30Days>0?Math.round((e.newUsersLast30Days-e.newUsersPrev30Days)/e.newUsersPrev30Days*100):0,u=e.totalUsers>0?Math.round(e.activeUsers/e.totalUsers*100):0,d=e.totalTeams>0?Math.round(e.activeTeams/e.totalTeams*100):0,f=[{name:"Total Users",value:e.totalUsers.toLocaleString(),change:`${i}% free, ${o}% paid`,changeType:"neutral",icon:He},{name:"Total Teams",value:e.totalTeams.toLocaleString(),change:`${l} avg members`,changeType:"neutral",icon:Gl},{name:"New Users (30D)",value:e.newUsersLast30Days.toLocaleString(),change:`${c>=0?"+":""}${c}%`,changeType:c>=0?"positive":"negative",icon:jS},{name:"Cancellations (30D)",value:e.subscriptionsCancelledLast30Days.toLocaleString(),change:`${e.totalUsers>0?Math.round(e.subscriptionsCancelledLast30Days/e.totalUsers*100):0}% of total`,changeType:e.subscriptionsCancelledLast30Days>0?"negative":"positive",icon:_S},{name:"Active Users",value:`${u}%`,change:`${e.activeUsers} users`,changeType:u>=90?"positive":u>=70?"neutral":"negative",icon:no},{name:"Active Teams",value:`${d}%`,change:`${e.activeTeams} teams`,changeType:d>=90?"positive":d>=70?"neutral":"negative",icon:_n},{name:"Free Plans",value:e.freeUsers.toLocaleString(),change:`${i}% of users`,changeType:"neutral",icon:He},{name:"Paid Plans",value:s.toLocaleString(),change:`${o}% of users`,changeType:"positive",icon:sd}],m=[{name:"CPU Usage",value:45,status:"good"},{name:"Memory Usage",value:67,status:"warning"},{name:"Disk Usage",value:23,status:"good"},{name:"Network I/O",value:89,status:"critical"}],h=[{plan:"Free",count:e.freeUsers,color:"bg-gray-500"},{plan:"Pro",count:e.proUsers,color:"bg-blue-500"},{plan:"Enterprise",count:e.enterpriseUsers,color:"bg-purple-500"}],p=g=>{switch(g){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},y=g=>{switch(g){case"success":return"bg-green-50 text-green-700 border-green-200";case"warning":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"error":return"bg-red-50 text-red-700 border-red-200";default:return"bg-blue-50 text-blue-700 border-blue-200"}};return r?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading admin data..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Monitor system performance and manage your application."})]}),n&&a.jsx(Fe,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:f.map(g=>a.jsx(Ke,{title:g.name,value:g.value,icon:g.icon,trend:{value:g.change,type:g.changeType}},g.name))}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(vM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"System Metrics"})]}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:m.map(g=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-0 flex-1 truncate pr-3",children:g.name}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[a.jsx("div",{className:"w-20 sm:w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${p(g.status)}`,style:{width:`${g.value}%`}})}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:[g.value,"%"]})]})]},g.name))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(xM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Subscription Breakdown"})]}),a.jsx("div",{className:"space-y-4",children:h.map(g=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${g.color}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.plan})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-bold text-gray-900",children:g.count}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e.totalUsers>0?Math.round(g.count/e.totalUsers*100):0,"%"]})]})]},g.plan))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(iM,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Backup Database"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(_n,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Security Scan"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(He,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Manage Users"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(no,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"View Logs"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Recent Activities"}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:t.slice(0,8).map(g=>a.jsx("div",{className:`p-3 sm:p-4 rounded-lg border ${y(g.severity)}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium break-words",children:g.message}),a.jsx("p",{className:"text-xs mt-1 opacity-75",children:g.timestamp})]}),a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ml-3 flex-shrink-0 ${g.severity==="success"?"bg-green-100 text-green-800":g.severity==="warning"?"bg-yellow-100 text-yellow-800":g.severity==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:g.type.replace("_"," ")})]})},g.id))})]})]})})}function dK(){const{developerLog:e}=xe(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e(" Loading users for admin panel...");const{data:m,error:h}=await V.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          created_at,
          teams:team_id (
            id,
            name
          )
        `);if(h)throw console.error(" Error loading user profiles:",h),h;const{data:p,error:y}=await V.from("subscriptions").select("user_id, plan, status, created_at").eq("status","active").order("created_at",{ascending:!1});y&&console.error(" Error loading subscriptions:",y);const g=new Map;(p||[]).forEach(j=>{g.has(j.user_id)||g.set(j.user_id,j)});const{data:v,error:x}=await V.from("team_members").select("user_id, status");x&&console.error(" Error loading team members:",x);const w=new Map((v||[]).map(j=>[j.user_id,j])),_=(m||[]).map(j=>{var E;const N=g.get(j.id),S=w.get(j.id);return{id:j.id,name:j.name,email:j.email,role:j.role,status:(S==null?void 0:S.status)||"active",subscription:(N==null?void 0:N.plan)||"free",joinDate:j.created_at,lastActive:"Recently",teamId:j.team_id,teamRole:j.team_role,teamName:(E=j.teams)==null?void 0:E.name}});e(" Users loaded successfully:",_.length),r(_)}catch(m){console.error(" Error loading users:",m),c("Failed to load users")}finally{o(!1)}},[e]),d=b.useCallback(async()=>{try{e(" Loading teams for admin panel...");const{data:m,error:h}=await V.from("teams").select("id, name, member_count");if(h)throw console.error(" Error loading teams:",h),h;const p=(m||[]).map(y=>({id:y.id,name:y.name,memberCount:y.member_count}));e(" Teams loaded successfully:",p.length),s(p)}catch(m){console.error(" Error loading teams:",m)}},[e]),f=b.useCallback(async()=>{await Promise.all([u(),d()])},[u,d]);return b.useEffect(()=>{f()},[f]),{users:t,teams:n,loading:i,error:l,refreshData:f}}function fK(){const{users:e,teams:t,loading:r,error:n}=dK(),[s,i]=b.useState(""),[o,l]=b.useState("all"),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[m,h]=b.useState(!1),p=[{key:"user",header:"User",render:g=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs sm:text-sm font-medium text-indigo-600",children:g.name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:g.name}),a.jsx("div",{className:"text-sm text-gray-500 truncate",children:g.email})]})]})},{key:"team",header:"Team",render:g=>a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Gl,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 truncate max-w-32",children:g.teamName||"No Team"})]}),g.teamRole&&a.jsx(xr,{type:"teamRole",value:g.teamRole})]})},{key:"role",header:"Role",render:g=>a.jsx(xr,{type:"role",value:g.role}),className:"whitespace-nowrap"},{key:"status",header:"Status",render:g=>a.jsx(xr,{type:"status",value:g.status}),className:"whitespace-nowrap"},{key:"subscription",header:"Subscription",render:g=>a.jsx("span",{className:"text-sm text-gray-900 capitalize",children:g.subscription}),className:"whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell",headerClassName:"hidden sm:table-cell"},{key:"joinDate",header:"Join Date",render:g=>a.jsx("span",{className:"text-sm text-gray-500",children:new Date(g.joinDate).toLocaleDateString()}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"},{key:"lastActive",header:"Last Active",render:g=>a.jsx("span",{className:"text-sm text-gray-500",children:g.lastActive}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"}],y=e.filter(g=>{const v=g.name.toLowerCase().includes(s.toLowerCase())||g.email.toLowerCase().includes(s.toLowerCase())||(g.teamName||"No Team").toLowerCase().includes(s.toLowerCase()),x=o==="all"||g.role===o,w=c==="all"||g.status===c,_=d==="all"||g.teamId===d;return v&&x&&w&&_});return r?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading user data..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage user accounts, roles, and permissions across all teams."})]}),a.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]}),n&&a.jsx(Fe,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users by name, email, or team...",value:s,onChange:g=>i(g.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"System Admin"}),a.jsx("option",{value:"user",children:"User"})]}),a.jsxs("select",{value:c,onChange:g=>u(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"suspended",children:"Suspended"})]}),a.jsxs("select",{value:d,onChange:g=>f(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Teams"}),a.jsx("option",{value:"",children:"No Team"}),t.map(g=>a.jsx("option",{value:g.id,children:g.name},g.id))]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(U0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[y.length," of ",e.length," users"]})]})]})]})}),a.jsx(sn,{columns:p,data:y,loading:r,emptyState:{icon:He,title:"No Users Found",description:e.length===0?"No users found in the system.":"No users match your search criteria."}}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mt-6 sm:mt-8",children:[a.jsx(Ke,{title:"Total Users",value:e.length,icon:He,iconColor:"text-indigo-600"}),a.jsx(Ke,{title:"System Admins",value:e.filter(g=>g.role==="admin").length,icon:_n,iconColor:"text-purple-600"}),a.jsx(Ke,{title:"Teams",value:t.length,icon:Gl,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Active Users",value:e.filter(g=>g.status==="active").length,icon:Yl,iconColor:"text-blue-600"})]})]})})}const hK=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function mK(){const{questions:e,loading:t,fetchQuestions:r,createQuestion:n,updateQuestion:s,deleteQuestion:i}=ia(),[o,l]=b.useState(""),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[m,h]=b.useState(!1),[p,y]=b.useState(null),[g,v]=b.useState({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"});b.useEffect(()=>{r()},[r]);const x=e.filter(T=>{const $=T.question.toLowerCase().includes(o.toLowerCase())||T.answer.toLowerCase().includes(o.toLowerCase())||T.book_of_bible.toLowerCase().includes(o.toLowerCase()),P=c==="all"||T.book_of_bible===c,z=d==="all"||T.tier===d;return $&&P&&z}),w=Array.from(new Set(e.map(T=>T.book_of_bible))).sort(),_=[{key:"question",header:"Question",render:T=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:T.question})})},{key:"book_chapter",header:"Book & Chapter",render:T=>a.jsxs("div",{className:"text-sm text-gray-900",children:[a.jsx("div",{className:"font-medium",children:T.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",T.chapter]})]}),className:"whitespace-nowrap"},{key:"answer",header:"Answer",render:T=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm text-gray-900 line-clamp-2",children:T.answer})})},{key:"points",header:"Points",render:T=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(mr,{className:"h-4 w-4 text-yellow-500 mr-1"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:T.points})]}),className:"whitespace-nowrap"},{key:"time_to_answer",header:"Time",render:T=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(Me,{className:"h-4 w-4 text-gray-500 mr-1"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[T.time_to_answer,"s"]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:T=>a.jsx(xr,{type:"tier",value:T.tier,showIcon:!0}),className:"whitespace-nowrap"},{key:"actions",header:"",render:T=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>N(T),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>E(T.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(Hi,{className:"h-4 w-4"})})]}),className:"whitespace-nowrap text-right text-sm font-medium",headerClassName:"relative"}],j=()=>{y(null),v({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"}),h(!0)},N=T=>{y(T),v({book_of_bible:T.book_of_bible,chapter:T.chapter,question:T.question,answer:T.answer,points:T.points,time_to_answer:T.time_to_answer,tier:T.tier}),h(!0)},S=async()=>{try{p?await s(p.id,g):await n(g),h(!1)}catch(T){console.error("Error saving question:",T)}},E=async T=>{if(confirm("Are you sure you want to delete this question?"))try{await i(T)}catch($){console.error("Error deleting question:",$)}},O={total:e.length,free:e.filter(T=>T.tier==="free").length,pro:e.filter(T=>T.tier==="pro").length,enterprise:e.filter(T=>T.tier==="enterprise").length,books:w.length};return t?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading questions..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Question Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage quiz questions for the Pathfinder Bible Experience."})]}),a.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Question"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(Ke,{title:"Total Questions",value:O.total,icon:ke,iconColor:"text-indigo-600"}),a.jsx(Ke,{title:"Free",value:O.free,icon:jM,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Pro",value:O.pro,icon:mr,iconColor:"text-blue-600"}),a.jsx(Ke,{title:"Enterprise",value:O.enterprise,icon:mr,iconColor:"text-purple-600"}),a.jsx(Ke,{title:"Bible Books",value:O.books,icon:ke,iconColor:"text-gray-600"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search questions by text, answer, or book...",value:o,onChange:T=>l(T.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("select",{value:c,onChange:T=>u(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Books"}),w.map(T=>a.jsx("option",{value:T,children:T},T))]}),a.jsxs("select",{value:d,onChange:T=>f(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Tiers"}),a.jsx("option",{value:"free",children:"Free"}),a.jsx("option",{value:"pro",children:"Pro"}),a.jsx("option",{value:"enterprise",children:"Enterprise"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(U0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[x.length," of ",e.length," questions"]})]})]})]})}),a.jsx(sn,{columns:_,data:x,loading:t,emptyState:{icon:ke,title:"No Questions Found",description:"No questions found matching your criteria"}}),a.jsx(kn,{isOpen:m,onClose:()=>h(!1),title:p?"Edit Question":"Add New Question",maxWidth:"2xl",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:S,disabled:!g.book_of_bible||!g.question||!g.answer,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(B0,{className:"h-4 w-4"}),a.jsx("span",{children:p?"Update Question":"Add Question"})]})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Book of the Bible"}),a.jsxs("select",{value:g.book_of_bible,onChange:T=>v({...g,book_of_bible:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"",children:"Select a book"}),hK.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter"}),a.jsx("input",{type:"number",min:"1",max:"150",value:g.chapter,onChange:T=>v({...g,chapter:parseInt(T.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question"}),a.jsx("textarea",{value:g.question,onChange:T=>v({...g,question:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the quiz question...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer"}),a.jsx("textarea",{value:g.answer,onChange:T=>v({...g,answer:T.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the correct answer...",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),a.jsx("input",{type:"number",min:"1",max:"100",value:g.points,onChange:T=>v({...g,points:parseInt(T.target.value)||10}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time (seconds)"}),a.jsx("input",{type:"number",min:"10",max:"300",value:g.time_to_answer,onChange:T=>v({...g,time_to_answer:parseInt(T.target.value)||30}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tier"}),a.jsxs("select",{value:g.tier,onChange:T=>v({...g,tier:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"free",children:" Free"}),a.jsx("option",{value:"pro",children:" Pro"}),a.jsx("option",{value:"enterprise",children:" Enterprise"})]})]})]})]})})]})})}function pK(){const{developerLog:e}=xe(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{o(!0),c(null);try{e(" Fetching plan data from Supabase...");const{data:d,error:f}=await V.from("plans").select("*").order("name",{ascending:!0});if(f)throw console.error(" Error fetching plans:",f),f;const{data:m,error:h}=await V.from("plan_settings").select("*");if(h)throw console.error(" Error fetching plan settings:",h),h;const{data:p,error:y}=await V.from("plan_prices").select("*");if(y)throw console.error(" Error fetching plan prices:",y),y;const g=(d||[]).map(v=>{const w=(p||[]).filter(_=>_.plan_id===v.id);return{...v,prices:w}});e(" Plans fetched successfully:",g.length,"plans"),e("DEBUG: plansWithPrices before setting state:",JSON.stringify(g,null,2)),e("DEBUG: Raw prices data from DB:",JSON.stringify(p,null,2)),r(g),e(" Plan settings fetched successfully:",(m==null?void 0:m.length)||0,"settings"),s(m||[])}catch(d){console.error(" Error fetching plan data:",d),c("Failed to load plan data.")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{plans:t,planSettings:n,loading:i,error:l,fetchPlanData:u}}function ct(e){const[t,r]=oe.useState(!1),n=`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 ${e.error?"border-red-300 focus:ring-red-500":""} ${e.disabled?"bg-gray-50 text-gray-500 cursor-not-allowed":""}`,s=()=>{switch(e.type){case"password":return a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:e.id,type:t?"text":"password",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:`${n} ${e.showToggle!==!1?"pr-10":""}`}),e.showToggle!==!1&&a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),disabled:e.disabled,children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]});case"textarea":return a.jsx("textarea",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,rows:e.rows||3,disabled:e.disabled,className:n});case"select":return a.jsxs("select",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),disabled:e.disabled,className:n,children:[e.placeholder&&a.jsx("option",{value:"",children:e.placeholder}),e.options.map(i=>a.jsx("option",{value:i.value,children:i.label},i.value))]});case"number":return a.jsx("input",{id:e.id,type:"number",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,min:e.min,max:e.max,disabled:e.disabled,className:n});default:return a.jsx("input",{id:e.id,type:e.type,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:n})}};return a.jsxs("div",{className:e.className,children:[a.jsxs("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s(),e.helpText&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.helpText}),e.error&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.error})]})}function Zn({variant:e="primary",size:t="md",icon:r,iconPosition:n="left",loading:s=!1,disabled:i=!1,fullWidth:o=!1,children:l,onClick:c,type:u="button",className:d=""}){const f=()=>{switch(e){case"primary":return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500";case"secondary":return"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500";case"danger":return"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500";case"success":return"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500";case"ghost":return"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:ring-gray-500";default:return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500"}},m=()=>{switch(t){case"sm":return"px-3 py-1.5 text-sm";case"md":return"px-4 py-2 text-sm";case"lg":return"px-6 py-3 text-base";default:return"px-4 py-2 text-sm"}},h=`
    inline-flex items-center justify-center font-medium rounded-lg
    focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-all duration-200
  `,p=f(),y=m(),g=o?"w-full":"",v=i||s;return a.jsx("button",{type:u,onClick:c,disabled:v,className:`${h} ${p} ${y} ${g} ${d}`.trim(),children:s?a.jsxs(a.Fragment,{children:[a.jsx(lo,{className:"mr-2"}),a.jsx("span",{children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[r&&n==="left"&&a.jsx(r,{className:`h-4 w-4 ${l?"mr-2":""}`}),l,r&&n==="right"&&a.jsx(r,{className:`h-4 w-4 ${l?"ml-2":""}`})]})})}function gK(){var P,z,I,q,Q,D;const{plans:e,planSettings:t,loading:r,error:n,fetchPlanData:s}=pK(),[i,o]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(null),[f,m]=b.useState({}),[h,p]=b.useState({}),[y,g]=b.useState([]),[v,x]=b.useState(null),[w,_]=b.useState(!1),j=k=>{c(k),m(k);const C=t.find(A=>A.plan_id===k.id);d(C||null),p(C||{plan_id:k.id,max_questions_custom_quiz:0,max_team_members:0,question_tier_access:[],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),g(k.prices||[]),x(null),o(!0)},N=()=>{c(null),m({id:"",name:"",is_enabled:!0,description:""}),p({max_questions_custom_quiz:20,max_team_members:5,question_tier_access:["free"],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),g([]),x(null),o(!0)},S=()=>{const k={plan_id:f.id||"",currency:"USD",interval:"monthly",amount:0};g(C=>[...C,k])},E=(k,C)=>{g(A=>A.map((R,F)=>F===k?{...R,...C}:R))},O=k=>{g(C=>C.filter((A,R)=>R!==k))},T=async()=>{if(x(null),_(!0),!f.name||!f.id||h.max_questions_custom_quiz===void 0||h.max_team_members===void 0||h.allow_quick_start_quiz===void 0||h.allow_create_own_quiz===void 0||h.allow_study_schedule_quiz===void 0||h.allow_analytics_access===void 0){x("Please fill in all required fields."),_(!1);return}for(const C of y)if(!C.currency||!C.interval||C.amount===void 0||C.amount<0){x("Please ensure all price entries have valid currency, interval, and amount."),_(!1);return}const k=new Set;for(const C of y){const A=`${C.currency}-${C.interval}`;if(k.has(A)){x(`Duplicate price entry found for ${C.currency} (${C.interval}). Each plan can only have one price per currency and interval combination.`),_(!1);return}k.add(A)}try{if(l){const{error:C}=await V.from("plans").update({name:f.name,is_enabled:f.is_enabled,description:f.description,updated_at:new Date().toISOString()}).eq("id",f.id);if(C)throw C;const{error:A}=await V.from("plan_settings").update({max_questions_custom_quiz:h.max_questions_custom_quiz,max_team_members:h.max_team_members,question_tier_access:h.question_tier_access,allow_quick_start_quiz:h.allow_quick_start_quiz,allow_create_own_quiz:h.allow_create_own_quiz,allow_study_schedule_quiz:h.allow_study_schedule_quiz,allow_analytics_access:h.allow_analytics_access,updated_at:new Date().toISOString()}).eq("plan_id",f.id);if(A)throw A;const{error:R}=await V.from("plan_prices").delete().eq("plan_id",f.id);if(R)throw R;if(y.length>0){const{error:F}=await V.from("plan_prices").insert(y.map(Z=>({plan_id:f.id,currency:Z.currency,interval:Z.interval,amount:Z.amount,stripe_price_id:Z.stripe_price_id})));if(F)throw F}console.log(" Plan updated successfully")}else{const{error:C}=await V.from("plans").insert([{id:f.id,name:f.name,is_enabled:f.is_enabled,description:f.description}]);if(C)throw C;const{error:A}=await V.from("plan_settings").insert([{plan_id:f.id,max_questions_custom_quiz:h.max_questions_custom_quiz,max_team_members:h.max_team_members,question_tier_access:h.question_tier_access,allow_quick_start_quiz:h.allow_quick_start_quiz,allow_create_own_quiz:h.allow_create_own_quiz,allow_study_schedule_quiz:h.allow_study_schedule_quiz,allow_analytics_access:h.allow_analytics_access}]);if(A)throw A;if(y.length>0){const{error:R}=await V.from("plan_prices").insert(y.map(F=>({plan_id:f.id,currency:F.currency,interval:F.interval,amount:F.amount,stripe_price_id:F.stripe_price_id})));if(R)throw R}console.log(" Plan created successfully")}o(!1),await s()}catch(C){console.error("Error saving plan:",C),x(C.message||"Failed to save plan.")}finally{_(!1)}},$=[{key:"name",header:"Plan Name",render:k=>a.jsx("div",{className:"font-medium text-gray-900",children:k.name})},{key:"prices",header:"Pricing",render:k=>a.jsx("div",{className:"text-sm text-gray-900",children:k.prices&&k.prices.length>0?a.jsx("div",{className:"space-y-1",children:k.prices.map((C,A)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium",children:["$",C.amount.toFixed(2)," ",C.currency]}),a.jsxs("span",{className:"text-gray-500",children:["/",C.interval]})]},A))}):a.jsx("span",{className:"text-gray-500 italic",children:"No pricing set"})})},{key:"is_enabled",header:"Enabled",render:k=>k.is_enabled?a.jsx(Dt,{className:"h-5 w-5 text-green-500"}):a.jsx(zs,{className:"h-5 w-5 text-red-500"}),className:"text-center"},{key:"max_questions_custom_quiz",header:"Max Custom Quiz Qs",render:k=>{const C=t.find(A=>A.plan_id===k.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(C==null?void 0:C.max_questions_custom_quiz)||"N/A"})},className:"text-center"},{key:"max_team_members",header:"Max Team Members",render:k=>{const C=t.find(A=>A.plan_id===k.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(C==null?void 0:C.max_team_members)||"N/A"})},className:"text-center"},{key:"question_tier_access",header:"Question Tiers",render:k=>{var A;const C=t.find(R=>R.plan_id===k.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(A=C==null?void 0:C.question_tier_access)==null?void 0:A.map(R=>a.jsx("span",{className:"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs font-medium text-gray-600 mr-1 mb-1 capitalize",children:R},R))})}},{key:"feature_access",header:"Feature Access",render:k=>{const C=t.find(A=>A.plan_id===k.id);return a.jsxs("div",{className:"text-sm text-gray-900 flex flex-col space-y-1",children:[a.jsxs("span",{className:"flex items-center",children:[C!=null&&C.allow_quick_start_quiz?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(zs,{className:"h-4 w-4 text-red-500 mr-1"})," Quick Start Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[C!=null&&C.allow_create_own_quiz?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(zs,{className:"h-4 w-4 text-red-500 mr-1"})," Custom Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[C!=null&&C.allow_study_schedule_quiz?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(zs,{className:"h-4 w-4 text-red-500 mr-1"})," Study Schedule"]}),a.jsxs("span",{className:"flex items-center",children:[C!=null&&C.allow_analytics_access?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(zs,{className:"h-4 w-4 text-red-500 mr-1"})," Analytics Access"]})]})}},{key:"actions",header:"",render:k=>a.jsx("button",{onClick:()=>j(k),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),className:"text-right"}];return r?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading plans..."})}):n?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"error",message:n,className:"mb-6"})})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Plan Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage subscription plans and their associated settings."})]}),a.jsx(Zn,{variant:"primary",icon:Vi,onClick:N,children:"Add New Plan"})]}),a.jsx(sn,{columns:$,data:e,emptyState:{title:"No Plans Found",description:"No subscription plans are configured in the system."}}),a.jsxs(kn,{isOpen:i,onClose:()=>o(!1),title:l?`Edit Plan: ${l.name}`:"Add New Plan",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Zn,{variant:"secondary",onClick:()=>o(!1),disabled:w,children:"Cancel"}),a.jsx(Zn,{variant:"primary",onClick:T,loading:w,children:"Save Changes"})]}),children:[v&&a.jsx(Fe,{type:"error",message:v,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plan Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Plan ID",id:"planId",type:"text",value:f.id||"",onChange:k=>m({...f,id:k}),required:!0,disabled:!!l,helpText:l?void 0:"Unique identifier for the plan (e.g., 'free', 'pro')"}),a.jsx(ct,{label:"Plan Name",id:"planName",type:"text",value:f.name||"",onChange:k=>m({...f,name:k}),required:!0}),a.jsx(ct,{label:"Is Enabled",id:"planEnabled",type:"select",value:((P=f.is_enabled)==null?void 0:P.toString())||"true",onChange:k=>m({...f,is_enabled:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]}),a.jsx(ct,{label:"Description",id:"planDescription",type:"textarea",value:f.description||"",onChange:k=>m({...f,description:k})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing"}),a.jsx(Zn,{variant:"secondary",icon:Vi,size:"sm",onClick:S,children:"Add Price"})]}),y.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[a.jsx(vS,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No pricing configured"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add pricing options for this plan"})]}):a.jsx("div",{className:"space-y-4",children:y.map((k,C)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Price Option ",C+1]}),a.jsx(Zn,{variant:"danger",size:"sm",icon:Hi,onClick:()=>O(C),children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ct,{label:"Currency",id:`currency-${C}`,type:"select",value:k.currency,onChange:A=>E(C,{currency:A}),options:[{value:"USD",label:"USD ($)"},{value:"GBP",label:"GBP ()"},{value:"AUD",label:"AUD (A$)"},{value:"CAD",label:"CAD (C$)"}],required:!0}),a.jsx(ct,{label:"Billing Interval",id:`interval-${C}`,type:"select",value:k.interval,onChange:A=>E(C,{interval:A}),options:[{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],required:!0}),a.jsx(ct,{label:"Amount",id:`amount-${C}`,type:"number",value:k.amount,onChange:A=>E(C,{amount:parseFloat(A)||0}),min:0,required:!0})]}),a.jsx("div",{className:"mt-4",children:a.jsx(ct,{label:"Stripe Price ID (Optional)",id:`stripe-${C}`,type:"text",value:k.stripe_price_id||"",onChange:A=>E(C,{stripe_price_id:A}),helpText:"Will be populated automatically when synced with Stripe"})})]},C))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plan Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Max Questions Custom Quiz",id:"maxQuestionsCustomQuiz",type:"number",value:h.max_questions_custom_quiz||0,onChange:k=>p({...h,max_questions_custom_quiz:parseInt(k)}),min:0,required:!0}),a.jsx(ct,{label:"Max Team Members",id:"maxTeamMembers",type:"number",value:h.max_team_members||0,onChange:k=>p({...h,max_team_members:parseInt(k)}),min:0,required:!0}),a.jsx(ct,{label:"Question Tier Access (comma-separated)",id:"questionTierAccess",type:"text",value:((z=h.question_tier_access)==null?void 0:z.join(", "))||"",onChange:k=>p({...h,question_tier_access:k.split(",").map(C=>C.trim())}),helpText:"e.g., free, pro, enterprise"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Feature Access"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(ct,{label:"Allow Quick Start Quiz",id:"allowQuickStartQuiz",type:"select",value:((I=h.allow_quick_start_quiz)==null?void 0:I.toString())||"true",onChange:k=>p({...h,allow_quick_start_quiz:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(ct,{label:"Allow Create Own Quiz",id:"allowCreateOwnQuiz",type:"select",value:((q=h.allow_create_own_quiz)==null?void 0:q.toString())||"true",onChange:k=>p({...h,allow_create_own_quiz:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(ct,{label:"Allow Study Schedule Quiz",id:"allowStudyScheduleQuiz",type:"select",value:((Q=h.allow_study_schedule_quiz)==null?void 0:Q.toString())||"false",onChange:k=>p({...h,allow_study_schedule_quiz:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(ct,{label:"Allow Analytics Access",id:"allowAnalyticsAccess",type:"select",value:((D=h.allow_analytics_access)==null?void 0:D.toString())||"false",onChange:k=>p({...h,allow_analytics_access:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]})]})]})]})]})]})]})})}const x1=[{value:"total_quizzes_completed",label:"Total Quizzes Completed"},{value:"total_points_earned",label:"Total Points Earned"},{value:"longest_streak",label:"Longest Study Streak"},{value:"total_questions_answered",label:"Total Questions Answered"},{value:"perfect_quiz",label:"Perfect Quiz Score"},{value:"speed_demon",label:"Speed Demon (Fast Completion)"},{value:"accuracy_book_ruth",label:"Ruth Book Accuracy"},{value:"accuracy_book_esther",label:"Esther Book Accuracy"},{value:"accuracy_book_daniel",label:"Daniel Book Accuracy"},{value:"accuracy_chapter",label:"Chapter Accuracy"},{value:"accuracy_tier_free",label:"Free Tier Accuracy"},{value:"accuracy_tier_pro",label:"Pro Tier Accuracy"},{value:"accuracy_tier_enterprise",label:"Enterprise Tier Accuracy"}];function xK(){const{achievements:e,loading:t,error:r,refreshGamificationData:n}=Y0(),[s,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),[d,f]=b.useState(null),[m,h]=b.useState(!1),p=()=>{l(null),u({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),f(null),i(!0)},y=j=>{l(j),u({name:j.name,description:j.description,criteria_type:j.criteria_type,criteria_value:j.criteria_value,badge_icon_url:j.badge_icon_url}),f(null),i(!0)},g=async()=>{if(f(null),h(!0),!c.name.trim()||!c.description.trim()||c.criteria_value<=0){f("Please fill in all required fields with valid values."),h(!1);return}try{if(o){const{error:j}=await V.from("achievements").update({name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}).eq("id",o.id);if(j)throw j;console.log(" Achievement updated successfully")}else{const{error:j}=await V.from("achievements").insert([{name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}]);if(j)throw j;console.log(" Achievement created successfully")}i(!1),await n()}catch(j){console.error("Error saving achievement:",j),f(j.message||"Failed to save achievement.")}finally{h(!1)}},v=async(j,N)=>{if(confirm(`Are you sure you want to delete the achievement "${N}"? This action cannot be undone.`))try{h(!0);const{error:S}=await V.from("user_achievements").delete().eq("achievement_id",j);S&&console.warn("Warning: Could not delete user achievements:",S);const{error:E}=await V.from("achievements").delete().eq("id",j);if(E)throw E;console.log(" Achievement deleted successfully"),await n()}catch(S){console.error("Error deleting achievement:",S),f(S.message||"Failed to delete achievement.")}finally{h(!1)}},x=j=>{switch(j){case"total_quizzes_completed":return a.jsx(ke,{className:"h-4 w-4 text-blue-600"});case"total_points_earned":return a.jsx(Nt,{className:"h-4 w-4 text-yellow-600"});case"longest_streak":return a.jsx(Pn,{className:"h-4 w-4 text-orange-600"});case"total_questions_answered":return a.jsx(at,{className:"h-4 w-4 text-green-600"});case"perfect_quiz":return a.jsx(Ki,{className:"h-4 w-4 text-purple-600"});case"speed_demon":return a.jsx(Me,{className:"h-4 w-4 text-red-600"});default:return a.jsx(mr,{className:"h-4 w-4 text-gray-600"})}},w=j=>{const N=x1.find(S=>S.value===j);return(N==null?void 0:N.label)||j},_=[{key:"badge",header:"Badge",render:j=>a.jsxs("div",{className:"flex items-center justify-center",children:[j.badge_icon_url?a.jsx("img",{src:j.badge_icon_url,alt:j.name,className:"h-8 w-8 rounded-full",onError:N=>{var S;N.currentTarget.style.display="none",(S=N.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,a.jsx("div",{className:`h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center ${j.badge_icon_url?"hidden":""}`,children:a.jsx(mr,{className:"h-5 w-5 text-gray-600"})})]}),className:"text-center w-16"},{key:"name",header:"Achievement Name",render:j=>a.jsx("div",{className:"font-medium text-gray-900",children:j.name})},{key:"description",header:"Description",render:j=>a.jsx("div",{className:"text-sm text-gray-600 max-w-xs line-clamp-2",children:j.description})},{key:"criteria",header:"Criteria",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[x(j.criteria_type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(j.criteria_type)}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",j.criteria_value]})]})]})},{key:"actions",header:"",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>y(j),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Edit achievement",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>v(j.id,j.name),className:"text-red-600 hover:text-red-700 transition-colors duration-200",title:"Delete achievement",children:a.jsx(Hi,{className:"h-4 w-4"})})]}),className:"text-right"}];return t?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading achievements..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Achievement Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage achievements that users can unlock through their quiz activities."})]}),a.jsx(Zn,{variant:"primary",icon:Vi,onClick:p,children:"Add New Achievement"})]}),r&&a.jsx(Fe,{type:"error",message:r,className:"mb-6"}),d&&a.jsx(Fe,{type:"error",message:d,className:"mb-6",dismissible:!0,onDismiss:()=>f(null)}),a.jsx(sn,{columns:_,data:e,loading:t,emptyState:{icon:mr,title:"No Achievements Found",description:"No achievements are configured in the system. Create your first achievement to get started.",action:a.jsx(Zn,{variant:"primary",icon:Vi,onClick:p,children:"Create First Achievement"})}}),a.jsxs(kn,{isOpen:s,onClose:()=>{i(!1),f(null)},title:o?`Edit Achievement: ${o.name}`:"Add New Achievement",maxWidth:"2xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Zn,{variant:"secondary",onClick:()=>{i(!1),f(null)},disabled:m,children:"Cancel"}),a.jsx(Zn,{variant:"primary",onClick:g,loading:m,disabled:!c.name.trim()||!c.description.trim()||c.criteria_value<=0,children:o?"Update Achievement":"Create Achievement"})]}),children:[d&&a.jsx(Fe,{type:"error",message:d,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Achievement Name",id:"achievementName",type:"text",value:c.name,onChange:j=>u({...c,name:j}),placeholder:"e.g., Quiz Master",required:!0}),a.jsx(ct,{label:"Badge Icon URL",id:"badgeIconUrl",type:"text",value:c.badge_icon_url,onChange:j=>u({...c,badge_icon_url:j}),placeholder:"https://example.com/badge.png (optional)",helpText:"Leave empty to use default icon"})]}),a.jsx(ct,{label:"Description",id:"achievementDescription",type:"textarea",value:c.description,onChange:j=>u({...c,description:j}),placeholder:"Describe what the user needs to do to unlock this achievement...",rows:3,required:!0}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Criteria Type",id:"criteriaType",type:"select",value:c.criteria_type,onChange:j=>u({...c,criteria_type:j}),options:x1,required:!0}),a.jsx(ct,{label:"Target Value",id:"criteriaValue",type:"number",value:c.criteria_value,onChange:j=>u({...c,criteria_value:parseInt(j)||1}),min:1,required:!0,helpText:"The target value the user must reach to unlock this achievement"})]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Preview"}),a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:[c.badge_icon_url?a.jsx("img",{src:c.badge_icon_url,alt:"Badge preview",className:"h-10 w-10 rounded-full",onError:j=>{var N;j.currentTarget.style.display="none",(N=j.currentTarget.nextElementSibling)==null||N.classList.remove("hidden")}}):null,a.jsx(mr,{className:`h-6 w-6 text-gray-600 ${c.badge_icon_url?"hidden":""}`})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c.name||"Achievement Name"}),a.jsx("p",{className:"text-sm text-gray-600",children:c.description||"Achievement description will appear here..."}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[x(c.criteria_type),a.jsxs("span",{className:"text-xs text-gray-500",children:[w(c.criteria_type),": ",c.criteria_value]})]})]})]})]})]})]})]})})}function yK(){return a.jsx(M4,{children:a.jsx(ZD,{children:a.jsx(eM,{children:a.jsx(SM,{children:a.jsx(OM,{children:a.jsx(k4,{children:a.jsxs(y4,{children:[a.jsx(Se,{path:"/",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/documentation",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/features",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/login",element:a.jsx(eI,{})}),a.jsx(Se,{path:"/signup",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/forgot-password",element:a.jsx(tI,{})}),a.jsx(Se,{path:"/reset-password",element:a.jsx(rI,{})}),a.jsx(Se,{path:"/invitations/accept",element:a.jsx($W,{})}),a.jsx(Se,{path:"/dashboard",element:a.jsx(ht,{children:a.jsx(iI,{})})}),a.jsx(Se,{path:"/invitations",element:a.jsx(ht,{children:a.jsx(IW,{})})}),a.jsx(Se,{path:"/analytics",element:a.jsx(ht,{allowedTeamRoles:["owner","admin"],children:a.jsx(PW,{})})}),a.jsx(Se,{path:"/team",element:a.jsx(ht,{allowedTeamRoles:["owner","admin"],children:a.jsx(MW,{})})}),a.jsx(Se,{path:"/quiz",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(LW,{})})}),a.jsx(Se,{path:"/quiz/quick-start",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(GW,{})})}),a.jsx(Se,{path:"/quiz/create-own",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(YW,{})})}),a.jsx(Se,{path:"/quiz/study-assignment/:assignmentId",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(XW,{})})}),a.jsx(Se,{path:"/quiz/runner/:quizSessionId",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(yh,{})})}),a.jsx(Se,{path:"/schedule",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(iK,{})})}),a.jsx(Se,{path:"/achievements",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(JW,{})})}),a.jsx(Se,{path:"/leaderboard",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(lK,{})})}),a.jsx(Se,{path:"/billing",element:a.jsx(ht,{allowedTeamRoles:["owner"],children:a.jsx(AW,{})})}),a.jsx(Se,{path:"/billing/success",element:a.jsx(DW,{})}),a.jsx(Se,{path:"/settings",element:a.jsx(ht,{children:a.jsx(uI,{})})}),a.jsx(Se,{path:"/admin",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(uK,{})})}),a.jsx(Se,{path:"/admin/users",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(fK,{})})}),a.jsx(Se,{path:"/admin/questions",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(mK,{})})}),a.jsx(Se,{path:"/admin/plans",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(gK,{})})}),a.jsx(Se,{path:"/admin/achievements",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(xK,{})})}),a.jsx(Se,{path:"*",element:a.jsx(Yn,{to:"/",replace:!0})})]})})})})})})})}TN(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(yK,{})}));
